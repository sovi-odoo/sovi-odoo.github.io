<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>survey.question - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>survey.question</h1><p>Originally defined in: odoo/addons/survey/models/survey_question.py</p><hr/><h2>Original: odoo/addons/survey/models/survey_question.py</h2><h3>Fields</h3><details><summary id="f-allowed_triggering_question_ids">allowed_triggering_question_ids <span class="position">@ line 163</span></summary><pre>allowed_triggering_question_ids = fields.Many2many(
        'survey.question', string="Allowed Triggering Questions", copy=False, compute="_compute_allowed_triggering_question_ids")</pre></details><details><summary id="f-answer_date">answer_date <span class="position">@ line 103</span></summary><pre>answer_date = fields.Date('Correct date answer', help="Correct date answer for this question.")</pre></details><details><summary id="f-answer_datetime">answer_datetime <span class="position">@ line 104</span></summary><pre>answer_datetime = fields.Datetime('Correct datetime answer', help="Correct date and time answer for this question.")</pre></details><details><summary id="f-answer_numerical_box">answer_numerical_box <span class="position">@ line 102</span></summary><pre>answer_numerical_box = fields.Float('Correct numerical answer', help="Correct number answer for this question.")</pre></details><details><summary id="f-answer_score">answer_score <span class="position">@ line 105</span></summary><pre>answer_score = fields.Float('Score', help="Score value for a correct answer to this question.")</pre></details><details><summary id="f-background_image">background_image <span class="position">@ line 67</span></summary><pre>background_image = fields.Image("Background Image", compute="_compute_background_image", store=True, readonly=False)</pre></details><details><summary id="f-background_image_url">background_image_url <span class="position">@ line 68</span></summary><pre>background_image_url = fields.Char("Background Url", compute="_compute_background_image_url")</pre></details><details><summary id="f-comment_count_as_answer">comment_count_as_answer <span class="position">@ line 138</span></summary><pre>comment_count_as_answer = fields.Boolean('Comment is an answer')</pre></details><details><summary id="f-comments_allowed">comments_allowed <span class="position">@ line 136</span></summary><pre>comments_allowed = fields.Boolean('Show Comments Field')</pre></details><details><summary id="f-comments_message">comments_message <span class="position">@ line 137</span></summary><pre>comments_message = fields.Char('Comment Message', translate=True)</pre></details><details><summary id="f-constr_error_msg">constr_error_msg <span class="position">@ line 152</span></summary><pre>constr_error_msg = fields.Char('Error message', translate=True)</pre></details><details><summary id="f-constr_mandatory">constr_mandatory <span class="position">@ line 151</span></summary><pre>constr_mandatory = fields.Boolean('Mandatory Answer')</pre></details><details><summary id="f-description">description <span class="position">@ line 63</span></summary><pre>description = fields.Html(
        'Description', translate=True, sanitize=True, sanitize_overridable=True,
        help="Use this field to add additional explanations about your question or to illustrate it with pictures or a video")</pre></details><details><summary id="f-has_image_only_suggested_answer">has_image_only_suggested_answer <span class="position">@ line 99</span></summary><pre>has_image_only_suggested_answer = fields.Boolean(
        "Has image only suggested answer", compute='_compute_has_image_only_suggested_answer')</pre></details><details><summary id="f-is_page">is_page <span class="position">@ line 74</span></summary><pre>is_page = fields.Boolean('Is a page?')</pre></details><details><summary id="f-is_placed_before_trigger">is_placed_before_trigger <span class="position">@ line 165</span></summary><pre>is_placed_before_trigger = fields.Boolean(
        string='Is misplaced?', help="Is this question placed before any of its trigger questions?",
        compute="_compute_allowed_triggering_question_ids")</pre></details><details><summary id="f-is_scored_question">is_scored_question <span class="position">@ line 95</span></summary><pre>is_scored_question = fields.Boolean(
        'Scored', compute='_compute_is_scored_question',
        readonly=False, store=True, copy=True,
        help="Include this question as part of quiz scoring. Requires an answer and answer score to be taken into account.")</pre></details><details><summary id="f-is_time_customized">is_time_customized <span class="position">@ line 133</span></summary><pre>is_time_customized = fields.Boolean("Customized speed rewards")</pre></details><details><summary id="f-is_time_limited">is_time_limited <span class="position">@ line 131</span></summary><pre>is_time_limited = fields.Boolean("The question is limited in time",
        help="Currently only supported for live sessions.")</pre></details><details><summary id="f-matrix_row_ids">matrix_row_ids <span class="position">@ line 121</span></summary><pre>matrix_row_ids = fields.One2many(
        'survey.question.answer', 'matrix_question_id', string='Matrix Rows', copy=True,
        help='Labels used for proposed choices: rows of matrix')</pre></details><details><summary id="f-matrix_subtype">matrix_subtype <span class="position">@ line 118</span></summary><pre>matrix_subtype = fields.Selection([
        ('simple', 'One choice per row'),
        ('multiple', 'Multiple choices per row')], string='Matrix Type', default='simple')</pre></details><details><summary id="f-page_id">page_id <span class="position">@ line 83</span></summary><pre>page_id = fields.Many2one('survey.question', string='Page', compute="_compute_page_id", store=True)</pre></details><details><summary id="f-question_ids">question_ids <span class="position">@ line 75</span></summary><pre>question_ids = fields.One2many('survey.question', string='Questions', compute="_compute_question_ids")</pre></details><details><summary id="f-question_placeholder">question_placeholder <span class="position">@ line 66</span></summary><pre>question_placeholder = fields.Char("Placeholder", translate=True, compute="_compute_question_placeholder", store=True, readonly=False)</pre></details><details><summary id="f-question_type">question_type <span class="position">@ line 84</span></summary><pre>question_type = fields.Selection([
        ('simple_choice', 'Multiple choice: only one answer'),
        ('multiple_choice', 'Multiple choice: multiple answers allowed'),
        ('text_box', 'Multiple Lines Text Box'),
        ('char_box', 'Single Line Text Box'),
        ('numerical_box', 'Numerical Value'),
        ('scale', 'Scale'),
        ('date', 'Date'),
        ('datetime', 'Datetime'),
        ('matrix', 'Matrix')], string='Question Type',
        compute='_compute_question_type', readonly=False, store=True)</pre></details><details><summary id="f-questions_selection">questions_selection <span class="position">@ line 76</span></summary><pre>questions_selection = fields.Selection(
        related='survey_id.questions_selection', readonly=True,
        help="If randomized is selected, add the number of random questions next to the section.")</pre></details><details><summary id="f-random_questions_count">random_questions_count <span class="position">@ line 79</span></summary><pre>random_questions_count = fields.Integer(
        '# Questions Randomly Picked', default=1,
        help="Used on randomized sections to take X random questions from all the questions of that section.")</pre></details><details><summary id="f-save_as_email">save_as_email <span class="position">@ line 107</span></summary><pre>save_as_email = fields.Boolean(
        "Save as user email", compute='_compute_save_as_email', readonly=False, store=True, copy=True,
        help="If checked, this option will save the user's answer as its email address.")</pre></details><details><summary id="f-save_as_nickname">save_as_nickname <span class="position">@ line 110</span></summary><pre>save_as_nickname = fields.Boolean(
        "Save as user nickname", compute='_compute_save_as_nickname', readonly=False, store=True, copy=True,
        help="If checked, this option will save the user's answer as its nickname.")</pre></details><details><summary id="f-scale_max">scale_max <span class="position">@ line 126</span></summary><pre>scale_max = fields.Integer("Scale Maximum Value", default=10)</pre></details><details><summary id="f-scale_max_label">scale_max_label <span class="position">@ line 129</span></summary><pre>scale_max_label = fields.Char("Scale Maximum Label", translate=True)</pre></details><details><summary id="f-scale_mid_label">scale_mid_label <span class="position">@ line 128</span></summary><pre>scale_mid_label = fields.Char("Scale Middle Label", translate=True)</pre></details><details><summary id="f-scale_min">scale_min <span class="position">@ line 125</span></summary><pre>scale_min = fields.Integer("Scale Minimum Value", default=0)</pre></details><details><summary id="f-scale_min_label">scale_min_label <span class="position">@ line 127</span></summary><pre>scale_min_label = fields.Char("Scale Minimum Label", translate=True)</pre></details><details><summary id="f-scoring_type">scoring_type <span class="position">@ line 70</span></summary><pre>scoring_type = fields.Selection(related='survey_id.scoring_type', string='Scoring Type', readonly=True)</pre></details><details><summary id="f-sequence">sequence <span class="position">@ line 71</span></summary><pre>sequence = fields.Integer('Sequence', default=10)</pre></details><details><summary id="f-session_available">session_available <span class="position">@ line 72</span></summary><pre>session_available = fields.Boolean(related='survey_id.session_available', string='Live Session available', readonly=True)</pre></details><details><summary id="f-suggested_answer_ids">suggested_answer_ids <span class="position">@ line 114</span></summary><pre>suggested_answer_ids = fields.One2many(
        'survey.question.answer', 'question_id', string='Types of answers', copy=True,
        help='Labels used for proposed choices: simple choice, multiple choice and columns of matrix')</pre></details><details><summary id="f-survey_id">survey_id <span class="position">@ line 69</span></summary><pre>survey_id = fields.Many2one('survey.survey', string='Survey', ondelete='cascade')</pre></details><details><summary id="f-time_limit">time_limit <span class="position">@ line 134</span></summary><pre>time_limit = fields.Integer("Time limit (seconds)")</pre></details><details><summary id="f-title">title <span class="position">@ line 62</span></summary><pre>title = fields.Char('Title', required=True, translate=True)</pre></details><details><summary id="f-triggering_answer_ids">triggering_answer_ids <span class="position">@ line 168</span></summary><pre>triggering_answer_ids = fields.Many2many(
        'survey.question.answer', string="Triggering Answers", copy=False, store=True,
        readonly=False, help="Picking any of these answers will trigger this question.\n"
                             "Leave the field empty if the question should always be displayed.",
        domain="""[
            ('question_id.survey_id', '=', survey_id),
            '&', ('question_id.question_type', 'in', ['simple_choice', 'multiple_choice']),
                 '|',
                     ('question_id.sequence', '<', sequence),
                     '&', ('question_id.sequence', '=', sequence), ('question_id.id', '<', id)
        ]"""
    )</pre></details><details><summary id="f-triggering_question_ids">triggering_question_ids <span class="position">@ line 159</span></summary><pre>triggering_question_ids = fields.Many2many(
        'survey.question', string="Triggering Questions", compute="_compute_triggering_question_ids",
        store=False, help="Questions containing the triggering answer(s) to display the current question.")</pre></details><details><summary id="f-user_input_line_ids">user_input_line_ids <span class="position">@ line 154</span></summary><pre>user_input_line_ids = fields.One2many(
        'survey.user_input.line', 'question_id', string='Answers',
        domain=[('skipped', '=', False)], groups='survey.group_survey_user')</pre></details><details><summary id="f-validation_email">validation_email <span class="position">@ line 141</span></summary><pre>validation_email = fields.Boolean('Input must be an email')</pre></details><details><summary id="f-validation_error_msg">validation_error_msg <span class="position">@ line 150</span></summary><pre>validation_error_msg = fields.Char('Validation Error', translate=True)</pre></details><details><summary id="f-validation_length_max">validation_length_max <span class="position">@ line 143</span></summary><pre>validation_length_max = fields.Integer('Maximum Text Length', default=0)</pre></details><details><summary id="f-validation_length_min">validation_length_min <span class="position">@ line 142</span></summary><pre>validation_length_min = fields.Integer('Minimum Text Length', default=0)</pre></details><details><summary id="f-validation_max_date">validation_max_date <span class="position">@ line 147</span></summary><pre>validation_max_date = fields.Date('Maximum Date')</pre></details><details><summary id="f-validation_max_datetime">validation_max_datetime <span class="position">@ line 149</span></summary><pre>validation_max_datetime = fields.Datetime('Maximum Datetime')</pre></details><details><summary id="f-validation_max_float_value">validation_max_float_value <span class="position">@ line 145</span></summary><pre>validation_max_float_value = fields.Float('Maximum value', default=0.0)</pre></details><details><summary id="f-validation_min_date">validation_min_date <span class="position">@ line 146</span></summary><pre>validation_min_date = fields.Date('Minimum Date')</pre></details><details><summary id="f-validation_min_datetime">validation_min_datetime <span class="position">@ line 148</span></summary><pre>validation_min_datetime = fields.Datetime('Minimum Datetime')</pre></details><details><summary id="f-validation_min_float_value">validation_min_float_value <span class="position">@ line 144</span></summary><pre>validation_min_float_value = fields.Float('Minimum value', default=0.0)</pre></details><details><summary id="f-validation_required">validation_required <span class="position">@ line 140</span></summary><pre>validation_required = fields.Boolean('Validate entry', compute='_compute_validation_required', readonly=False, store=True)</pre></details><h3>Methods</h3><details><summary id="m-_get_correct_answers">_get_correct_answers(self) <span class="position">@ line 761</span></summary><pre>Return a dictionary linking the scorable question ids to their correct answers.
The questions without correct answers are not considered.</pre></details><ul id="m-_get_stats_data"><li>_get_stats_data(self, user_input_lines) <span class="position">@ line 617</span></li></ul><details><summary id="m-_get_stats_data_answers">_get_stats_data_answers(self, user_input_lines) <span class="position">@ line 630</span></summary><pre>Statistics for question.answer based questions (simple choice, multiple
choice.). A corner case with a void record survey.question.answer is added
to count comments that should be considered as valid answers. This small hack
allow to have everything available in the same standard structure.</pre></details><ul id="m-_get_stats_data_scale"><li>_get_stats_data_scale(self, user_input_lines) <span class="position">@ line 687</span></li></ul><ul id="m-_get_stats_graph_data_matrix"><li>_get_stats_graph_data_matrix(self, user_input_lines) <span class="position">@ line 659</span></li></ul><ul id="m-_get_stats_summary_data"><li>_get_stats_summary_data(self, user_input_lines) <span class="position">@ line 709</span></li></ul><ul id="m-_get_stats_summary_data_choice"><li>_get_stats_summary_data_choice(self, user_input_lines) <span class="position">@ line 722</span></li></ul><ul id="m-_get_stats_summary_data_numerical"><li>_get_stats_summary_data_numerical(self, user_input_lines, fname) <span class="position">@ line 740</span></li></ul><ul id="m-_get_stats_summary_data_scored"><li>_get_stats_summary_data_scored(self, user_input_lines) <span class="position">@ line 749</span></li></ul><details><summary id="m-_index">_index(self) <span class="position">@ line 535</span></summary><pre>We would normally just use the 'sequence' field of questions BUT, if the pages and questions are
created without ever moving records around, the sequence field can be set to 0 for all the questions.

However, the order of the recordset is always correct so we can rely on the index method.</pre></details><details><summary id="m-_prepare_statistics">_prepare_statistics(self, user_input_lines) <span class="position">@ line 577</span></summary><pre>Compute statistical data for questions by counting number of vote per choice on basis of filter</pre></details><details><summary id="m-_update_time_limit_from_survey">_update_time_limit_from_survey(self, is_time_limited, time_limit) <span class="position">@ line 547</span></summary><pre>Update the speed rating values after a change in survey's speed rating configuration.

* Questions that were not customized will take the new default values from the survey
* Questions that were customized will not change their values, but this method will check
and update the `is_time_customized` flag if necessary (to `False`) such that the user
won't need to "actively" do it to make the question sensitive to change in survey values.

This is not done with `_compute`s because `is_time_limited` (and `time_limit`) would depend
on `is_time_customized` and vice versa.</pre></details><ul id="m-_validate_char_box"><li>_validate_char_box(self, answer) <span class="position">@ line 462</span></li></ul><ul id="m-_validate_choice"><li>_validate_choice(self, answer, comment) <span class="position">@ line 513</span></li></ul><ul id="m-_validate_date"><li>_validate_date(self, answer) <span class="position">@ line 489</span></li></ul><ul id="m-_validate_matrix"><li>_validate_matrix(self, answers) <span class="position">@ line 522</span></li></ul><ul id="m-_validate_numerical_box"><li>_validate_numerical_box(self, answer) <span class="position">@ line 476</span></li></ul><ul id="m-_validate_scale"><li>_validate_scale(self, answer) <span class="position">@ line 528</span></li></ul><ul id="m-copy"><li>copy(self, default) <span class="position">@ line 399</span></li></ul><ul id="m-create"><li>create(self, vals_list) <span class="position">@ line 406</span></li></ul><details><summary id="m-validate_question">validate_question(self, answer, comment) <span class="position">@ line 428</span></summary><pre>Validate question, depending on question type and parameters
for simple choice, text, date and number, answer is simply the answer of the question.
For other multiple choices questions, answer is a list of answers (the selected choices
or a list of selected answers per question -for matrix type-):
- Simple answer : answer = 'example' or 2 or question_answer_id or 2019/10/10
- Multiple choice : answer = [question_answer_id1, question_answer_id2, question_answer_id3]
- Matrix: answer = { 'rowId1' : [colId1, colId2,...], 'rowId2' : [colId1, colId3, ...] }

return dict {question.id (int): error (str)} -> empty dict if no validation error.</pre></details><script src="class.js"></script></body></html>
