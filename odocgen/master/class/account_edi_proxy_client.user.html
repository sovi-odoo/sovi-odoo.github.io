<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>account_edi_proxy_client.user - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>account_edi_proxy_client.user</h1><p>Originally defined in: odoo/addons/account_edi_proxy_client/models/account_edi_proxy_user.py</p><p>Inherited in: odoo/addons/l10n_it_edi/models/account_edi_proxy_user.py<br/>Inherited in: odoo/addons/account_peppol/models/account_edi_proxy_user.py<br/></p><hr/><h2>Original: odoo/addons/account_edi_proxy_client/models/account_edi_proxy_user.py</h2><h3>Fields</h3><details><summary id="f-active">active <span class="position">@ line 42</span></summary><pre>active = fields.Boolean(default=True)</pre></details><details><summary id="f-company_id">company_id <span class="position">@ line 44</span></summary><pre>company_id = fields.Many2one('res.company', string='Company', required=True,
        default=lambda self: self.env.company)</pre></details><details><summary id="f-edi_identification">edi_identification <span class="position">@ line 46</span></summary><pre>edi_identification = fields.Char(required=True, help="The unique id that identifies this user, typically the vat")</pre></details><details><summary id="f-edi_mode">edi_mode <span class="position">@ line 51</span></summary><pre>edi_mode = fields.Selection(
        selection=[
            ('prod', 'Production mode'),
            ('test', 'Test mode'),
            ('demo', 'Demo mode'),
        ],
        string='EDI operating mode',
    )</pre></details><details><summary id="f-id_client">id_client <span class="position">@ line 43</span></summary><pre>id_client = fields.Char(required=True)</pre></details><details><summary id="f-private_key">private_key <span class="position">@ line 47</span></summary><pre>private_key = fields.Binary(required=True, attachment=False, groups="base.group_system", help="The key to encrypt all the user's data")</pre></details><details><summary id="f-private_key_filename">private_key_filename <span class="position">@ line 48</span></summary><pre>private_key_filename = fields.Char(compute='_compute_private_key_filename')</pre></details><details><summary id="f-proxy_type">proxy_type <span class="position">@ line 50</span></summary><pre>proxy_type = fields.Selection(selection=[], required=True)</pre></details><details><summary id="f-refresh_token">refresh_token <span class="position">@ line 49</span></summary><pre>refresh_token = fields.Char(groups="base.group_system")</pre></details><h3>Methods</h3><ul id="m-_auto_init"><li>_auto_init(self) <span class="position">@ line 66</span></li></ul><ul id="m-_compute_private_key_filename"><li>_compute_private_key_filename(self) <span class="position">@ line 81</span></li></ul><details><summary id="m-_decrypt_data">_decrypt_data(self, data, symmetric_key) <span class="position">@ line 229</span></summary><pre>Decrypt the data. Note that the data is encrypted with a symmetric key, which is encrypted with an asymmetric key.
We must therefore decrypt the symmetric key.

:param data:            The data to decrypt.
:param symmetric_key:   The symmetric_key encrypted with self.private_key.public_key()</pre></details><details><summary id="m-_get_proxy_identification">_get_proxy_identification(self, company, proxy_type) <span class="position">@ line 101</span></summary><pre>Returns the key that will identify company uniquely
within a specific proxy type and edi operating mode.
or raises a UserError (if the user didn't fill the related field).
TO OVERRIDE</pre></details><ul id="m-_get_proxy_urls"><li>_get_proxy_urls(self) <span class="position">@ line 85</span></li></ul><details><summary id="m-_get_proxy_users">_get_proxy_users(self, company, proxy_type) <span class="position">@ line 96</span></summary><pre>Returns proxy users associated with the given company and proxy type.</pre></details><ul id="m-_get_server_url"><li>_get_server_url(self, proxy_type, edi_mode) <span class="position">@ line 89</span></li></ul><details><summary id="m-_make_request">_make_request(self, url, params) <span class="position">@ line 109</span></summary><pre>Make a request to proxy and handle the generic elements of the reponse (errors, new refresh token).</pre></details><details><summary id="m-_register_proxy_user">_register_proxy_user(self, company, proxy_type, edi_mode) <span class="position">@ line 154</span></summary><pre>Generate the public_key/private_key that will be used to encrypt the file, send a request to the proxy
to register the user with the public key and create the user with the private key.

:param company: the company of the user.</pre></details><details><summary id="m-_renew_token">_renew_token(self) <span class="position">@ line 207</span></summary><pre>Request the proxy for a new refresh token.

Request to the proxy should be made with a refresh token that expire after 24h to avoid
that multiple database use the same credentials. When receiving an error for an expired refresh_token,
This method makes a request to get a new refresh token.</pre></details><h2>Inherited: odoo/addons/l10n_it_edi/models/account_edi_proxy_user.py</h2><h3>Fields</h3><details><summary id="f-proxy_type">proxy_type <span class="position">@ line 14</span></summary><pre>proxy_type = fields.Selection(selection_add=[('l10n_it_edi', 'Italian EDI')], ondelete={'l10n_it_edi': 'cascade'})</pre></details><h3>Methods</h3><ul id="m-_get_proxy_identification"><li>_get_proxy_identification(self, company, proxy_type) <span class="position">@ line 25</span></li></ul><ul id="m-_get_proxy_urls"><li>_get_proxy_urls(self) <span class="position">@ line 16</span></li></ul><h2>Inherited: odoo/addons/account_peppol/models/account_edi_proxy_user.py</h2><h3>Fields</h3><details><summary id="f-peppol_verification_code">peppol_verification_code <span class="position">@ line 17</span></summary><pre>peppol_verification_code = fields.Char(string='SMS verification code')</pre></details><details><summary id="f-proxy_type">proxy_type <span class="position">@ line 18</span></summary><pre>proxy_type = fields.Selection(selection_add=[('peppol', 'PEPPOL')], ondelete={'peppol': 'cascade'})</pre></details><h3>Methods</h3><ul id="m-_cron_peppol_get_message_status"><li>_cron_peppol_get_message_status(self) <span class="position">@ line 63</span></li></ul><ul id="m-_cron_peppol_get_new_documents"><li>_cron_peppol_get_new_documents(self) <span class="position">@ line 59</span></li></ul><ul id="m-_cron_peppol_get_participant_status"><li>_cron_peppol_get_participant_status(self) <span class="position">@ line 215</span></li></ul><ul id="m-_get_proxy_identification"><li>_get_proxy_identification(self, company, proxy_type) <span class="position">@ line 71</span></li></ul><ul id="m-_get_proxy_urls"><li>_get_proxy_urls(self) <span class="position">@ line 46</span></li></ul><ul id="m-_make_request"><li>_make_request(self, url, params) <span class="position">@ line 25</span></li></ul><ul id="m-_peppol_get_message_status"><li>_peppol_get_message_status(self) <span class="position">@ line 176</span></li></ul><ul id="m-_peppol_get_new_documents"><li>_peppol_get_new_documents(self) <span class="position">@ line 114</span></li></ul><ul id="m-_peppol_get_participant_status"><li>_peppol_get_participant_status(self) <span class="position">@ line 219</span></li></ul><details><summary id="m-_peppol_import_invoice">_peppol_import_invoice(self, attachment, partner_endpoint, peppol_state, uuid) <span class="position">@ line 79</span></summary><pre>Save new documents in an accounting journal, when one is specified on the company.

:param attachment: the new document
:param partner_endpoint: a string containing the sender's Peppol endpoint
:param peppol_state: the state of the received Peppol document
:param uuid: the UUID of the Peppol document
:return: `True` if the document was saved, `False` if it was not</pre></details><script src="class.js"></script></body></html>
