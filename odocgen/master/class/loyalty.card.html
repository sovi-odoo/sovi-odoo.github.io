<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>loyalty.card - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>loyalty.card</h1><p>Inherited in: odoo/addons/website_sale_loyalty/models/loyalty_card.py<br/>Inherited in: odoo/addons/sale_loyalty/models/loyalty_card.py<br/>Inherited in: odoo/addons/pos_loyalty/models/loyalty_card.py<br/>Inherited in: odoo/addons/loyalty/models/loyalty_card.py<br/></p><hr/><h2>Inherited: odoo/addons/website_sale_loyalty/models/loyalty_card.py</h2><h3>Methods</h3><ul id="m-action_coupon_share"><li>action_coupon_share(self) <span class="position">@ line 9</span></li></ul><h2>Inherited: odoo/addons/sale_loyalty/models/loyalty_card.py</h2><h3>Fields</h3><details><summary id="f-order_id">order_id <span class="position">@ line 10</span></summary><pre>order_id = fields.Many2one(
        comodel_name='sale.order',
        string="Order Reference",
        readonly=True,
        help="The sales order from which coupon is generated")</pre></details><h3>Methods</h3><ul id="m-_compute_use_count"><li>_compute_use_count(self) <span class="position">@ line 28</span></li></ul><ul id="m-_get_default_template"><li>_get_default_template(self) <span class="position">@ line 16</span></li></ul><ul id="m-_get_mail_partner"><li>_get_mail_partner(self) <span class="position">@ line 22</span></li></ul><ul id="m-_get_signature"><li>_get_signature(self) <span class="position">@ line 25</span></li></ul><ul id="m-_has_source_order"><li>_has_source_order(self) <span class="position">@ line 36</span></li></ul><h2>Inherited: odoo/addons/pos_loyalty/models/loyalty_card.py</h2><h3>Fields</h3><details><summary id="f-source_pos_order_id">source_pos_order_id <span class="position">@ line 10</span></summary><pre>source_pos_order_id = fields.Many2one('pos.order', "PoS Order Reference",
        help="PoS order where this coupon was generated.")</pre></details><h3>Methods</h3><ul id="m-_compute_use_count"><li>_compute_use_count(self) <span class="position">@ line 36</span></li></ul><ul id="m-_get_default_template"><li>_get_default_template(self) <span class="position">@ line 24</span></li></ul><ul id="m-_get_mail_partner"><li>_get_mail_partner(self) <span class="position">@ line 30</span></li></ul><ul id="m-_get_signature"><li>_get_signature(self) <span class="position">@ line 33</span></li></ul><ul id="m-_has_source_order"><li>_has_source_order(self) <span class="position">@ line 21</span></li></ul><h2>Inherited: odoo/addons/loyalty/models/loyalty_card.py</h2><h3>Fields</h3><details><summary id="f-code">code <span class="position">@ line 39</span></summary><pre>code = fields.Char(default=lambda self: self._generate_code(), required=True)</pre></details><details><summary id="f-company_id">company_id <span class="position">@ line 31</span></summary><pre>company_id = fields.Many2one(related='program_id.company_id', store=True)</pre></details><details><summary id="f-currency_id">currency_id <span class="position">@ line 32</span></summary><pre>currency_id = fields.Many2one(related='program_id.currency_id')</pre></details><details><summary id="f-expiration_date">expiration_date <span class="position">@ line 40</span></summary><pre>expiration_date = fields.Date()</pre></details><details><summary id="f-partner_id">partner_id <span class="position">@ line 34</span></summary><pre>partner_id = fields.Many2one('res.partner', index=True)</pre></details><details><summary id="f-point_name">point_name <span class="position">@ line 36</span></summary><pre>point_name = fields.Char(related='program_id.portal_point_name', readonly=True)</pre></details><details><summary id="f-points">points <span class="position">@ line 35</span></summary><pre>points = fields.Float(tracking=True)</pre></details><details><summary id="f-points_display">points_display <span class="position">@ line 37</span></summary><pre>points_display = fields.Char(compute='_compute_points_display')</pre></details><details><summary id="f-program_id">program_id <span class="position">@ line 29</span></summary><pre>program_id = fields.Many2one('loyalty.program', ondelete='restrict', default=lambda self: self.env.context.get('active_id', None))</pre></details><details><summary id="f-program_type">program_type <span class="position">@ line 30</span></summary><pre>program_type = fields.Selection(related='program_id.program_type')</pre></details><details><summary id="f-use_count">use_count <span class="position">@ line 42</span></summary><pre>use_count = fields.Integer(compute='_compute_use_count')</pre></details><h3>Methods</h3><ul id="m-_compute_use_count"><li>_compute_use_count(self) <span class="position">@ line 68</span></li></ul><ul id="m-_format_points"><li>_format_points(self, points) <span class="position">@ line 59</span></li></ul><ul id="m-_get_default_template"><li>_get_default_template(self) <span class="position">@ line 71</span></li></ul><ul id="m-_get_mail_partner"><li>_get_mail_partner(self) <span class="position">@ line 75</span></li></ul><details><summary id="m-_get_signature">_get_signature(self) <span class="position">@ line 79</span></summary><pre>To be overriden</pre></details><ul id="m-_has_source_order"><li>_has_source_order(self) <span class="position">@ line 84</span></li></ul><details><summary id="m-_send_creation_communication">_send_creation_communication(self, force_send) <span class="position">@ line 113</span></summary><pre>Sends the 'At Creation' communication plan if it exist for the given coupons.</pre></details><details><summary id="m-_send_points_reach_communication">_send_points_reach_communication(self, points_changes) <span class="position">@ line 129</span></summary><pre>Send the 'When Reaching' communicaton plans for the given coupons.

If a coupons passes multiple milestones we will only send the one with the highest target.</pre></details><details><summary id="m-action_coupon_send">action_coupon_send(self) <span class="position">@ line 87</span></summary><pre>Open a window to compose an email, with the default template returned by `_get_default_template`
message loaded by default</pre></details><ul id="m-write"><li>write(self, vals) <span class="position">@ line 167</span></li></ul><script src="class.js"></script></body></html>
