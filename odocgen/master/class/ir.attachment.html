<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>ir.attachment - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>ir.attachment</h1><p>Originally defined in: odoo/odoo/addons/base/models/ir_attachment.py</p><p>Inherited in: odoo/addons/website_forum/models/ir_attachment.py<br/>Inherited in: odoo/addons/website/models/theme_models.py<br/>Inherited in: odoo/addons/website/models/ir_attachment.py<br/>Inherited in: odoo/addons/web_unsplash/models/ir_attachment.py<br/>Inherited in: odoo/addons/web_editor/models/ir_attachment.py<br/>Inherited in: odoo/addons/product/models/ir_attachment.py<br/>Inherited in: odoo/addons/mail/models/ir_attachment.py<br/>Inherited in: odoo/addons/l10n_it_edi/models/ir_attachment.py<br/>Inherited in: odoo/addons/l10n_es_edi_tbai/models/ir_attachment.py<br/>Inherited in: odoo/addons/hr_expense/models/ir_attachment.py<br/>Inherited in: odoo/addons/attachment_indexation/models/ir_attachment.py<br/>Inherited in: odoo/addons/account_edi/models/ir_attachment.py<br/>Inherited in: odoo/addons/account/models/ir_attachment.py<br/></p><hr/><h2>Original: odoo/odoo/addons/base/models/ir_attachment.py</h2><h3>Fields</h3><details><summary id="f-access_token">access_token <span class="position">@ line 413</span></summary><pre>access_token = fields.Char('Access Token', groups="base.group_user")</pre></details><details><summary id="f-checksum">checksum <span class="position">@ line 421</span></summary><pre>checksum = fields.Char("Checksum/SHA1", size=40, readonly=True)</pre></details><details><summary id="f-company_id">company_id <span class="position">@ line 404</span></summary><pre>company_id = fields.Many2one('res.company', string='Company', change_default=True,
                                 default=lambda self: self.env.company)</pre></details><details><summary id="f-datas">datas <span class="position">@ line 417</span></summary><pre>datas = fields.Binary(string='File Content (base64)', compute='_compute_datas', inverse='_inverse_datas')</pre></details><details><summary id="f-db_datas">db_datas <span class="position">@ line 418</span></summary><pre>db_datas = fields.Binary('Database Data', attachment=False)</pre></details><details><summary id="f-description">description <span class="position">@ line 398</span></summary><pre>description = fields.Text('Description')</pre></details><details><summary id="f-file_size">file_size <span class="position">@ line 420</span></summary><pre>file_size = fields.Integer('File Size', readonly=True)</pre></details><details><summary id="f-index_content">index_content <span class="position">@ line 423</span></summary><pre>index_content = fields.Text('Indexed Content', readonly=True, prefetch=False)</pre></details><details><summary id="f-mimetype">mimetype <span class="position">@ line 422</span></summary><pre>mimetype = fields.Char('Mime Type', readonly=True)</pre></details><details><summary id="f-name">name <span class="position">@ line 397</span></summary><pre>name = fields.Char('Name', required=True)</pre></details><details><summary id="f-public">public <span class="position">@ line 410</span></summary><pre>public = fields.Boolean('Is public document')</pre></details><details><summary id="f-raw">raw <span class="position">@ line 416</span></summary><pre>raw = fields.Binary(string="File Content (raw)", compute='_compute_raw', inverse='_inverse_raw')</pre></details><details><summary id="f-res_field">res_field <span class="position">@ line 401</span></summary><pre>res_field = fields.Char('Resource Field', readonly=True)</pre></details><details><summary id="f-res_id">res_id <span class="position">@ line 402</span></summary><pre>res_id = fields.Many2oneReference('Resource ID', model_field='res_model',
                                      readonly=True)</pre></details><details><summary id="f-res_model">res_model <span class="position">@ line 400</span></summary><pre>res_model = fields.Char('Resource Model', readonly=True)</pre></details><details><summary id="f-res_name">res_name <span class="position">@ line 399</span></summary><pre>res_name = fields.Char('Resource Name', compute='_compute_res_name')</pre></details><details><summary id="f-store_fname">store_fname <span class="position">@ line 419</span></summary><pre>store_fname = fields.Char('Stored Filename', index=True)</pre></details><details><summary id="f-type">type <span class="position">@ line 406</span></summary><pre>type = fields.Selection([('url', 'URL'), ('binary', 'File')],
                            string='Type', required=True, default='binary', change_default=True,
                            help="You can either upload a file from your computer or copy/paste an internet link to your file.")</pre></details><details><summary id="f-url">url <span class="position">@ line 409</span></summary><pre>url = fields.Char('Url', index='btree_not_null', size=1024)</pre></details><h3>Methods</h3><ul id="m-_auto_init"><li>_auto_init(self) <span class="position">@ line 425</span></li></ul><ul id="m-_check_contents"><li>_check_contents(self, values) <span class="position">@ line 359</span></li></ul><details><summary id="m-_compute_checksum">_compute_checksum(self, bin_data) <span class="position">@ line 276</span></summary><pre>compute the checksum for the given datas
:param bin_data : datas in its binary form</pre></details><details><summary id="m-_compute_mimetype">_compute_mimetype(self, values) <span class="position">@ line 297</span></summary><pre>compute the mimetype of the given values
:param values : dict of values to create or write an ir_attachment
:return mime : string indicating the mimetype, or application/octet-stream by default</pre></details><ul id="m-_compute_res_name"><li>_compute_res_name(self) <span class="position">@ line 46</span></li></ul><ul id="m-_gc_file_store_unsafe"><li>_gc_file_store_unsafe(self) <span class="position">@ line 188</span></li></ul><ul id="m-_generate_access_token"><li>_generate_access_token(self) <span class="position">@ line 693</span></li></ul><ul id="m-_get_datas_related_values"><li>_get_datas_related_values(self, data, mimetype) <span class="position">@ line 258</span></li></ul><ul id="m-_inverse_datas"><li>_inverse_datas(self) <span class="position">@ line 242</span></li></ul><ul id="m-_inverse_raw"><li>_inverse_raw(self) <span class="position">@ line 239</span></li></ul><details><summary id="m-_mark_for_gc">_mark_for_gc(self, fname) <span class="position">@ line 143</span></summary><pre>Add ``fname`` in a checklist for the filestore garbage collection.</pre></details><ul id="m-_migrate"><li>_migrate(self) <span class="position">@ line 83</span></li></ul><ul id="m-_post_add_create"><li>_post_add_create(self) <span class="position">@ line 654</span></li></ul><ul id="m-_postprocess_contents"><li>_postprocess_contents(self, values) <span class="position">@ line 319</span></li></ul><ul id="m-_set_attachment_data"><li>_set_attachment_data(self, asbytes) <span class="position">@ line 245</span></li></ul><ul id="m-copy_data"><li>copy_data(self, default) <span class="position">@ line 593</span></li></ul><ul id="m-generate_access_token"><li>generate_access_token(self) <span class="position">@ line 657</span></li></ul><ul id="m-unlink"><li>unlink(self) <span class="position">@ line 602</span></li></ul><ul id="m-validate_access"><li>validate_access(self, access_token) <span class="position">@ line 696</span></li></ul><ul id="m-write"><li>write(self, vals) <span class="position">@ line 584</span></li></ul><h2>Inherited: odoo/addons/website_forum/models/ir_attachment.py</h2><h3>Methods</h3><ul id="m-_can_bypass_rights_on_media_dialog"><li>_can_bypass_rights_on_media_dialog(self) <span class="position">@ line 11</span></li></ul><h2>Inherited: odoo/addons/website/models/theme_models.py</h2><h3>Fields</h3><details><summary id="f-key">key <span class="position">@ line 391</span></summary><pre>key = fields.Char(copy=False)</pre></details><details><summary id="f-theme_template_id">theme_template_id <span class="position">@ line 392</span></summary><pre>theme_template_id = fields.Many2one('theme.ir.attachment', copy=False)</pre></details><h2>Inherited: odoo/addons/website/models/ir_attachment.py</h2><h3>Fields</h3><details><summary id="f-key">key <span class="position">@ line 14</span></summary><pre>key = fields.Char()</pre></details><details><summary id="f-website_id">website_id <span class="position">@ line 15</span></summary><pre>website_id = fields.Many2one('website')</pre></details><h3>Methods</h3><ul id="m-_get_serve_attachment"><li>_get_serve_attachment(self, url, extra_domain, order) <span class="position">@ line 29</span></li></ul><h2>Inherited: odoo/addons/web_unsplash/models/ir_attachment.py</h2><h3>Methods</h3><ul id="m-_can_bypass_rights_on_media_dialog"><li>_can_bypass_rights_on_media_dialog(self) <span class="position">@ line 11</span></li></ul><h2>Inherited: odoo/addons/web_editor/models/ir_attachment.py</h2><h3>Fields</h3><details><summary id="f-image_height">image_height <span class="position">@ line 26</span></summary><pre>image_height = fields.Integer(compute='_compute_image_size')</pre></details><details><summary id="f-image_src">image_src <span class="position">@ line 24</span></summary><pre>image_src = fields.Char(compute='_compute_image_src')</pre></details><details><summary id="f-image_width">image_width <span class="position">@ line 25</span></summary><pre>image_width = fields.Integer(compute='_compute_image_size')</pre></details><details><summary id="f-local_url">local_url <span class="position">@ line 23</span></summary><pre>local_url = fields.Char("Attachment URL", compute='_compute_local_url')</pre></details><details><summary id="f-original_id">original_id <span class="position">@ line 27</span></summary><pre>original_id = fields.Many2one('ir.attachment', string="Original (unoptimized, unresized) attachment")</pre></details><h3>Methods</h3><details><summary id="m-_can_bypass_rights_on_media_dialog">_can_bypass_rights_on_media_dialog(self) <span class="position">@ line 79</span></summary><pre>This method is meant to be overridden, for instance to allow to
create image attachment despite the user not allowed to create
attachment, eg:
- Portal user uploading an image on the forum (bypass acl)
- Non admin user uploading an unsplash image (bypass binary/url check)</pre></details><ul id="m-_compute_local_url"><li>_compute_local_url(self) <span class="position">@ line 29</span></li></ul><details><summary id="m-_get_media_info">_get_media_info(self) <span class="position">@ line 74</span></summary><pre>Return a dict with the values that we need on the media dialog.</pre></details><h2>Inherited: odoo/addons/mail/models/ir_attachment.py</h2><h3>Methods</h3><ul id="m-_attachment_format"><li>_attachment_format(self) <span class="position">@ line 92</span></li></ul><ul id="m-_bus_notification_target"><li>_bus_notification_target(self) <span class="position">@ line 88</span></li></ul><details><summary id="m-_check_attachments_access">_check_attachments_access(self, attachment_tokens) <span class="position">@ line 31</span></summary><pre>This method relies on access rules/rights and therefore it should not be called from a sudo env.</pre></details><ul id="m-_delete_and_notify"><li>_delete_and_notify(self, message) <span class="position">@ line 79</span></li></ul><details><summary id="m-_post_add_create">_post_add_create(self) <span class="position">@ line 52</span></summary><pre>Overrides behaviour when the attachment is created through the controller</pre></details><details><summary id="m-register_as_main_attachment">register_as_main_attachment(self, force) <span class="position">@ line 59</span></summary><pre>Registers this attachment as the main one of the model it is
attached to.

:param bool force: if set, the method always updates the existing main attachment
otherwise it only sets the main attachment if there is none.</pre></details><h2>Inherited: odoo/addons/l10n_it_edi/models/ir_attachment.py</h2><h3>Methods</h3><details><summary id="m-_decode_edi_l10n_it_edi">_decode_edi_l10n_it_edi(self, name, content) <span class="position">@ line 18</span></summary><pre>Decodes a  into a list of one dictionary representing an attachment.
:returns:           A list with a dictionary.</pre></details><ul id="m-_is_l10n_it_edi_import_file"><li>_is_l10n_it_edi_import_file(self) <span class="position">@ line 44</span></li></ul><h2>Inherited: odoo/addons/hr_expense/models/ir_attachment.py</h2><h3>Methods</h3><ul id="m-unlink"><li>unlink(self) <span class="position">@ line 23</span></li></ul><h2>Inherited: odoo/addons/attachment_indexation/models/ir_attachment.py</h2><h3>Methods</h3><details><summary id="m-_index_docx">_index_docx(self, bin_data) <span class="position">@ line 40</span></summary><pre>Index Microsoft .docx documents</pre></details><details><summary id="m-_index_opendoc">_index_opendoc(self, bin_data) <span class="position">@ line 89</span></summary><pre>Index OpenDocument documents (.odt, .ods...)</pre></details><details><summary id="m-_index_pdf">_index_pdf(self, bin_data) <span class="position">@ line 105</span></summary><pre>Index PDF documents</pre></details><details><summary id="m-_index_pptx">_index_pptx(self, bin_data) <span class="position">@ line 55</span></summary><pre>Index Microsoft .pptx documents</pre></details><details><summary id="m-_index_xlsx">_index_xlsx(self, bin_data) <span class="position">@ line 73</span></summary><pre>Index Microsoft .xlsx documents</pre></details><ul id="m-copy"><li>copy(self, default) <span class="position">@ line 144</span></li></ul><h2>Inherited: odoo/addons/account/models/ir_attachment.py</h2><h3>Methods</h3><details><summary id="m-_build_zip_from_attachments">_build_zip_from_attachments(self) <span class="position">@ line 21</span></summary><pre>Return the zip bytes content resulting from compressing the attachments in `self`</pre></details><details><summary id="m-_decode_edi_binary">_decode_edi_binary(self, filename, content) <span class="position">@ line 92</span></summary><pre>Decodes any file into a list of one dictionary representing an attachment.
This is a fallback for all files that are not decoded by other methods.
:returns:           A list with a dictionary.</pre></details><details><summary id="m-_decode_edi_pdf">_decode_edi_pdf(self, filename, content) <span class="position">@ line 55</span></summary><pre>Decodes a pdf and unwrap sub-attachment into a list of dictionary each representing an attachment.
:returns:           A list of dictionary for each attachment.</pre></details><details><summary id="m-_decode_edi_xml">_decode_edi_xml(self, filename, content) <span class="position">@ line 33</span></summary><pre>Decodes an xml into a list of one dictionary representing an attachment.
:returns:           A list with a dictionary.</pre></details><details><summary id="m-_unwrap_edi_attachments">_unwrap_edi_attachments(self) <span class="position">@ line 144</span></summary><pre>Decodes ir.attachment and unwrap sub-attachment into a sorted list of
dictionary each representing an attachment.

:returns:           A list of dictionary for each attachment.
* filename:         The name of the attachment.
* content:          The content of the attachment.
* type:             The type of the attachment.
* xml_tree:         The tree of the xml if type is xml.
* pdf_reader:       The pdf_reader if type is pdf.
* attachment:       The associated ir.attachment if any
* sort_weight:      The associated weigth used for sorting the arrays</pre></details><script src="class.js"></script></body></html>
