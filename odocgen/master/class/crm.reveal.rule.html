<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>crm.reveal.rule - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>crm.reveal.rule</h1><p>Originally defined in: odoo/addons/website_crm_iap_reveal/models/crm_reveal_rule.py</p><hr/><h2>Original: odoo/addons/website_crm_iap_reveal/models/crm_reveal_rule.py</h2><h3>Fields</h3><details><summary id="f-active">active <span class="position">@ line 28</span></summary><pre>active = fields.Boolean(default=True)</pre></details><details><summary id="f-company_size_max">company_size_max <span class="position">@ line 42</span></summary><pre>company_size_max = fields.Integer(default=1000)</pre></details><details><summary id="f-company_size_min">company_size_min <span class="position">@ line 41</span></summary><pre>company_size_min = fields.Integer(string='Company Size', default=0)</pre></details><details><summary id="f-contact_filter_type">contact_filter_type <span class="position">@ line 45</span></summary><pre>contact_filter_type = fields.Selection([('role', 'Role'), ('seniority', 'Seniority')], string="Filter On", required=True, default='role')</pre></details><details><summary id="f-country_ids">country_ids <span class="position">@ line 31</span></summary><pre>country_ids = fields.Many2many('res.country', string='Countries', help='Only visitors of following countries will be converted into leads/opportunities (using GeoIP).')</pre></details><details><summary id="f-extra_contacts">extra_contacts <span class="position">@ line 49</span></summary><pre>extra_contacts = fields.Integer(string='Number of Contacts', help='This is the number of contacts to track if their role/seniority match your criteria. Their details will show up in the history thread of generated leads/opportunities. One credit is consumed per tracked contact.', default=1)</pre></details><details><summary id="f-filter_on_size">filter_on_size <span class="position">@ line 40</span></summary><pre>filter_on_size = fields.Boolean(string="Filter on Size", default=True, help="Filter companies based on their size.")</pre></details><details><summary id="f-industry_tag_ids">industry_tag_ids <span class="position">@ line 39</span></summary><pre>industry_tag_ids = fields.Many2many('crm.iap.lead.industry', string='Industries', help='Leave empty to always match. Odoo will not create lead if no match')</pre></details><details><summary id="f-lead_count">lead_count <span class="position">@ line 60</span></summary><pre>lead_count = fields.Integer(compute='_compute_lead_count', string='Number of Generated Leads')</pre></details><details><summary id="f-lead_for">lead_for <span class="position">@ line 52</span></summary><pre>lead_for = fields.Selection([('companies', 'Companies'), ('people', 'Companies and their Contacts')], string='Data Tracking', required=True, default='companies', help='Choose whether to track companies only or companies and their contacts')</pre></details><details><summary id="f-lead_ids">lead_ids <span class="position">@ line 59</span></summary><pre>lead_ids = fields.One2many('crm.lead', 'reveal_rule_id', string='Generated Lead / Opportunity')</pre></details><details><summary id="f-lead_type">lead_type <span class="position">@ line 53</span></summary><pre>lead_type = fields.Selection([('lead', 'Lead'), ('opportunity', 'Opportunity')], string='Type', required=True, default='opportunity')</pre></details><details><summary id="f-name">name <span class="position">@ line 27</span></summary><pre>name = fields.Char(string='Rule Name', required=True)</pre></details><details><summary id="f-opportunity_count">opportunity_count <span class="position">@ line 61</span></summary><pre>opportunity_count = fields.Integer(compute='_compute_lead_count', string='Number of Generated Opportunity')</pre></details><details><summary id="f-other_role_ids">other_role_ids <span class="position">@ line 47</span></summary><pre>other_role_ids = fields.Many2many('crm.iap.lead.role', string='Other Roles')</pre></details><details><summary id="f-preferred_role_id">preferred_role_id <span class="position">@ line 46</span></summary><pre>preferred_role_id = fields.Many2one('crm.iap.lead.role', string='Preferred Role')</pre></details><details><summary id="f-priority">priority <span class="position">@ line 58</span></summary><pre>priority = fields.Selection(crm_stage.AVAILABLE_PRIORITIES, string='Priority')</pre></details><details><summary id="f-regex_url">regex_url <span class="position">@ line 34</span></summary><pre>regex_url = fields.Char(string='URL Expression', help='Regex to track website pages. Leave empty to track the entire website, or / to target the homepage. Example: /page* to track all the pages which begin with /page')</pre></details><details><summary id="f-seniority_id">seniority_id <span class="position">@ line 48</span></summary><pre>seniority_id = fields.Many2one('crm.iap.lead.seniority', string='Seniority')</pre></details><details><summary id="f-sequence">sequence <span class="position">@ line 35</span></summary><pre>sequence = fields.Integer(help='Used to order the rules with same URL and countries. '
                                   'Rules with a lower sequence number will be processed first.')</pre></details><details><summary id="f-state_ids">state_ids <span class="position">@ line 33</span></summary><pre>state_ids = fields.Many2many('res.country.state', string='States', help='Only visitors of following states will be converted into leads/opportunities.')</pre></details><details><summary id="f-suffix">suffix <span class="position">@ line 54</span></summary><pre>suffix = fields.Char(string='Suffix', help='This will be appended in name of generated lead so you can identify lead/opportunity is generated with this rule')</pre></details><details><summary id="f-tag_ids">tag_ids <span class="position">@ line 56</span></summary><pre>tag_ids = fields.Many2many('crm.tag', string='Tags')</pre></details><details><summary id="f-team_id">team_id <span class="position">@ line 55</span></summary><pre>team_id = fields.Many2one('crm.team', string='Sales Team', ondelete="set null")</pre></details><details><summary id="f-user_id">user_id <span class="position">@ line 57</span></summary><pre>user_id = fields.Many2one('res.users', string='Salesperson')</pre></details><details><summary id="f-website_id">website_id <span class="position">@ line 32</span></summary><pre>website_id = fields.Many2one('website', help='Restrict Lead generation to this website.')</pre></details><h3>Methods</h3><details><summary id="m-_add_to_country">_add_to_country(self, country_rules, country, rule_index) <span class="position">@ line 179</span></summary><pre>Add the rule index to the country code in the country_rules</pre></details><ul id="m-_compute_lead_count"><li>_compute_lead_count(self) <span class="position">@ line 69</span></li></ul><details><summary id="m-_create_lead_from_response">_create_lead_from_response(self, result) <span class="position">@ line 354</span></summary><pre>This method will get response from service and create the lead accordingly</pre></details><ul id="m-_get_rules_payload"><li>_get_rules_payload(self) <span class="position">@ line 283</span></li></ul><ul id="m-_iap_contact_reveal"><li>_iap_contact_reveal(self, params, timeout) <span class="position">@ line 350</span></li></ul><ul id="m-_lead_vals_from_response"><li>_lead_vals_from_response(self, result) <span class="position">@ line 388</span></li></ul><details><summary id="m-_match_url">_match_url(self, website_id, url, country_code, state_code, rules_excluded) <span class="position">@ line 188</span></summary><pre>Return the matching rule based on the country, the website and URL.</pre></details><ul id="m-_perform_reveal_service"><li>_perform_reveal_service(self, server_payload) <span class="position">@ line 316</span></li></ul><details><summary id="m-_prepare_iap_payload">_prepare_iap_payload(self, pgv) <span class="position">@ line 261</span></summary><pre>This will prepare the page view and returns payload
Payload sample
{
ips: {
'192.168.1.1': [1,4],
'192.168.1.6': [2,4]
},
rules: {
1: {rule_data},
2: {rule_data},
4: {rule_data}
}
}</pre></details><ul id="m-action_get_lead_tree_view"><li>action_get_lead_tree_view(self) <span class="position">@ line 103</span></li></ul><ul id="m-action_get_opportunity_tree_view"><li>action_get_opportunity_tree_view(self) <span class="position">@ line 109</span></li></ul><ul id="m-unlink"><li>unlink(self) <span class="position">@ line 99</span></li></ul><ul id="m-write"><li>write(self, vals) <span class="position">@ line 91</span></li></ul><script src="class.js"></script></body></html>
