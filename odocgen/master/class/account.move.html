<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>account.move - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>account.move</h1><p>Inherited in: odoo/addons/website_sale/models/account_move.py<br/>Inherited in: odoo/addons/stock_landed_costs/models/account_move.py<br/>Inherited in: odoo/addons/stock_account/models/account_move.py<br/>Inherited in: odoo/addons/snailmail_account/models/account_move.py<br/>Inherited in: odoo/addons/sale_timesheet/models/account_move.py<br/>Inherited in: odoo/addons/sale_stock/models/account_move.py<br/>Inherited in: odoo/addons/sale_expense/models/account_move_line.py<br/>Inherited in: odoo/addons/sale/models/account_move.py<br/>Inherited in: odoo/addons/purchase_stock/models/account_invoice.py<br/>Inherited in: odoo/addons/purchase/models/account_invoice.py<br/>Inherited in: odoo/addons/product_email_template/models/account_move.py<br/>Inherited in: odoo/addons/point_of_sale/models/account_move.py<br/>Inherited in: odoo/addons/membership/models/account_move.py<br/>Inherited in: odoo/addons/l10n_zm_account/models/account_move.py<br/>Inherited in: odoo/addons/l10n_uy/models/account_move.py<br/>Inherited in: odoo/addons/l10n_th/models/account_move.py<br/>Inherited in: odoo/addons/l10n_sk/models/account_move.py<br/>Inherited in: odoo/addons/l10n_sg/models/account_move.py<br/>Inherited in: odoo/addons/l10n_se/models/account_move.py<br/>Inherited in: odoo/addons/l10n_sa_edi/models/account_move.py<br/>Inherited in: odoo/addons/l10n_sa/models/account_move.py<br/>Inherited in: odoo/addons/l10n_rs/models/account_move.py<br/>Inherited in: odoo/addons/l10n_pl/models/account_move.py<br/>Inherited in: odoo/addons/l10n_ph/models/account_move.py<br/>Inherited in: odoo/addons/l10n_pe/models/account_move.py<br/>Inherited in: odoo/addons/l10n_no/models/account_move.py<br/>Inherited in: odoo/addons/l10n_mu_account/models/account_move.py<br/>Inherited in: odoo/addons/l10n_latam_invoice_document/models/account_move.py<br/>Inherited in: odoo/addons/l10n_ke_edi_tremol/models/account_move.py<br/>Inherited in: odoo/addons/l10n_it_stock_ddt/models/account_invoice.py<br/>Inherited in: odoo/addons/l10n_it_edi_withholding/models/account_move.py<br/>Inherited in: odoo/addons/l10n_it_edi/models/account_move.py<br/>Inherited in: odoo/addons/l10n_in_sale_stock/models/account_move.py<br/>Inherited in: odoo/addons/l10n_in_purchase_stock/models/account_move.py<br/>Inherited in: odoo/addons/l10n_in_purchase/models/account_move.py<br/>Inherited in: odoo/addons/l10n_in_edi_ewaybill/models/account_move.py<br/>Inherited in: odoo/addons/l10n_in_edi/models/account_move.py<br/>Inherited in: odoo/addons/l10n_in/models/account_invoice.py<br/>Inherited in: odoo/addons/l10n_id_efaktur/models/account_move.py<br/>Inherited in: odoo/addons/l10n_id/models/account_move.py<br/>Inherited in: odoo/addons/l10n_hu_edi/models/account_move.py<br/>Inherited in: odoo/addons/l10n_hu/models/account_move.py<br/>Inherited in: odoo/addons/l10n_gcc_invoice/models/account_move.py<br/>Inherited in: odoo/addons/l10n_fr_facturx_chorus_pro/models/account_move.py<br/>Inherited in: odoo/addons/l10n_fr_account/models/account_move.py<br/>Inherited in: odoo/addons/l10n_fi/models/account_move.py<br/>Inherited in: odoo/addons/l10n_es_pos/models/account_move.py<br/>Inherited in: odoo/addons/l10n_es_edi_tbai/models/account_move.py<br/>Inherited in: odoo/addons/l10n_es_edi_sii/models/account_move.py<br/>Inherited in: odoo/addons/l10n_es_edi_facturae/models/account_move.py<br/>Inherited in: odoo/addons/l10n_es/models/account_move.py<br/>Inherited in: odoo/addons/l10n_eg_edi_eta/models/account_move.py<br/>Inherited in: odoo/addons/l10n_ec/models/account_move.py<br/>Inherited in: odoo/addons/l10n_dk_oioubl/models/account_move.py<br/>Inherited in: odoo/addons/l10n_de/models/account_move.py<br/>Inherited in: odoo/addons/l10n_cz/models/account_move.py<br/>Inherited in: odoo/addons/l10n_cn/models/account_move.py<br/>Inherited in: odoo/addons/l10n_cl/models/account_move.py<br/>Inherited in: odoo/addons/l10n_ch/models/account_invoice.py<br/>Inherited in: odoo/addons/l10n_br/models/account_move.py<br/>Inherited in: odoo/addons/l10n_be/models/account_move.py<br/>Inherited in: odoo/addons/l10n_au/models/account_move.py<br/>Inherited in: odoo/addons/l10n_ar_withholding/models/account_move.py<br/>Inherited in: odoo/addons/l10n_ar/models/account_move.py<br/>Inherited in: odoo/addons/hr_expense/models/account_move.py<br/>Inherited in: odoo/addons/event_booth_sale/models/account_move.py<br/>Inherited in: odoo/addons/account_peppol/models/account_move.py<br/>Inherited in: odoo/addons/account_payment/models/account_move.py<br/>Inherited in: odoo/addons/account_fleet/models/account_move.py<br/>Inherited in: odoo/addons/account_edi_ubl_cii/models/account_move.py<br/>Inherited in: odoo/addons/account_edi/models/account_move.py<br/>Inherited in: odoo/addons/account_debit_note/models/account_move.py<br/>Inherited in: odoo/addons/account_check_printing/models/account_move.py<br/>Inherited in: odoo/addons/account_audit_trail/models/account_move.py<br/>Inherited in: odoo/addons/account/models/account_payment.py<br/>Inherited in: odoo/addons/account/models/account_move.py<br/>Inherited in: odoo/addons/account/models/account_bank_statement_line.py<br/></p><hr/><h2>Inherited: odoo/addons/website_sale/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-website_id">website_id <span class="position">@ line 9</span></summary><pre>website_id = fields.Many2one(
        'website', compute='_compute_website_id', string='Website',
        help='Website through which this invoice was created for eCommerce orders.',
        store=True, readonly=True, tracking=True)</pre></details><h3>Methods</h3><ul id="m-preview_invoice"><li>preview_invoice(self) <span class="position">@ line 14</span></li></ul><h2>Inherited: odoo/addons/stock_landed_costs/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-landed_costs_ids">landed_costs_ids <span class="position">@ line 10</span></summary><pre>landed_costs_ids = fields.One2many('stock.landed.cost', 'vendor_bill_id', string='Landed Costs')</pre></details><details><summary id="f-landed_costs_visible">landed_costs_visible <span class="position">@ line 11</span></summary><pre>landed_costs_visible = fields.Boolean(compute='_compute_landed_costs_visible')</pre></details><h3>Methods</h3><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 49</span></li></ul><ul id="m-action_view_landed_costs"><li>action_view_landed_costs(self) <span class="position">@ line 41</span></li></ul><details><summary id="m-button_create_landed_costs">button_create_landed_costs(self) <span class="position">@ line 21</span></summary><pre>Create a `stock.landed.cost` record associated to the account move of `self`, each
`stock.landed.costs` lines mirroring the current `account.move.line` of self.</pre></details><h2>Inherited: odoo/addons/stock_account/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-stock_move_id">stock_move_id <span class="position">@ line 10</span></summary><pre>stock_move_id = fields.Many2one('stock.move', string='Stock Move', index='btree_not_null')</pre></details><details><summary id="f-stock_valuation_layer_ids">stock_valuation_layer_ids <span class="position">@ line 11</span></summary><pre>stock_valuation_layer_ids = fields.One2many('stock.valuation.layer', 'account_move_id', string='Stock Valuation Layer')</pre></details><h3>Methods</h3><ul id="m-_compute_show_reset_to_draft_button"><li>_compute_show_reset_to_draft_button(self) <span class="position">@ line 13</span></li></ul><ul id="m-_get_invoiced_lot_values"><li>_get_invoiced_lot_values(self) <span class="position">@ line 230</span></li></ul><ul id="m-_get_lines_onchange_currency"><li>_get_lines_onchange_currency(self) <span class="position">@ line 23</span></li></ul><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 38</span></li></ul><details><summary id="m-_stock_account_anglo_saxon_reconcile_valuation">_stock_account_anglo_saxon_reconcile_valuation(self, product) <span class="position">@ line 175</span></summary><pre>Reconciles the entries made in the interim accounts in anglosaxon accounting,
reconciling stock valuation move lines with the invoice's.</pre></details><details><summary id="m-_stock_account_get_last_step_stock_moves">_stock_account_get_last_step_stock_moves(self) <span class="position">@ line 169</span></summary><pre>To be overridden for customer invoices and vendor bills in order to
return the stock moves related to the invoices in self.</pre></details><details><summary id="m-_stock_account_prepare_anglo_saxon_out_lines_vals">_stock_account_prepare_anglo_saxon_out_lines_vals(self) <span class="position">@ line 77</span></summary><pre>Prepare values used to create the journal items (account.move.line) corresponding to the Cost of Good Sold
lines (COGS) for customer invoices.

Example:

Buy a product having a cost of 9 being a storable product and having a perpetual valuation in FIFO.
Sell this product at a price of 10. The customer invoice's journal entries looks like:

Account                                     | Debit | Credit
---------------------------------------------------------------
200000 Product Sales                        |       | 10.0
---------------------------------------------------------------
101200 Account Receivable                   | 10.0  |
---------------------------------------------------------------

This method computes values used to make two additional journal items:

---------------------------------------------------------------
220000 Expenses                             | 9.0   |
---------------------------------------------------------------
101130 Stock Interim Account (Delivered)    |       | 9.0
---------------------------------------------------------------

Note: COGS are only generated for customer invoices except refund made to cancel an invoice.

:return: A list of Python dictionary to be passed to env['account.move.line'].create.</pre></details><ul id="m-button_cancel"><li>button_cancel(self) <span class="position">@ line 63</span></li></ul><ul id="m-button_draft"><li>button_draft(self) <span class="position">@ line 56</span></li></ul><ul id="m-copy_data"><li>copy_data(self, default) <span class="position">@ line 27</span></li></ul><h2>Inherited: odoo/addons/snailmail_account/models/account_move.py</h2><h3>Methods</h3><ul id="m-_get_pdf_and_send_invoice_vals"><li>_get_pdf_and_send_invoice_vals(self, template) <span class="position">@ line 10</span></li></ul><h2>Inherited: odoo/addons/sale_timesheet/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-timesheet_count">timesheet_count <span class="position">@ line 13</span></summary><pre>timesheet_count = fields.Integer("Number of timesheets", compute='_compute_timesheet_count', compute_sudo=True, export_string_translation=False)</pre></details><details><summary id="f-timesheet_encode_uom_id">timesheet_encode_uom_id <span class="position">@ line 14</span></summary><pre>timesheet_encode_uom_id = fields.Many2one('uom.uom', related='company_id.timesheet_encode_uom_id', export_string_translation=False)</pre></details><details><summary id="f-timesheet_ids">timesheet_ids <span class="position">@ line 12</span></summary><pre>timesheet_ids = fields.One2many('account.analytic.line', 'timesheet_invoice_id', string='Timesheets', readonly=True, copy=False, export_string_translation=False)</pre></details><details><summary id="f-timesheet_total_duration">timesheet_total_duration <span class="position">@ line 15</span></summary><pre>timesheet_total_duration = fields.Integer("Timesheet Total Duration",
        compute='_compute_timesheet_total_duration', compute_sudo=True,
        help="Total recorded duration, expressed in the encoding UoM, and rounded to the unit")</pre></details><h3>Methods</h3><details><summary id="m-_link_timesheets_to_invoice">_link_timesheets_to_invoice(self, start_date, end_date) <span class="position">@ line 65</span></summary><pre>Search timesheets from given period and link this timesheets to the invoice

When we create an invoice from a sale order, we need to
link the timesheets in this sale order to the invoice.
Then, we can know which timesheets are invoiced in the sale order.
:param start_date: the start date of the period
:param end_date: the end date of the period</pre></details><ul id="m-action_view_timesheet"><li>action_view_timesheet(self) <span class="position">@ line 40</span></li></ul><h2>Inherited: odoo/addons/sale_stock/models/account_move.py</h2><h3>Methods</h3><details><summary id="m-_get_invoiced_lot_values">_get_invoiced_lot_values(self) <span class="position">@ line 31</span></summary><pre>Get and prepare data to show a table of invoiced lot on the invoice's report.</pre></details><details><summary id="m-_stock_account_get_last_step_stock_moves">_stock_account_get_last_step_stock_moves(self) <span class="position">@ line 14</span></summary><pre>Overridden from stock_account.
Returns the stock moves associated to this invoice.</pre></details><h2>Inherited: odoo/addons/sale_expense/models/account_move_line.py</h2><h3>Methods</h3><ul id="m-_reverse_moves"><li>_reverse_moves(self, default_values_list, cancel) <span class="position">@ line 49</span></li></ul><ul id="m-button_draft"><li>button_draft(self) <span class="position">@ line 54</span></li></ul><h2>Inherited: odoo/addons/sale/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-campaign_id">campaign_id <span class="position">@ line 23</span></summary><pre>campaign_id = fields.Many2one(ondelete='set null')</pre></details><details><summary id="f-medium_id">medium_id <span class="position">@ line 24</span></summary><pre>medium_id = fields.Many2one(ondelete='set null')</pre></details><details><summary id="f-sale_order_count">sale_order_count <span class="position">@ line 26</span></summary><pre>sale_order_count = fields.Integer(compute="_compute_origin_so_count", string='Sale Order Count')</pre></details><details><summary id="f-source_id">source_id <span class="position">@ line 25</span></summary><pre>source_id = fields.Many2one(ondelete='set null')</pre></details><details><summary id="f-team_id">team_id <span class="position">@ line 16</span></summary><pre>team_id = fields.Many2one(
        'crm.team', string='Sales Team', default=_get_invoice_default_sale_team,
        compute='_compute_team_id', store=True, readonly=False,
        ondelete="set null", tracking=True,
        domain="['|', ('company_id', '=', False), ('company_id', '=', company_id)]")</pre></details><h3>Methods</h3><ul id="m-_action_invoice_ready_to_be_sent"><li>_action_invoice_ready_to_be_sent(self) <span class="position">@ line 122</span></li></ul><ul id="m-_get_partner_credit_warning_exclude_amount"><li>_get_partner_credit_warning_exclude_amount(self) <span class="position">@ line 168</span></li></ul><details><summary id="m-_get_sale_order_invoiced_amount">_get_sale_order_invoiced_amount(self, order) <span class="position">@ line 151</span></summary><pre>Consider all lines on any invoice in self that stem from the sales order `order`. (All those invoices belong to order.company_id)
This function returns the sum of the totals of all those lines.
Note that this amount may be bigger than `order.amount_total`.</pre></details><ul id="m-_invoice_paid_hook"><li>_invoice_paid_hook(self) <span class="position">@ line 110</span></li></ul><ul id="m-_is_downpayment"><li>_is_downpayment(self) <span class="position">@ line 146</span></li></ul><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 97</span></li></ul><ul id="m-_reverse_moves"><li>_reverse_moves(self, default_values_list, cancel) <span class="position">@ line 49</span></li></ul><ul id="m-action_post"><li>action_post(self) <span class="position">@ line 61</span></li></ul><ul id="m-action_view_source_sale_orders"><li>action_view_source_sale_orders(self) <span class="position">@ line 133</span></li></ul><ul id="m-button_cancel"><li>button_cancel(self) <span class="position">@ line 89</span></li></ul><ul id="m-button_draft"><li>button_draft(self) <span class="position">@ line 81</span></li></ul><ul id="m-unlink"><li>unlink(self) <span class="position">@ line 28</span></li></ul><h2>Inherited: odoo/addons/purchase_stock/models/account_invoice.py</h2><h3>Methods</h3><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 115</span></li></ul><details><summary id="m-_stock_account_get_last_step_stock_moves">_stock_account_get_last_step_stock_moves(self) <span class="position">@ line 151</span></summary><pre>Overridden from stock_account.
Returns the stock moves associated to this invoice.</pre></details><details><summary id="m-_stock_account_prepare_anglo_saxon_in_lines_vals">_stock_account_prepare_anglo_saxon_in_lines_vals(self) <span class="position">@ line 12</span></summary><pre>Prepare values used to create the journal items (account.move.line) corresponding to the price difference
lines for vendor bills. It only concerns the quantities that have been delivered before the bill
Example:
Buy a product having a cost of 9 and a supplier price of 10 and being a storable product and having a perpetual
valuation in FIFO. Deliver the product and then post the bill. The vendor bill's journal entries looks like:
Account                                     | Debit | Credit
---------------------------------------------------------------
101120 Stock Interim Account (Received)     | 10.0  |
---------------------------------------------------------------
101100 Account Payable                      |       | 10.0
---------------------------------------------------------------
This method computes values used to make two additional journal items:
---------------------------------------------------------------
101120 Stock Interim Account (Received)     |       | 1.0
---------------------------------------------------------------
xxxxxx Expenses                             | 1.0   |
---------------------------------------------------------------
:return: A list of Python dictionary to be passed to env['account.move.line'].create.</pre></details><h2>Inherited: odoo/addons/purchase/models/account_invoice.py</h2><h3>Fields</h3><details><summary id="f-purchase_id">purchase_id <span class="position">@ line 21</span></summary><pre>purchase_id = fields.Many2one('purchase.order', store=False, readonly=False,
        string='Purchase Order',
        help="Auto-complete from a past purchase order.")</pre></details><details><summary id="f-purchase_order_count">purchase_order_count <span class="position">@ line 24</span></summary><pre>purchase_order_count = fields.Integer(compute="_compute_origin_po_count", string='Purchase Order Count')</pre></details><details><summary id="f-purchase_vendor_bill_id">purchase_vendor_bill_id <span class="position">@ line 18</span></summary><pre>purchase_vendor_bill_id = fields.Many2one('purchase.bill.union', store=False, readonly=False,
        string='Auto-complete',
        help="Auto-complete from a past bill / purchase order.")</pre></details><h3>Methods</h3><details><summary id="m-_find_and_set_purchase_orders">_find_and_set_purchase_orders(self, po_references, partner_id, amount_total, from_ocr, timeout) <span class="position">@ line 397</span></summary><pre>Finds related purchase orders that (partially) match the vendor bill and links the matching lines on this
vendor bill.

:param po_references: a list of potential purchase order references/names
:param partner_id: the vendor id matched on the vendor bill
:param amount_total: the total amount of the vendor bill
:param from_ocr: indicates whether this vendor bill was created from an OCR scan (less reliable)
:param timeout: the max time the line matching algorithm can take before timing out</pre></details><details><summary id="m-_find_matching_po_and_inv_lines">_find_matching_po_and_inv_lines(self, po_lines, inv_lines, timeout) <span class="position">@ line 211</span></summary><pre>Finds purchase order lines that match some of the invoice lines.

We try to find a purchase order line for every invoice line matching on the unit price and having at least
the same quantity to invoice.

:param po_lines: list of purchase order lines that can be matched
:param inv_lines: list of invoice lines to be matched
:param timeout: how long this function can run before we consider it too long
:return: a tuple (list, list) containing:
* matched 'purchase.order.line'
* tuple of purchase order line ids and their matched 'account.move.line'</pre></details><details><summary id="m-_find_matching_subset_po_lines">_find_matching_subset_po_lines(self, po_lines_with_amount, goal_total, timeout) <span class="position">@ line 161</span></summary><pre>Finds the purchase order lines adding up to the goal amount.

The problem of finding the subset of `po_lines_with_amount` which sums up to `goal_total` reduces to
the 0-1 Knapsack problem. The dynamic programming approach to solve this problem is most of the time slower
than this because identical sub-problems don't arise often enough. It returns the list of purchase order lines
which sum up to `goal_total` or an empty list if multiple or no solutions were found.

:param po_lines_with_amount: a dict (str: float|recordset) containing:
* line: an `purchase.order.line`
* amount_to_invoice: the remaining amount to be invoiced of the line
:param goal_total: the total amount to match with a subset of purchase order lines
:param timeout: the max time the line matching algorithm can take before timing out
:return: list of `purchase.order.line` whose remaining sum matches `goal_total`</pre></details><ul id="m-_get_invoice_reference"><li>_get_invoice_reference(self) <span class="position">@ line 26</span></li></ul><details><summary id="m-_match_purchase_orders">_match_purchase_orders(self, po_references, partner_id, amount_total, from_ocr, timeout) <span class="position">@ line 296</span></summary><pre>Tries to match open purchase order lines with this invoice given the information we have.

:param po_references: a list of potential purchase order references/names
:param partner_id: the vendor id inferred from the vendor bill
:param amount_total: the total amount of the vendor bill
:param from_ocr: indicates whether this vendor bill was created from an OCR scan (less reliable)
:param timeout: the max time the line matching algorithm can take before timing out
:return: tuple (str, recordset, dict) containing:
* the match method:
* `total_match`: purchase order reference(s) and total amounts match perfectly
* `subset_total_match`: a subset of the referenced purchase orders' lines matches the total amount of
this invoice (OCR only)
* `po_match`: only the purchase order reference matches (OCR only)
* `subset_match`: a subset of the referenced purchase orders' lines matches a subset of the invoice
lines based on unit prices (EDI only)
* `no_match`: no result found
* recordset of `purchase.order.line` containing purchase order lines matched with an invoice line
* list of tuple containing every `purchase.order.line` id and its related `account.move.line`</pre></details><details><summary id="m-_set_purchase_orders">_set_purchase_orders(self, purchase_orders, force_write) <span class="position">@ line 278</span></summary><pre>Link the given purchase orders to this vendor bill and add their lines as invoice lines.

:param purchase_orders: a list of purchase orders to be linked to this vendor bill
:param force_write: whether to delete all existing invoice lines before adding the vendor bill lines</pre></details><ul id="m-action_view_source_purchase_orders"><li>action_view_source_purchase_orders(self) <span class="position">@ line 118</span></li></ul><ul id="m-write"><li>write(self, vals) <span class="position">@ line 146</span></li></ul><h2>Inherited: odoo/addons/product_email_template/models/account_move.py</h2><h3>Methods</h3><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 28</span></li></ul><ul id="m-invoice_validate_send_email"><li>invoice_validate_send_email(self) <span class="position">@ line 9</span></li></ul><h2>Inherited: odoo/addons/point_of_sale/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-pos_order_ids">pos_order_ids <span class="position">@ line 10</span></summary><pre>pos_order_ids = fields.One2many('pos.order', 'account_move')</pre></details><details><summary id="f-pos_payment_ids">pos_payment_ids <span class="position">@ line 11</span></summary><pre>pos_payment_ids = fields.One2many('pos.payment', 'account_move_id')</pre></details><details><summary id="f-pos_refunded_invoice_ids">pos_refunded_invoice_ids <span class="position">@ line 12</span></summary><pre>pos_refunded_invoice_ids = fields.Many2many('account.move', 'refunded_invoices', 'refund_account_move', 'original_account_move')</pre></details><details><summary id="f-reversed_pos_order_id">reversed_pos_order_id <span class="position">@ line 13</span></summary><pre>reversed_pos_order_id = fields.Many2one('pos.order', string="Reversed POS Order",
        help="The pos order that was reverted after closing the session to create an invoice for it.")</pre></details><h3>Methods</h3><ul id="m-_compute_amount"><li>_compute_amount(self) <span class="position">@ line 64</span></li></ul><details><summary id="m-_compute_payments_widget_reconciled_info">_compute_payments_widget_reconciled_info(self) <span class="position">@ line 50</span></summary><pre>Add pos_payment_name field in the reconciled vals to be able to show the payment method in the invoice.</pre></details><ul id="m-_get_invoiced_lot_values"><li>_get_invoiced_lot_values(self) <span class="position">@ line 25</span></li></ul><ul id="m-_stock_account_get_last_step_stock_moves"><li>_stock_account_get_last_step_stock_moves(self) <span class="position">@ line 16</span></li></ul><h2>Inherited: odoo/addons/membership/models/account_move.py</h2><h3>Methods</h3><ul id="m-button_cancel"><li>button_cancel(self) <span class="position">@ line 22</span></li></ul><ul id="m-button_draft"><li>button_draft(self) <span class="position">@ line 12</span></li></ul><ul id="m-write"><li>write(self, vals) <span class="position">@ line 32</span></li></ul><h2>Inherited: odoo/addons/l10n_zm_account/models/account_move.py</h2><h3>Methods</h3><ul id="m-_get_name_invoice_report"><li>_get_name_invoice_report(self) <span class="position">@ line 8</span></li></ul><h2>Inherited: odoo/addons/l10n_uy/models/account_move.py</h2><h3>Methods</h3><ul id="m-_get_last_sequence_domain"><li>_get_last_sequence_domain(self, relaxed) <span class="position">@ line 19</span></li></ul><details><summary id="m-_get_starting_sequence">_get_starting_sequence(self) <span class="position">@ line 9</span></summary><pre>If use documents then will create a new starting sequence using the document type code prefix and the
journal document number with a 8 padding number</pre></details><ul id="m-_l10n_uy_get_formatted_sequence"><li>_l10n_uy_get_formatted_sequence(self, number) <span class="position">@ line 16</span></li></ul><h2>Inherited: odoo/addons/l10n_th/models/account_move.py</h2><h3>Methods</h3><ul id="m-_get_name_invoice_report"><li>_get_name_invoice_report(self) <span class="position">@ line 6</span></li></ul><h2>Inherited: odoo/addons/l10n_sk/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-taxable_supply_date">taxable_supply_date <span class="position">@ line 8</span></summary><pre>taxable_supply_date = fields.Date()</pre></details><h2>Inherited: odoo/addons/l10n_sg/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_sg_permit_number">l10n_sg_permit_number <span class="position">@ line 9</span></summary><pre>l10n_sg_permit_number = fields.Char(string="Permit No.")</pre></details><details><summary id="f-l10n_sg_permit_number_date">l10n_sg_permit_number_date <span class="position">@ line 11</span></summary><pre>l10n_sg_permit_number_date = fields.Date(string="Date of permit number")</pre></details><h2>Inherited: odoo/addons/l10n_se/models/account_move.py</h2><h3>Methods</h3><ul id="m-_get_invoice_reference_se_ocr2"><li>_get_invoice_reference_se_ocr2(self, reference) <span class="position">@ line 12</span></li></ul><ul id="m-_get_invoice_reference_se_ocr2_invoice"><li>_get_invoice_reference_se_ocr2_invoice(self) <span class="position">@ line 33</span></li></ul><ul id="m-_get_invoice_reference_se_ocr2_partner"><li>_get_invoice_reference_se_ocr2_partner(self) <span class="position">@ line 45</span></li></ul><ul id="m-_get_invoice_reference_se_ocr3"><li>_get_invoice_reference_se_ocr3(self, reference) <span class="position">@ line 16</span></li></ul><ul id="m-_get_invoice_reference_se_ocr3_invoice"><li>_get_invoice_reference_se_ocr3_invoice(self) <span class="position">@ line 37</span></li></ul><ul id="m-_get_invoice_reference_se_ocr3_partner"><li>_get_invoice_reference_se_ocr3_partner(self) <span class="position">@ line 49</span></li></ul><ul id="m-_get_invoice_reference_se_ocr4"><li>_get_invoice_reference_se_ocr4(self, reference) <span class="position">@ line 21</span></li></ul><ul id="m-_get_invoice_reference_se_ocr4_invoice"><li>_get_invoice_reference_se_ocr4_invoice(self) <span class="position">@ line 41</span></li></ul><ul id="m-_get_invoice_reference_se_ocr4_partner"><li>_get_invoice_reference_se_ocr4_partner(self) <span class="position">@ line 53</span></li></ul><h2>Inherited: odoo/addons/l10n_sa_edi/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_sa_chain_index">l10n_sa_chain_index <span class="position">@ line 21</span></summary><pre>l10n_sa_chain_index = fields.Integer(
        string="ZATCA chain index", copy=False, readonly=True,
        help="Invoice index in chain, set if and only if an in-chain XML was submitted and did not error",
    )</pre></details><details><summary id="f-l10n_sa_invoice_signature">l10n_sa_invoice_signature <span class="position">@ line 19</span></summary><pre>l10n_sa_invoice_signature = fields.Char("Unsigned XML Signature", copy=False)</pre></details><details><summary id="f-l10n_sa_uuid">l10n_sa_uuid <span class="position">@ line 17</span></summary><pre>l10n_sa_uuid = fields.Char(string='Document UUID (SA)', copy=False, help="Universally unique identifier of the Invoice")</pre></details><h3>Methods</h3><details><summary id="m-_l10n_sa_check_refund_reason">_l10n_sa_check_refund_reason(self) <span class="position">@ line 71</span></summary><pre>Make sure credit/debit notes have a valid reason and reversal reference</pre></details><details><summary id="m-_l10n_sa_generate_unsigned_data">_l10n_sa_generate_unsigned_data(self) <span class="position">@ line 149</span></summary><pre>Generate UUID and digital signature to be used during both Signing and QR code generation.
It is necessary to save the signature as it changes everytime it is generated and both the signing and the
QR code expect to have the same, identical signature.</pre></details><details><summary id="m-_l10n_sa_get_qr_code_encoding">_l10n_sa_get_qr_code_encoding(self, tag, field, int_length) <span class="position">@ line 63</span></summary><pre>Helper function to encode strings for the QR code generation according to ZATCA specs</pre></details><details><summary id="m-_l10n_sa_is_in_chain">_l10n_sa_is_in_chain(self) <span class="position">@ line 205</span></summary><pre>If the invoice was successfully posted and confirmed by the government, then this would return True.
If the invoice timed out, then its edi_document should still be in the 'to_send' state.</pre></details><details><summary id="m-_l10n_sa_is_simplified">_l10n_sa_is_simplified(self) <span class="position">@ line 26</span></summary><pre>Returns True if the customer is an individual, i.e: The invoice is B2C
:return:</pre></details><details><summary id="m-_l10n_sa_log_results">_l10n_sa_log_results(self, xml_content, response_data, error) <span class="position">@ line 168</span></summary><pre>Save submitted invoice XML hash in case of either Rejection or Acceptance.</pre></details><h2>Inherited: odoo/addons/l10n_sa/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_sa_confirmation_datetime">l10n_sa_confirmation_datetime <span class="position">@ line 14</span></summary><pre>l10n_sa_confirmation_datetime = fields.Datetime(string='Confirmation Date', readonly=True, copy=False)</pre></details><details><summary id="f-l10n_sa_qr_code_str">l10n_sa_qr_code_str <span class="position">@ line 13</span></summary><pre>l10n_sa_qr_code_str = fields.Char(string='Zatka QR Code', compute='_compute_qr_code_str')</pre></details><h3>Methods</h3><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 49</span></li></ul><h2>Inherited: odoo/addons/l10n_rs/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_rs_turnover_date">l10n_rs_turnover_date <span class="position">@ line 10</span></summary><pre>l10n_rs_turnover_date = fields.Date(string='Turnover Date')</pre></details><h2>Inherited: odoo/addons/l10n_pl/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_pl_vat_b_mpv_prowizja">l10n_pl_vat_b_mpv_prowizja <span class="position">@ line 15</span></summary><pre>l10n_pl_vat_b_mpv_prowizja = fields.Boolean(
        string='B_MPV_Prowizja',
        help="Supply of agency and other services pertaining to the transfer of a single-purpose voucher",
    )</pre></details><details><summary id="f-l10n_pl_vat_b_spv">l10n_pl_vat_b_spv <span class="position">@ line 7</span></summary><pre>l10n_pl_vat_b_spv = fields.Boolean(
        string='B_SPV',
        help="Transfer of a single-purpose voucher effected by a taxable person acting on his/its own behalf",
    )</pre></details><details><summary id="f-l10n_pl_vat_b_spv_dostawa">l10n_pl_vat_b_spv_dostawa <span class="position">@ line 11</span></summary><pre>l10n_pl_vat_b_spv_dostawa = fields.Boolean(
        string='B_SPV_Dostawa',
        help="Supply of goods and/or services covered by a single-purpose voucher to a taxpayer",
    )</pre></details><h2>Inherited: odoo/addons/l10n_ph/models/account_move.py</h2><h3>Methods</h3><ul id="m-action_open_l10n_ph_2307_wizard"><li>action_open_l10n_ph_2307_wizard(self) <span class="position">@ line 10</span></li></ul><h2>Inherited: odoo/addons/l10n_pe/models/account_move.py</h2><h3>Methods</h3><ul id="m-_get_l10n_latam_documents_domain"><li>_get_l10n_latam_documents_domain(self) <span class="position">@ line 9</span></li></ul><h2>Inherited: odoo/addons/l10n_no/models/account_move.py</h2><h3>Methods</h3><details><summary id="m-_get_invoice_reference_no_invoice">_get_invoice_reference_no_invoice(self) <span class="position">@ line 11</span></summary><pre>This computes the reference based on the Odoo format.
We calculat reference using invoice number and
partner id and added control digit at last.</pre></details><details><summary id="m-_get_invoice_reference_no_partner">_get_invoice_reference_no_partner(self) <span class="position">@ line 18</span></summary><pre>This computes the reference based on the Odoo format.
We calculat reference using invoice number and
partner id and added control digit at last.</pre></details><ul id="m-_get_kid_number"><li>_get_kid_number(self) <span class="position">@ line 25</span></li></ul><h2>Inherited: odoo/addons/l10n_mu_account/models/account_move.py</h2><h3>Methods</h3><ul id="m-_get_name_invoice_report"><li>_get_name_invoice_report(self) <span class="position">@ line 7</span></li></ul><h2>Inherited: odoo/addons/l10n_latam_invoice_document/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_latam_available_document_type_ids">l10n_latam_available_document_type_ids <span class="position">@ line 65</span></summary><pre>l10n_latam_available_document_type_ids = fields.Many2many('l10n_latam.document.type', compute='_compute_l10n_latam_available_document_types')</pre></details><details><summary id="f-l10n_latam_document_number">l10n_latam_document_number <span class="position">@ line 68</span></summary><pre>l10n_latam_document_number = fields.Char(
        compute='_compute_l10n_latam_document_number', inverse='_inverse_l10n_latam_document_number',
        string='Document Number', readonly=False)</pre></details><details><summary id="f-l10n_latam_document_type_id">l10n_latam_document_type_id <span class="position">@ line 66</span></summary><pre>l10n_latam_document_type_id = fields.Many2one(
        'l10n_latam.document.type', string='Document Type', readonly=False, auto_join=True, index='btree_not_null', compute='_compute_l10n_latam_document_type', store=True)</pre></details><details><summary id="f-l10n_latam_document_type_id_code">l10n_latam_document_type_id_code <span class="position">@ line 73</span></summary><pre>l10n_latam_document_type_id_code = fields.Char(related='l10n_latam_document_type_id.code', string='Doc Type')</pre></details><details><summary id="f-l10n_latam_manual_document_number">l10n_latam_manual_document_number <span class="position">@ line 72</span></summary><pre>l10n_latam_manual_document_number = fields.Boolean(compute='_compute_l10n_latam_manual_document_number', string='Manual Number')</pre></details><details><summary id="f-l10n_latam_use_documents">l10n_latam_use_documents <span class="position">@ line 71</span></summary><pre>l10n_latam_use_documents = fields.Boolean(related='journal_id.l10n_latam_use_documents')</pre></details><h3>Methods</h3><ul id="m-_auto_init"><li>_auto_init(self) <span class="position">@ line 20</span></li></ul><ul id="m-_compute_made_sequence_hole"><li>_compute_made_sequence_hole(self) <span class="position">@ line 219</span></li></ul><ul id="m-_get_l10n_latam_documents_domain"><li>_get_l10n_latam_documents_domain(self) <span class="position">@ line 194</span></li></ul><ul id="m-_get_starting_sequence"><li>_get_starting_sequence(self) <span class="position">@ line 148</span></li></ul><ul id="m-_is_manual_document_number"><li>_is_manual_document_number(self) <span class="position">@ line 102</span></li></ul><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 157</span></li></ul><h2>Inherited: odoo/addons/l10n_ke_edi_tremol/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_ke_cu_datetime">l10n_ke_cu_datetime <span class="position">@ line 16</span></summary><pre>l10n_ke_cu_datetime = fields.Datetime(string='CU Signing Date and Time', copy=False)</pre></details><details><summary id="f-l10n_ke_cu_invoice_number">l10n_ke_cu_invoice_number <span class="position">@ line 18</span></summary><pre>l10n_ke_cu_invoice_number = fields.Char(string='CU Invoice Number', copy=False)</pre></details><details><summary id="f-l10n_ke_cu_qrcode">l10n_ke_cu_qrcode <span class="position">@ line 19</span></summary><pre>l10n_ke_cu_qrcode = fields.Char(string='CU QR Code', copy=False)</pre></details><details><summary id="f-l10n_ke_cu_serial_number">l10n_ke_cu_serial_number <span class="position">@ line 17</span></summary><pre>l10n_ke_cu_serial_number = fields.Char(string='CU Serial Number', copy=False)</pre></details><h3>Methods</h3><details><summary id="m-_l10n_ke_cu_lines_messages">_l10n_ke_cu_lines_messages(self) <span class="position">@ line 126</span></summary><pre>Serialise the data of each line on the invoice

This function transforms the lines in order to handle the differences
between the KRA expected data and the lines in odoo.

If a discount line (as a negative line) has been added to the invoice
lines, find a suitable line/lines to distribute the discount accross

:returns: List of byte-strings representing each command <CMD> and the
<DATA> of the line, which will be sent to the fiscal device
in order to add a line to the opened invoice.</pre></details><details><summary id="m-_l10n_ke_cu_open_invoice_message">_l10n_ke_cu_open_invoice_message(self) <span class="position">@ line 97</span></summary><pre>Serialise the required fields for opening an invoice

:returns: a list containing one byte-string representing the <CMD> and
<DATA> of the message sent to the fiscal device.</pre></details><ul id="m-_l10n_ke_fiscal_device_details_filled"><li>_l10n_ke_fiscal_device_details_filled(self) <span class="position">@ line 83</span></li></ul><details><summary id="m-_l10n_ke_fmt">_l10n_ke_fmt(self, string, length, ljust) <span class="position">@ line 25</span></summary><pre>Function for common formatting behaviour

:param string: string to be formatted/encoded
:param length: integer length to justify (if enabled), and then truncate the string to
:param ljust:  boolean representing whether the string should be justified
:returns:      byte-string justified/truncated, with all non-alphanumeric characters removed</pre></details><details><summary id="m-_l10n_ke_get_cu_messages">_l10n_ke_get_cu_messages(self) <span class="position">@ line 213</span></summary><pre>Composes a list of all the command and data parts of the messages
required for the fiscal device to open an invoice, add lines and
subsequently close it.</pre></details><details><summary id="m-_l10n_ke_validate_move">_l10n_ke_validate_move(self) <span class="position">@ line 41</span></summary><pre>Returns list of errors related to misconfigurations per move

Find misconfigurations on the move, the lines of the move, and the
taxes on those lines that would result in rejection by the KRA.</pre></details><details><summary id="m-l10n_ke_action_cu_post">l10n_ke_action_cu_post(self) <span class="position">@ line 231</span></summary><pre>Returns the client action descriptor dictionary for sending the
invoice(s) to the control unit (the fiscal device).</pre></details><details><summary id="m-l10n_ke_cu_responses">l10n_ke_cu_responses(self, responses) <span class="position">@ line 257</span></summary><pre>Set the fields related to the fiscal device on the invoice.

This is intended to be utilized by an RPC call from the javascript
client action. The fields are prefixed with l10n_ke_cu_*, which refers
to the fact that they originate from the control unit.</pre></details><h2>Inherited: odoo/addons/l10n_it_stock_ddt/models/account_invoice.py</h2><h3>Fields</h3><details><summary id="f-l10n_it_ddt_count">l10n_it_ddt_count <span class="position">@ line 12</span></summary><pre>l10n_it_ddt_count = fields.Integer(compute="_compute_ddt_ids")</pre></details><details><summary id="f-l10n_it_ddt_ids">l10n_it_ddt_ids <span class="position">@ line 11</span></summary><pre>l10n_it_ddt_ids = fields.Many2many('stock.picking', compute="_compute_ddt_ids")</pre></details><h3>Methods</h3><details><summary id="m-_get_ddt_values">_get_ddt_values(self) <span class="position">@ line 36</span></summary><pre>We calculate the link between the invoice lines and the deliveries related to the invoice through the
links with the sale order(s).  We assume that the first picking was invoiced first. (FIFO)
:return: a dictionary with as key the picking and value the invoice line numbers (by counting)</pre></details><details><summary id="m-_l10n_it_edi_document_type_mapping">_l10n_it_edi_document_type_mapping(self) <span class="position">@ line 14</span></summary><pre>Deferred invoices (not direct) require TD24 FatturaPA Document Type.</pre></details><ul id="m-_l10n_it_edi_features_for_document_type_selection"><li>_l10n_it_edi_features_for_document_type_selection(self) <span class="position">@ line 31</span></li></ul><ul id="m-_l10n_it_edi_get_values"><li>_l10n_it_edi_get_values(self, pdf_values) <span class="position">@ line 105</span></li></ul><details><summary id="m-_l10n_it_edi_invoice_is_direct">_l10n_it_edi_invoice_is_direct(self) <span class="position">@ line 24</span></summary><pre>An invoice is only direct if the Transport Documents are all done the same day as the invoice.</pre></details><ul id="m-get_linked_ddts"><li>get_linked_ddts(self) <span class="position">@ line 95</span></li></ul><h2>Inherited: odoo/addons/l10n_it_edi_withholding/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_it_amount_before_withholding_signed">l10n_it_amount_before_withholding_signed <span class="position">@ line 18</span></summary><pre>l10n_it_amount_before_withholding_signed = fields.Monetary(string='Total Before Withholding', compute='_compute_amount_extended')</pre></details><details><summary id="f-l10n_it_amount_pension_fund_signed">l10n_it_amount_pension_fund_signed <span class="position">@ line 16</span></summary><pre>l10n_it_amount_pension_fund_signed = fields.Monetary(string='Pension Fund', compute='_compute_amount_extended')</pre></details><details><summary id="f-l10n_it_amount_vat_signed">l10n_it_amount_vat_signed <span class="position">@ line 15</span></summary><pre>l10n_it_amount_vat_signed = fields.Monetary(string='VAT', compute='_compute_amount_extended')</pre></details><details><summary id="f-l10n_it_amount_withholding_signed">l10n_it_amount_withholding_signed <span class="position">@ line 17</span></summary><pre>l10n_it_amount_withholding_signed = fields.Monetary(string='Withholding', compute='_compute_amount_extended')</pre></details><h3>Methods</h3><details><summary id="m-_l10n_it_edi_export_taxes_data_check">_l10n_it_edi_export_taxes_data_check(self) <span class="position">@ line 101</span></summary><pre>Override to also allow pension_fund, withholding taxes.
Needs not to call super, because super checks for one tax only per line.</pre></details><details><summary id="m-_l10n_it_edi_filter_tax_details">_l10n_it_edi_filter_tax_details(self, line, tax_values) <span class="position">@ line 33</span></summary><pre>Filters tax details to only include the positive amounted lines regarding VAT taxes.</pre></details><ul id="m-_l10n_it_edi_get_extra_info"><li>_l10n_it_edi_get_extra_info(self, company, document_type, body_tree, incoming) <span class="position">@ line 129</span></li></ul><details><summary id="m-_l10n_it_edi_get_values">_l10n_it_edi_get_values(self, pdf_values) <span class="position">@ line 39</span></summary><pre>Add withholding and pension_fund features.</pre></details><ul id="m-_l10n_it_edi_import_line"><li>_l10n_it_edi_import_line(self, element, move_line_form, extra_info) <span class="position">@ line 185</span></li></ul><details><summary id="m-_l10n_it_edi_search_tax_for_import">_l10n_it_edi_search_tax_for_import(self, company, percentage, extra_domain, vat_only, l10n_it_exempt_reason) <span class="position">@ line 121</span></summary><pre>In case no withholding_type or pension_fund is specified, exclude taxes that have it.
It means that we're searching for VAT taxes, especially in the base l10n_it_edi module</pre></details><h2>Inherited: odoo/addons/l10n_it_edi/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_it_cig">l10n_it_cig <span class="position">@ line 100</span></summary><pre>l10n_it_cig = fields.Char(
        string="CIG",
        copy=False,
        help="Tender Unique Identifier")</pre></details><details><summary id="f-l10n_it_cup">l10n_it_cup <span class="position">@ line 104</span></summary><pre>l10n_it_cup = fields.Char(
        string="CUP",
        copy=False,
        help="Public Investment Unique Identifier")</pre></details><details><summary id="f-l10n_it_ddt_id">l10n_it_ddt_id <span class="position">@ line 88</span></summary><pre>l10n_it_ddt_id = fields.Many2one('l10n_it.ddt', string='DDT', copy=False)</pre></details><details><summary id="f-l10n_it_edi_attachment_file">l10n_it_edi_attachment_file <span class="position">@ line 79</span></summary><pre>l10n_it_edi_attachment_file = fields.Binary(copy=False, attachment=True)</pre></details><details><summary id="f-l10n_it_edi_attachment_id">l10n_it_edi_attachment_id <span class="position">@ line 80</span></summary><pre>l10n_it_edi_attachment_id = fields.Many2one(
        comodel_name='ir.attachment',
        string="FatturaPA Attachment",
        compute=lambda self: self._compute_linked_attachment_id('l10n_it_edi_attachment_id', 'l10n_it_edi_attachment_file'),
        depends=['l10n_it_edi_attachment_file'],
    )</pre></details><details><summary id="f-l10n_it_edi_header">l10n_it_edi_header <span class="position">@ line 73</span></summary><pre>l10n_it_edi_header = fields.Html(
        help='User description of the current state, with hints to make the flow progress',
        readonly=True,
        copy=False,
    )</pre></details><details><summary id="f-l10n_it_edi_is_self_invoice">l10n_it_edi_is_self_invoice <span class="position">@ line 86</span></summary><pre>l10n_it_edi_is_self_invoice = fields.Boolean(compute="_compute_l10n_it_edi_is_self_invoice")</pre></details><details><summary id="f-l10n_it_edi_state">l10n_it_edi_state <span class="position">@ line 56</span></summary><pre>l10n_it_edi_state = fields.Selection(
        string="SDI State",
        selection=[
            ('being_sent', 'Being Sent To SdI'),
            ('requires_user_signature', 'Requires user signature'),
            ('processing', 'SdI Processing'),
            ('rejected', 'SdI Rejected'),
            ('forwarded', 'SdI Accepted, Forwarded to Partner'),
            ('forward_failed', 'SdI Accepted, Forward to Partner Failed'),
            ('forward_attempt', 'SdI Accepted, Forwarding to Partner'),
            ('accepted_by_pa_partner', 'SdI Accepted, Accepted by the PA Partner'),
            ('rejected_by_pa_partner', 'SdI Accepted, Rejected by the PA Partner'),
            ('accepted_by_pa_partner_after_expiry', 'SdI Accepted, PA Partner Expired Terms'),
        ],
        copy=False, tracking=True,
        help="This state is updated by default, but you can force the value. ",
    )</pre></details><details><summary id="f-l10n_it_edi_transaction">l10n_it_edi_transaction <span class="position">@ line 78</span></summary><pre>l10n_it_edi_transaction = fields.Char(copy=False, string="FatturaPA Transaction")</pre></details><details><summary id="f-l10n_it_origin_document_date">l10n_it_origin_document_date <span class="position">@ line 97</span></summary><pre>l10n_it_origin_document_date = fields.Date(
        string="Origin Document Date",
        copy=False)</pre></details><details><summary id="f-l10n_it_origin_document_name">l10n_it_origin_document_name <span class="position">@ line 94</span></summary><pre>l10n_it_origin_document_name = fields.Char(
        string="Origin Document Name",
        copy=False)</pre></details><details><summary id="f-l10n_it_origin_document_type">l10n_it_origin_document_type <span class="position">@ line 90</span></summary><pre>l10n_it_origin_document_type = fields.Selection(
        string="Origin Document Type",
        selection=[('purchase_order', 'Purchase Order'), ('contract', 'Contract'), ('agreement', 'Agreement')],
        copy=False)</pre></details><details><summary id="f-l10n_it_partner_pa">l10n_it_partner_pa <span class="position">@ line 109</span></summary><pre>l10n_it_partner_pa = fields.Boolean(compute='_compute_l10n_it_partner_pa')</pre></details><details><summary id="f-l10n_it_stamp_duty">l10n_it_stamp_duty <span class="position">@ line 87</span></summary><pre>l10n_it_stamp_duty = fields.Float(default=0, string="Dati Bollo")</pre></details><h3>Methods</h3><ul id="m-_compose_info_message"><li>_compose_info_message(self, tree, tags) <span class="position">@ line 1121</span></li></ul><ul id="m-_extend_with_attachments"><li>_extend_with_attachments(self, attachments, new) <span class="position">@ line 179</span></li></ul><ul id="m-_get_edi_decoder"><li>_get_edi_decoder(self, file_data, new) <span class="position">@ line 168</span></li></ul><ul id="m-_get_l10n_it_amount_split_payment"><li>_get_l10n_it_amount_split_payment(self) <span class="position">@ line 329</span></li></ul><ul id="m-_l10n_it_edi_base_export_check"><li>_l10n_it_edi_base_export_check(self) <span class="position">@ line 1156</span></li></ul><details><summary id="m-_l10n_it_edi_create_move_with_attachment">_l10n_it_edi_create_move_with_attachment(self, filename, content, key, proxy_user) <span class="position">@ line 700</span></summary><pre>Creates a move and save an incoming file from the SdI as its attachment.

:param filename:       name of the file to be saved.
:param content:        encrypted content of the file to be saved.
:param key:            key to decrypt the file.
:param proxy_user:     the AccountEdiProxyClientUser to use for decrypting the file</pre></details><details><summary id="m-_l10n_it_edi_document_type_mapping">_l10n_it_edi_document_type_mapping(self) <span class="position">@ line 504</span></summary><pre>Returns a dictionary with the required features for every TDxx FatturaPA document type</pre></details><details><summary id="m-_l10n_it_edi_download_invoices">_l10n_it_edi_download_invoices(self, proxy_user) <span class="position">@ line 635</span></summary><pre>Check the proxy for incoming invoices for a specified proxy user.
:return: True if there remain some invoices on the server to be downloaded, False otherwise.</pre></details><ul id="m-_l10n_it_edi_exempt_reason_tag_mapping"><li>_l10n_it_edi_exempt_reason_tag_mapping(self) <span class="position">@ line 143</span></li></ul><details><summary id="m-_l10n_it_edi_export_data_check">_l10n_it_edi_export_data_check(self) <span class="position">@ line 1132</span></summary><pre>This function checks the Settings, Company, Partners, Moves involved in the
sending activity and returns an errors dictionary ready for the
actionable_errors widget to display.</pre></details><ul id="m-_l10n_it_edi_export_taxes_check"><li>_l10n_it_edi_export_taxes_check(self) <span class="position">@ line 1180</span></li></ul><details><summary id="m-_l10n_it_edi_features_for_document_type_selection">_l10n_it_edi_features_for_document_type_selection(self) <span class="position">@ line 487</span></summary><pre>Returns a dictionary of features to be compared with the TDxx FatturaPA
document type requirements.</pre></details><details><summary id="m-_l10n_it_edi_filter_tax_details">_l10n_it_edi_filter_tax_details(self, line, tax_values) <span class="position">@ line 324</span></summary><pre>Filters tax details to only include the positive amounted lines regarding VAT taxes.</pre></details><ul id="m-_l10n_it_edi_format_errors"><li>_l10n_it_edi_format_errors(self, header, errors) <span class="position">@ line 1115</span></li></ul><details><summary id="m-_l10n_it_edi_generate_filename">_l10n_it_edi_generate_filename(self) <span class="position">@ line 1282</span></summary><pre>Returns a name conform to the Fattura pa Specifications:
See ES documentation 2.2</pre></details><ul id="m-_l10n_it_edi_get_attachment_values"><li>_l10n_it_edi_get_attachment_values(self, pdf_values) <span class="position">@ line 1268</span></li></ul><details><summary id="m-_l10n_it_edi_get_document_type">_l10n_it_edi_get_document_type(self) <span class="position">@ line 566</span></summary><pre>Compare the features of the invoice to the requirements of each Document Type (TDxx)
FatturaPA until you find a valid one.</pre></details><details><summary id="m-_l10n_it_edi_get_extra_info">_l10n_it_edi_get_extra_info(self, company, document_type, body_tree, incoming) <span class="position">@ line 779</span></summary><pre>This function is meant to collect other information that has to be inserted on the invoice lines by submodules.
:return extra_info, messages_to_log</pre></details><ul id="m-_l10n_it_edi_get_formatters"><li>_l10n_it_edi_get_formatters(self) <span class="position">@ line 1195</span></li></ul><details><summary id="m-_l10n_it_edi_get_line_values">_l10n_it_edi_get_line_values(self, reverse_charge_refund, is_downpayment, convert_to_euros) <span class="position">@ line 240</span></summary><pre>Returns a list of dictionaries passed to the template for the invoice lines (DettaglioLinee)</pre></details><details><summary id="m-_l10n_it_edi_get_message">_l10n_it_edi_get_message(self, transformed_notification) <span class="position">@ line 1542</span></summary><pre>The status change will be notified in the chatter of the move.
Compute the message from the notification information coming from the EDI Proxy Server</pre></details><details><summary id="m-_l10n_it_edi_get_tax_values">_l10n_it_edi_get_tax_values(self, tax_details) <span class="position">@ line 288</span></summary><pre>Returns a list of dictionaries passed to the template for the invoice lines (DatiRiepilogo)</pre></details><ul id="m-_l10n_it_edi_get_values"><li>_l10n_it_edi_get_values(self, pdf_values) <span class="position">@ line 338</span></li></ul><details><summary id="m-_l10n_it_edi_goods_in_italy">_l10n_it_edi_goods_in_italy(self) <span class="position">@ line 449</span></summary><pre>There is a specific TipoDocumento (Document Type TD19) and tax grid (VJ3) for goods
that are phisically in Italy but are in a VAT deposit, meaning that the goods
have not passed customs.</pre></details><details><summary id="m-_l10n_it_edi_import_invoice">_l10n_it_edi_import_invoice(self, invoice, data, is_new) <span class="position">@ line 787</span></summary><pre>Decodes a l10n_it_edi move into an Odoo move.

:param data:   the dictionary with the content to be imported
keys: 'filename', 'content', 'xml_tree', 'type', 'sort_weight'
:param is_new: whether the move is newly created or to be updated
:returns:      the imported move</pre></details><ul id="m-_l10n_it_edi_import_line"><li>_l10n_it_edi_import_line(self, element, move_line, extra_info) <span class="position">@ line 1013</span></li></ul><details><summary id="m-_l10n_it_edi_is_simplified">_l10n_it_edi_is_simplified(self) <span class="position">@ line 464</span></summary><pre>Simplified Invoices are a way for the invoice issuer to create an invoice with limited data.
Example: a consultant goes to the restaurant and wants the invoice instead of the receipt,
to be able to deduct the expense from his Taxes. The Italian State allows the restaurant
to issue a Simplified Invoice with the VAT number only, to speed up times, instead of
requiring the address and other informations about the buyer.
Only invoices under the threshold of 400 Euroes are allowed, to avoid this tool
be abused for bigger transactions, that would enable less transparency to tax institutions.</pre></details><ul id="m-_l10n_it_edi_is_simplified_document_type"><li>_l10n_it_edi_is_simplified_document_type(self, document_type) <span class="position">@ line 588</span></li></ul><ul id="m-_l10n_it_edi_parse_notification"><li>_l10n_it_edi_parse_notification(self, notification) <span class="position">@ line 1458</span></li></ul><details><summary id="m-_l10n_it_edi_process_downloads">_l10n_it_edi_process_downloads(self, invoices_data, proxy_user) <span class="position">@ line 662</span></summary><pre>Every attachment will be committed if stored succesfully.
Also moves will be committed one by one, even if imported incorrectly.</pre></details><ul id="m-_l10n_it_edi_ready_for_xml_export"><li>_l10n_it_edi_ready_for_xml_export(self) <span class="position">@ line 231</span></li></ul><details><summary id="m-_l10n_it_edi_render_xml">_l10n_it_edi_render_xml(self, pdf_values) <span class="position">@ line 1255</span></summary><pre>Create the xml file content.
:return:    The XML content as bytestring.</pre></details><ul id="m-_l10n_it_edi_search_partner"><li>_l10n_it_edi_search_partner(self, company, vat, codice_fiscale, email) <span class="position">@ line 744</span></li></ul><details><summary id="m-_l10n_it_edi_search_tax_for_import">_l10n_it_edi_search_tax_for_import(self, company, percentage, extra_domain, l10n_it_exempt_reason) <span class="position">@ line 753</span></summary><pre>Returns the VAT, Withholding or Pension Fund tax that suits the conditions given
and matches the percentage found in the XML for the company.</pre></details><ul id="m-_l10n_it_edi_send"><li>_l10n_it_edi_send(self, attachments_vals) <span class="position">@ line 1313</span></li></ul><details><summary id="m-_l10n_it_edi_services_or_goods">_l10n_it_edi_services_or_goods(self) <span class="position">@ line 430</span></summary><pre>Services and goods have different tax grids when VAT is Reverse Charged, and they can't
be mixed in the same invoice, because the TipoDocumento depends on which which kind
of product is bought and it's unambiguous.</pre></details><details><summary id="m-_l10n_it_edi_transform_notification">_l10n_it_edi_transform_notification(self, parsed_notification) <span class="position">@ line 1480</span></summary><pre>Reads the notification XML coming from the EDI Proxy Server
Recovers information about the new state.
Computes whether the EDI Proxy Server is to be acked,
and whether the id_transaction has to be reset.</pre></details><details><summary id="m-_l10n_it_edi_update_send_state">_l10n_it_edi_update_send_state(self) <span class="position">@ line 1403</span></summary><pre>Check if the current invoices have been processed by the SdI.</pre></details><details><summary id="m-_l10n_it_edi_upload">_l10n_it_edi_upload(self, files) <span class="position">@ line 1368</span></summary><pre>Upload files to the SdI.

:param files:    A list of dictionary {filename, base64_xml}.
:returns:        A dictionary.
* message:       Message from fatturapa.
* transactionId: The fatturapa ID of this request.
* error:         An eventual error.</pre></details><details><summary id="m-_l10n_it_edi_write_send_state">_l10n_it_edi_write_send_state(self, transformed_notification, message) <span class="position">@ line 1520</span></summary><pre>Update the record with the data coming from the IAP server.
Eventually post the message.
Commit the transaction.</pre></details><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 174</span></li></ul><ul id="m-action_check_l10n_it_edi"><li>action_check_l10n_it_edi(self) <span class="position">@ line 213</span></li></ul><details><summary id="m-action_l10n_it_edi_send">action_l10n_it_edi_send(self) <span class="position">@ line 196</span></summary><pre>Checks that the invoice data is coherent.
Attaches the XML file to the invoice.
Sends the invoice to the SdI.</pre></details><ul id="m-button_draft"><li>button_draft(self) <span class="position">@ line 221</span></li></ul><details><summary id="m-cron_l10n_it_edi_download_and_update">cron_l10n_it_edi_download_and_update(self) <span class="position">@ line 615</span></summary><pre>Crons run with sudo(), with empty recordset. Remember that.</pre></details><h2>Inherited: odoo/addons/l10n_in_sale_stock/models/account_move.py</h2><h3>Methods</h3><ul id="m-_l10n_in_get_warehouse_address"><li>_l10n_in_get_warehouse_address(self) <span class="position">@ line 10</span></li></ul><h2>Inherited: odoo/addons/l10n_in_purchase_stock/models/account_move.py</h2><h3>Methods</h3><ul id="m-_l10n_in_get_warehouse_address"><li>_l10n_in_get_warehouse_address(self) <span class="position">@ line 10</span></li></ul><h2>Inherited: odoo/addons/l10n_in_edi_ewaybill/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_in_distance">l10n_in_distance <span class="position">@ line 16</span></summary><pre>l10n_in_distance = fields.Integer("Distance", tracking=True)</pre></details><details><summary id="f-l10n_in_edi_ewaybill_direct_api">l10n_in_edi_ewaybill_direct_api <span class="position">@ line 46</span></summary><pre>l10n_in_edi_ewaybill_direct_api = fields.Boolean(string="E-waybill(IN) direct API", compute="_compute_l10n_in_edi_ewaybill_direct")</pre></details><details><summary id="f-l10n_in_edi_ewaybill_show_send_button">l10n_in_edi_ewaybill_show_send_button <span class="position">@ line 47</span></summary><pre>l10n_in_edi_ewaybill_show_send_button = fields.Boolean(string="Show Send E-waybill Button", compute="_compute_l10n_in_edi_ewaybill_show_send_button")</pre></details><details><summary id="f-l10n_in_mode">l10n_in_mode <span class="position">@ line 17</span></summary><pre>l10n_in_mode = fields.Selection([
        ("0", "Managed by Transporter"),
        ("1", "Road"),
        ("2", "Rail"),
        ("3", "Air"),
        ("4", "Ship")],
        string="Transportation Mode", copy=False, tracking=True)</pre></details><details><summary id="f-l10n_in_transportation_doc_date">l10n_in_transportation_doc_date <span class="position">@ line 37</span></summary><pre>l10n_in_transportation_doc_date = fields.Date(
        string="Document Date",
        help="Date on the transporter document",
        copy=False,
        tracking=True)</pre></details><details><summary id="f-l10n_in_transportation_doc_no">l10n_in_transportation_doc_no <span class="position">@ line 33</span></summary><pre>l10n_in_transportation_doc_no = fields.Char(
        string="E-waybill Document Number",
        help="""Transport document number. If it is more than 15 chars, last 15 chars may be entered""",
        copy=False, tracking=True)</pre></details><details><summary id="f-l10n_in_transporter_id">l10n_in_transporter_id <span class="position">@ line 44</span></summary><pre>l10n_in_transporter_id = fields.Many2one("res.partner", "Transporter", copy=False, tracking=True)</pre></details><details><summary id="f-l10n_in_type_id">l10n_in_type_id <span class="position">@ line 13</span></summary><pre>l10n_in_type_id = fields.Many2one("l10n.in.ewaybill.type", "E-waybill Document Type", tracking=True)</pre></details><details><summary id="f-l10n_in_vehicle_no">l10n_in_vehicle_no <span class="position">@ line 26</span></summary><pre>l10n_in_vehicle_no = fields.Char("Vehicle Number", copy=False, tracking=True)</pre></details><details><summary id="f-l10n_in_vehicle_type">l10n_in_vehicle_type <span class="position">@ line 27</span></summary><pre>l10n_in_vehicle_type = fields.Selection([
        ("R", "Regular"),
        ("O", "Over Dimensional Cargo")],
        string="Vehicle Type", copy=False, tracking=True)</pre></details><h3>Methods</h3><ul id="m-_get_l10n_in_edi_ewaybill_response_json"><li>_get_l10n_in_edi_ewaybill_response_json(self) <span class="position">@ line 77</span></li></ul><details><summary id="m-button_cancel_posted_moves">button_cancel_posted_moves(self) <span class="position">@ line 86</span></summary><pre>Mark the edi.document related to this move to be canceled.</pre></details><ul id="m-l10n_in_edi_ewaybill_send"><li>l10n_in_edi_ewaybill_send(self) <span class="position">@ line 102</span></li></ul><h2>Inherited: odoo/addons/l10n_in_edi/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_in_edi_cancel_reason">l10n_in_edi_cancel_reason <span class="position">@ line 13</span></summary><pre>l10n_in_edi_cancel_reason = fields.Selection(selection=[
        ("1", "Duplicate"),
        ("2", "Data Entry Mistake"),
        ("3", "Order Cancelled"),
        ("4", "Others"),
        ], string="Cancel reason", copy=False)</pre></details><details><summary id="f-l10n_in_edi_cancel_remarks">l10n_in_edi_cancel_remarks <span class="position">@ line 19</span></summary><pre>l10n_in_edi_cancel_remarks = fields.Char("Cancel remarks", copy=False)</pre></details><details><summary id="f-l10n_in_edi_show_cancel">l10n_in_edi_show_cancel <span class="position">@ line 20</span></summary><pre>l10n_in_edi_show_cancel = fields.Boolean(compute="_compute_l10n_in_edi_show_cancel", string="E-invoice(IN) is sent?")</pre></details><h3>Methods</h3><ul id="m-_get_l10n_in_edi_response_json"><li>_get_l10n_in_edi_response_json(self) <span class="position">@ line 46</span></li></ul><details><summary id="m-button_cancel_posted_moves">button_cancel_posted_moves(self) <span class="position">@ line 30</span></summary><pre>Mark the edi.document related to this move to be canceled.</pre></details><h2>Inherited: odoo/addons/l10n_in/models/account_invoice.py</h2><h3>Fields</h3><details><summary id="f-l10n_in_gst_treatment">l10n_in_gst_treatment <span class="position">@ line 14</span></summary><pre>l10n_in_gst_treatment = fields.Selection([
            ('regular', 'Registered Business - Regular'),
            ('composition', 'Registered Business - Composition'),
            ('unregistered', 'Unregistered Business'),
            ('consumer', 'Consumer'),
            ('overseas', 'Overseas'),
            ('special_economic_zone', 'Special Economic Zone'),
            ('deemed_export', 'Deemed Export'),
            ('uin_holders', 'UIN Holders'),
        ], string="GST Treatment", compute="_compute_l10n_in_gst_treatment", store=True, readonly=False, copy=True, precompute=True)</pre></details><details><summary id="f-l10n_in_gstin">l10n_in_gstin <span class="position">@ line 25</span></summary><pre>l10n_in_gstin = fields.Char(string="GSTIN")</pre></details><details><summary id="f-l10n_in_journal_type">l10n_in_journal_type <span class="position">@ line 31</span></summary><pre>l10n_in_journal_type = fields.Selection(string="Journal Type", related='journal_id.type')</pre></details><details><summary id="f-l10n_in_reseller_partner_id">l10n_in_reseller_partner_id <span class="position">@ line 30</span></summary><pre>l10n_in_reseller_partner_id = fields.Many2one('res.partner', 'Reseller', domain=[('vat', '!=', False)], help="Only Registered Reseller")</pre></details><details><summary id="f-l10n_in_shipping_bill_date">l10n_in_shipping_bill_date <span class="position">@ line 28</span></summary><pre>l10n_in_shipping_bill_date = fields.Date('Shipping bill date')</pre></details><details><summary id="f-l10n_in_shipping_bill_number">l10n_in_shipping_bill_number <span class="position">@ line 27</span></summary><pre>l10n_in_shipping_bill_number = fields.Char('Shipping bill number')</pre></details><details><summary id="f-l10n_in_shipping_port_code_id">l10n_in_shipping_port_code_id <span class="position">@ line 29</span></summary><pre>l10n_in_shipping_port_code_id = fields.Many2one('l10n_in.port.code', 'Port code')</pre></details><details><summary id="f-l10n_in_state_id">l10n_in_state_id <span class="position">@ line 24</span></summary><pre>l10n_in_state_id = fields.Many2one('res.country.state', string="Place of supply", compute="_compute_l10n_in_state_id", store=True, readonly=False)</pre></details><h3>Methods</h3><ul id="m-_generate_qr_code"><li>_generate_qr_code(self, silent_errors) <span class="position">@ line 117</span></li></ul><ul id="m-_get_name_invoice_report"><li>_get_name_invoice_report(self) <span class="position">@ line 76</span></li></ul><ul id="m-_l10n_in_get_hsn_summary_table"><li>_l10n_in_get_hsn_summary_table(self) <span class="position">@ line 130</span></li></ul><details><summary id="m-_l10n_in_get_warehouse_address">_l10n_in_get_warehouse_address(self) <span class="position">@ line 111</span></summary><pre>Return address where goods are delivered/received for Invoice/Bill</pre></details><details><summary id="m-_post">_post(self, soft) <span class="position">@ line 82</span></summary><pre>Use journal type to define document type because not miss state in any entry including POS entry</pre></details><h2>Inherited: odoo/addons/l10n_id_efaktur/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_id_attachment_id">l10n_id_attachment_id <span class="position">@ line 26</span></summary><pre>l10n_id_attachment_id = fields.Many2one('ir.attachment', readonly=True, copy=False)</pre></details><details><summary id="f-l10n_id_csv_created">l10n_id_csv_created <span class="position">@ line 27</span></summary><pre>l10n_id_csv_created = fields.Boolean('CSV Created', compute='_compute_csv_created', copy=False)</pre></details><details><summary id="f-l10n_id_kode_transaksi">l10n_id_kode_transaksi <span class="position">@ line 28</span></summary><pre>l10n_id_kode_transaksi = fields.Selection([
            ('01', '01 Kepada Pihak yang Bukan Pemungut PPN (Customer Biasa)'),
            ('02', '02 Kepada Pemungut Bendaharawan (Dinas Kepemerintahan)'),
            ('03', '03 Kepada Pemungut Selain Bendaharawan (BUMN)'),
            ('04', '04 DPP Nilai Lain (PPN 1%)'),
            ('05', '05 Besaran Tertentu'),
            ('06', '06 Penyerahan Lainnya (Turis Asing)'),
            ('07', '07 Penyerahan yang PPN-nya Tidak Dipungut (Kawasan Ekonomi Khusus/ Batam)'),
            ('08', '08 Penyerahan yang PPN-nya Dibebaskan (Impor Barang Tertentu)'),
            ('09', '09 Penyerahan Aktiva ( Pasal 16D UU PPN )'),
        ], string='Kode Transaksi', help='Dua digit pertama nomor pajak',
        readonly=False, copy=False,
        compute="_compute_kode_transaksi", store=True)</pre></details><details><summary id="f-l10n_id_need_kode_transaksi">l10n_id_need_kode_transaksi <span class="position">@ line 41</span></summary><pre>l10n_id_need_kode_transaksi = fields.Boolean(compute='_compute_need_kode_transaksi')</pre></details><details><summary id="f-l10n_id_replace_invoice_id">l10n_id_replace_invoice_id <span class="position">@ line 25</span></summary><pre>l10n_id_replace_invoice_id = fields.Many2one('account.move', string="Replace Invoice", domain="['|', '&', '&', ('state', '=', 'posted'), ('partner_id', '=', partner_id), ('reversal_move_id', '!=', False), ('state', '=', 'cancel')]", copy=False, index='btree_not_null')</pre></details><details><summary id="f-l10n_id_tax_number">l10n_id_tax_number <span class="position">@ line 24</span></summary><pre>l10n_id_tax_number = fields.Char(string="Tax Number", copy=False)</pre></details><h3>Methods</h3><ul id="m-_generate_efaktur"><li>_generate_efaktur(self, delimiter) <span class="position">@ line 349</span></li></ul><details><summary id="m-_generate_efaktur_invoice">_generate_efaktur_invoice(self, delimiter) <span class="position">@ line 146</span></summary><pre>Generate E-Faktur for customer invoice.</pre></details><details><summary id="m-_post">_post(self, soft) <span class="position">@ line 94</span></summary><pre>Set E-Faktur number after validation.</pre></details><ul id="m-_prepare_etax"><li>_prepare_etax(self) <span class="position">@ line 345</span></li></ul><ul id="m-download_csv"><li>download_csv(self) <span class="position">@ line 124</span></li></ul><details><summary id="m-download_efaktur">download_efaktur(self) <span class="position">@ line 132</span></summary><pre>Collect the data and execute function _generate_efaktur.</pre></details><details><summary id="m-reset_efaktur">reset_efaktur(self) <span class="position">@ line 112</span></summary><pre>Reset E-Faktur, so it can be use for other invoice.</pre></details><h2>Inherited: odoo/addons/l10n_id/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_id_qris_invoice_details">l10n_id_qris_invoice_details <span class="position">@ line 17</span></summary><pre>l10n_id_qris_invoice_details = fields.Json(
        string="QRIS Transaction Number",
        help="Transaction Number stored.",
        readonly=True,
        export_string_translation=False,
    )</pre></details><h3>Methods</h3><details><summary id="m-_generate_qr_code">_generate_qr_code(self, silent_errors) <span class="position">@ line 24</span></summary><pre>Adds information about which invoice is triggering the creation of the QR-Code, so that we can link both together.</pre></details><details><summary id="m-_l10n_id_cron_update_payment_status">_l10n_id_cron_update_payment_status(self) <span class="position">@ line 34</span></summary><pre>This cron will:
- Get all invoices that are not paid, and have details about QRIS qr codes.
- For each invoices, get information about the payment state of the QR using the API.
- If the QR is not paid and it has been more than 30m, we discard that qr id (no longer valid)
- If it is paid, we will register the payment on the invoices.</pre></details><details><summary id="m-_l10n_id_get_qris_qr_statuses">_l10n_id_get_qris_qr_statuses(self) <span class="position">@ line 67</span></summary><pre>Query the API in order to get updated information on the status of each QR codes linked to the invoices in self.
If the QR has been paid, only the paid information is returned.

:return: a list with the format:
{
invoice: {
'paid': True,
'qr_statuses': [],
},
invoice: {
'paid': False,
'qr_statuses': [],
}
}</pre></details><details><summary id="m-_l10n_id_process_invoices">_l10n_id_process_invoices(self, invoices_statuses) <span class="position">@ line 105</span></summary><pre>Receives the list of invoices and their statuses, and update them using it.
For paid invoices we will register the payment and log a note, while for unpaid ones we will discard expired
QR data and keep the non-expired ones for the next run.</pre></details><details><summary id="m-_l10n_id_update_payment_status">_l10n_id_update_payment_status(self) <span class="position">@ line 62</span></summary><pre>Starts by fetching the QR statuses for the invoices in self, then update said invoices based on the statuses</pre></details><details><summary id="m-action_l10n_id_update_payment_status">action_l10n_id_update_payment_status(self) <span class="position">@ line 48</span></summary><pre>This action will:
- Get all invoices that are not paid, and have details about QRIS qr codes.
- For each invoices, get information about the payment state of the QR using the API.
- If the QR is not paid and it has been more than 30m, we discard that qr id (no longer valid)
- If it is paid, we will register the payment on the invoices.</pre></details><h2>Inherited: odoo/addons/l10n_hu_edi/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_hu_edi_attachment">l10n_hu_edi_attachment <span class="position">@ line 67</span></summary><pre>l10n_hu_edi_attachment = fields.Binary(
        string='Invoice XML file',
        attachment=True,
        copy=False,
    )</pre></details><details><summary id="f-l10n_hu_edi_attachment_filename">l10n_hu_edi_attachment_filename <span class="position">@ line 108</span></summary><pre>l10n_hu_edi_attachment_filename = fields.Char(
        string='Invoice XML filename',
        compute='_compute_l10n_hu_edi_attachment_filename',
    )</pre></details><details><summary id="f-l10n_hu_edi_batch_upload_index">l10n_hu_edi_batch_upload_index <span class="position">@ line 63</span></summary><pre>l10n_hu_edi_batch_upload_index = fields.Integer(
        string='Index of invoice within a batch upload',
        copy=False,
    )</pre></details><details><summary id="f-l10n_hu_edi_message_html">l10n_hu_edi_message_html <span class="position">@ line 112</span></summary><pre>l10n_hu_edi_message_html = fields.Html(
        string='Transaction messages',
        compute='_compute_message_html',
    )</pre></details><details><summary id="f-l10n_hu_edi_messages">l10n_hu_edi_messages <span class="position">@ line 93</span></summary><pre>l10n_hu_edi_messages = fields.Json(
        string='Transaction messages (JSON)',
        copy=False,
    )</pre></details><details><summary id="f-l10n_hu_edi_send_time">l10n_hu_edi_send_time <span class="position">@ line 72</span></summary><pre>l10n_hu_edi_send_time = fields.Datetime(
        string='Invoice upload time',
        copy=False,
    )</pre></details><details><summary id="f-l10n_hu_edi_state">l10n_hu_edi_state <span class="position">@ line 38</span></summary><pre>l10n_hu_edi_state = fields.Selection(
        ######################################################################################################################
        # STATE DIAGRAM
        # * False, rejected, cancelled --[upload]--> False, sent, send_timeout
        # * sent --[query_status]--> sent, confirmed, confirmed_warning, rejected
        # * confirmed, confirmed_warning --[request_cancel]--> cancel_sent, cancel_timeout
        # * cancel_sent, cancel_pending --[query_status]--> confirmed_warning, cancel_pending, cancelled
        # * send_timeout --[recover_timeout]--> False, send_timeout, confirmed, confirmed_warning, rejected,
        # * cancel_timeout --[recover_timeout]--> confirmed_warning, cancel_sent, cancel_timeout, cancel_pending, cancelled
        ######################################################################################################################
        selection=[
            ('sent', 'Sent, waiting for response'),
            ('send_timeout', 'Timeout when sending'),
            ('confirmed', 'Confirmed'),
            ('confirmed_warning', 'Confirmed with warnings'),
            ('rejected', 'Rejected'),
            ('cancel_sent', 'Cancellation request sent'),
            ('cancel_timeout', 'Timeout when requesting cancellation'),
            ('cancel_pending', 'Cancellation request pending'),
            ('cancelled', 'Cancelled'),
        ],
        string='NAV 3.0 status',
        copy=False,
        index='btree_not_null',
    )</pre></details><details><summary id="f-l10n_hu_edi_transaction_code">l10n_hu_edi_transaction_code <span class="position">@ line 76</span></summary><pre>l10n_hu_edi_transaction_code = fields.Char(
        string='Transaction Code',
        index='trigram',
        copy=False,
        tracking=True,
    )</pre></details><details><summary id="f-l10n_hu_invoice_chain_index">l10n_hu_invoice_chain_index <span class="position">@ line 98</span></summary><pre>l10n_hu_invoice_chain_index = fields.Integer(
        string='Invoice Chain Index',
        help="""
            Index in the chain of modification invoices:
                -1 for a base invoice;
                1, 2, 3, ... for modification invoices;
                0 for rejected/cancelled invoices or if it has not yet been set.
            """,
        copy=False,
    )</pre></details><details><summary id="f-l10n_hu_payment_mode">l10n_hu_payment_mode <span class="position">@ line 25</span></summary><pre>l10n_hu_payment_mode = fields.Selection(
        [
            ("TRANSFER", "Transfer"),
            ("CASH", "Cash"),
            ("CARD", "Credit/debit card"),
            ("VOUCHER", "Voucher"),
            ("OTHER", "Other"),
        ],
        string="Payment mode",
        help="NAV expected payment mode of the invoice.",
    )</pre></details><h3>Methods</h3><ul id="m-_get_name_invoice_report"><li>_get_name_invoice_report(self) <span class="position">@ line 966</span></li></ul><details><summary id="m-_l10n_hu_edi_acquire_lock">_l10n_hu_edi_acquire_lock(self) <span class="position">@ line 305</span></summary><pre>Acquire a write lock on the invoices in self.</pre></details><ul id="m-_l10n_hu_edi_check_invoices"><li>_l10n_hu_edi_check_invoices(self) <span class="position">@ line 317</span></li></ul><ul id="m-_l10n_hu_edi_generate_xml"><li>_l10n_hu_edi_generate_xml(self) <span class="position">@ line 773</span></li></ul><details><summary id="m-_l10n_hu_edi_get_electronic_invoice_template">_l10n_hu_edi_get_electronic_invoice_template(self) <span class="position">@ line 780</span></summary><pre>For feature extensibility.</pre></details><ul id="m-_l10n_hu_edi_get_invoice_values"><li>_l10n_hu_edi_get_invoice_values(self) <span class="position">@ line 784</span></li></ul><details><summary id="m-_l10n_hu_edi_get_valid_actions">_l10n_hu_edi_get_valid_actions(self) <span class="position">@ line 225</span></summary><pre>If any NAV 3.0 flows are applicable to the given invoice, return them, else None.</pre></details><ul id="m-_l10n_hu_edi_process_query_transaction_result"><li>_l10n_hu_edi_process_query_transaction_result(self, processing_result, annulment_status) <span class="position">@ line 590</span></li></ul><details><summary id="m-_l10n_hu_edi_query_status">_l10n_hu_edi_query_status(self, connection) <span class="position">@ line 542</span></summary><pre>Check the NAV invoice status.</pre></details><details><summary id="m-_l10n_hu_edi_query_status_single_batch">_l10n_hu_edi_query_status_single_batch(self, connection) <span class="position">@ line 555</span></summary><pre>Check the NAV status for invoices that share the same transaction code (uploaded in a single batch).</pre></details><details><summary id="m-_l10n_hu_edi_request_cancel">_l10n_hu_edi_request_cancel(self, connection, code, reason) <span class="position">@ line 704</span></summary><pre>Send a cancellation request for all invoices in `self`.</pre></details><ul id="m-_l10n_hu_edi_request_cancel_single_batch"><li>_l10n_hu_edi_request_cancel_single_batch(self, connection, code, reason) <span class="position">@ line 711</span></li></ul><details><summary id="m-_l10n_hu_edi_set_chain_index">_l10n_hu_edi_set_chain_index(self) <span class="position">@ line 287</span></summary><pre>Set the l10n_hu_invoice_chain_index field.</pre></details><details><summary id="m-_l10n_hu_edi_upload">_l10n_hu_edi_upload(self, connection) <span class="position">@ line 438</span></summary><pre>Generate invoice XMLs and send to NAV.</pre></details><ul id="m-_l10n_hu_edi_upload_single_batch"><li>_l10n_hu_edi_upload_single_batch(self, connection) <span class="position">@ line 477</span></li></ul><details><summary id="m-_l10n_hu_get_chain_base">_l10n_hu_get_chain_base(self) <span class="position">@ line 248</span></summary><pre>Get the base invoice of the invoice chain.</pre></details><details><summary id="m-_l10n_hu_get_chain_invoices">_l10n_hu_get_chain_invoices(self) <span class="position">@ line 257</span></summary><pre>Given base invoices, get all invoices in the chain.</pre></details><details><summary id="m-_l10n_hu_get_currency_rate">_l10n_hu_get_currency_rate(self) <span class="position">@ line 265</span></summary><pre>Get the invoice currency / HUF rate.

If the company currency is HUF, we estimate this based on the invoice lines,
using a MMSE estimator.

If the company currency is not HUF (e.g. Hungarian companies that do their accounting in euro),
we get the rate from the currency rates.</pre></details><details><summary id="m-_l10n_hu_get_invoice_totals_for_report">_l10n_hu_get_invoice_totals_for_report(self) <span class="position">@ line 970</span></summary><pre>In Hungary, tax amounts should appear negative on credit notes.
We therefore apply a post-processing to the tax totals to make them negative.</pre></details><ul id="m-_need_cancel_request"><li>_need_cancel_request(self) <span class="position">@ line 153</span></li></ul><ul id="m-button_request_cancel"><li>button_request_cancel(self) <span class="position">@ line 158</span></li></ul><ul id="m-l10n_hu_edi_button_hide_banner"><li>l10n_hu_edi_button_hide_banner(self) <span class="position">@ line 217</span></li></ul><details><summary id="m-l10n_hu_edi_button_update_status">l10n_hu_edi_button_update_status(self, from_cron) <span class="position">@ line 175</span></summary><pre>Attempt to update the status of the invoices in `self`</pre></details><h2>Inherited: odoo/addons/l10n_hu/models/account_move.py</h2><h3>Methods</h3><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 17</span></li></ul><h2>Inherited: odoo/addons/l10n_gcc_invoice/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-narration">narration <span class="position">@ line 20</span></summary><pre>narration = fields.Html(translate=True)</pre></details><h3>Methods</h3><ul id="m-_compute_narration"><li>_compute_narration(self) <span class="position">@ line 63</span></li></ul><ul id="m-_get_name_invoice_report"><li>_get_name_invoice_report(self) <span class="position">@ line 22</span></li></ul><ul id="m-_load_narration_translation"><li>_load_narration_translation(self) <span class="position">@ line 35</span></li></ul><ul id="m-_num2words"><li>_num2words(self, number, lang) <span class="position">@ line 28</span></li></ul><h2>Inherited: odoo/addons/l10n_fr_facturx_chorus_pro/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-buyer_reference">buyer_reference <span class="position">@ line 8</span></summary><pre>buyer_reference = fields.Char(help="'Service Excutant' in Chorus PRO.")</pre></details><details><summary id="f-contract_reference">contract_reference <span class="position">@ line 9</span></summary><pre>contract_reference = fields.Char(help="'Numro de March' in Chorus PRO.")</pre></details><details><summary id="f-purchase_order_reference">purchase_order_reference <span class="position">@ line 10</span></summary><pre>purchase_order_reference = fields.Char(help="'Engagement Juridique' in Chorus PRO.")</pre></details><h2>Inherited: odoo/addons/l10n_fr_account/models/account_move.py</h2><h3>Methods</h3><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 14</span></li></ul><h2>Inherited: odoo/addons/l10n_fi/models/account_move.py</h2><h3>Methods</h3><ul id="m-_get_invoice_reference_fi_invoice"><li>_get_invoice_reference_fi_invoice(self) <span class="position">@ line 82</span></li></ul><ul id="m-_get_invoice_reference_fi_partner"><li>_get_invoice_reference_fi_partner(self) <span class="position">@ line 86</span></li></ul><ul id="m-_get_invoice_reference_fi_rf_invoice"><li>_get_invoice_reference_fi_rf_invoice(self) <span class="position">@ line 74</span></li></ul><ul id="m-_get_invoice_reference_fi_rf_partner"><li>_get_invoice_reference_fi_rf_partner(self) <span class="position">@ line 78</span></li></ul><h2>Inherited: odoo/addons/l10n_es_pos/models/account_move.py</h2><h3>Methods</h3><ul id="m-_compute_l10n_es_is_simplified"><li>_compute_l10n_es_is_simplified(self) <span class="position">@ line 8</span></li></ul><h2>Inherited: odoo/addons/l10n_es_edi_tbai/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_es_tbai_cancel_xml">l10n_es_tbai_cancel_xml <span class="position">@ line 49</span></summary><pre>l10n_es_tbai_cancel_xml = fields.Binary(
        attachment=True, readonly=True, copy=False,
        string="Cancellation XML",
        help="Cancellation XML sent to TicketBAI. Kept if accepted or no response (timeout), cleared otherwise.",
    )</pre></details><details><summary id="f-l10n_es_tbai_chain_index">l10n_es_tbai_chain_index <span class="position">@ line 37</span></summary><pre>l10n_es_tbai_chain_index = fields.Integer(
        string="TicketBAI chain index",
        help="Invoice index in chain, set if and only if an in-chain XML was submitted and did not error",
        copy=False, readonly=True,
    )</pre></details><details><summary id="f-l10n_es_tbai_is_required">l10n_es_tbai_is_required <span class="position">@ line 56</span></summary><pre>l10n_es_tbai_is_required = fields.Boolean(
        string="TicketBAI required",
        help="Is the Basque EDI (TicketBAI) needed ?",
        compute="_compute_l10n_es_tbai_is_required",
    )</pre></details><details><summary id="f-l10n_es_tbai_post_xml">l10n_es_tbai_post_xml <span class="position">@ line 44</span></summary><pre>l10n_es_tbai_post_xml = fields.Binary(
        attachment=True, readonly=True, copy=False,
        string="Submission XML",
        help="Submission XML sent to TicketBAI. Kept if accepted or no response (timeout), cleared otherwise.",
    )</pre></details><details><summary id="f-l10n_es_tbai_refund_reason">l10n_es_tbai_refund_reason <span class="position">@ line 63</span></summary><pre>l10n_es_tbai_refund_reason = fields.Selection(
        selection=[
            ('R1', "R1: Art. 80.1, 80.2, 80.6 and rights founded error"),
            ('R2', "R2: Art. 80.3"),
            ('R3', "R3: Art. 80.4"),
            ('R4', "R4: Art. 80 - other"),
            ('R5', "R5: Factura rectificativa en facturas simplificadas"),
        ],
        string="Invoice Refund Reason Code (TicketBai)",
        help="BOE-A-1992-28740. Ley 37/1992, de 28 de diciembre, del Impuesto sobre el "
        "Valor Aadido. Artculo 80. Modificacin de la base imponible.",
        copy=False,
    )</pre></details><h3>Methods</h3><details><summary id="m-_get_l10n_es_tbai_id">_get_l10n_es_tbai_id(self) <span class="position">@ line 156</span></summary><pre>Get the TicketBAI ID (TBAID) as defined in the TicketBAI doc.</pre></details><details><summary id="m-_get_l10n_es_tbai_qr">_get_l10n_es_tbai_qr(self) <span class="position">@ line 173</span></summary><pre>Returns the URL for the invoice's QR code.  We can not use url_encode because it escapes / e.g.</pre></details><details><summary id="m-_get_l10n_es_tbai_sequence_and_number">_get_l10n_es_tbai_sequence_and_number(self) <span class="position">@ line 128</span></summary><pre>Get the TicketBAI sequence a number values for this invoice.</pre></details><details><summary id="m-_get_l10n_es_tbai_signature_and_date">_get_l10n_es_tbai_signature_and_date(self) <span class="position">@ line 138</span></summary><pre>Get the TicketBAI signature and registration date for this invoice.
Values are read directly from the 'post' XMLs submitted to the government             (the 'cancel' XML is ignored).
The registration date is the date the invoice was registered into the govt's TicketBAI servers.</pre></details><details><summary id="m-_get_l10n_es_tbai_submitted_xml">_get_l10n_es_tbai_submitted_xml(self, cancel) <span class="position">@ line 209</span></summary><pre>Returns the XML object representing the post or cancel document.</pre></details><details><summary id="m-_get_l10n_es_tbai_values_from_xml">_get_l10n_es_tbai_values_from_xml(self, xpaths) <span class="position">@ line 196</span></summary><pre>This function reads values directly from the 'post' XML submitted to the government             (the 'cancel' XML is ignored).</pre></details><ul id="m-_get_vendor_bill_tax_values"><li>_get_vendor_bill_tax_values(self) <span class="position">@ line 227</span></li></ul><ul id="m-_l10n_es_edi_tbai_crc8"><li>_l10n_es_edi_tbai_crc8(self, data) <span class="position">@ line 190</span></li></ul><details><summary id="m-_l10n_es_tbai_is_in_chain">_l10n_es_tbai_is_in_chain(self) <span class="position">@ line 118</span></summary><pre>True iff invoice has been posted to the chain and confirmed by govt.
Note that cancelled invoices remain part of the chain.</pre></details><details><summary id="m-_update_l10n_es_tbai_submitted_xml">_update_l10n_es_tbai_submitted_xml(self, xml_doc, cancel) <span class="position">@ line 218</span></summary><pre>Updates the binary data of the post or cancel document, from its XML object.</pre></details><ul id="m-button_draft"><li>button_draft(self) <span class="position">@ line 98</span></li></ul><h2>Inherited: odoo/addons/l10n_es_edi_sii/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_es_edi_csv">l10n_es_edi_csv <span class="position">@ line 14</span></summary><pre>l10n_es_edi_csv = fields.Char(string="CSV return code", copy=False)</pre></details><details><summary id="f-l10n_es_edi_is_required">l10n_es_edi_is_required <span class="position">@ line 10</span></summary><pre>l10n_es_edi_is_required = fields.Boolean(
        string="Is the Spanish EDI needed",
        compute='_compute_l10n_es_edi_is_required'
    )</pre></details><details><summary id="f-l10n_es_registration_date">l10n_es_registration_date <span class="position">@ line 17</span></summary><pre>l10n_es_registration_date = fields.Date(
        string="Registration Date", copy=False,
    )</pre></details><h3>Methods</h3><ul id="m-_l10n_es_is_dua"><li>_l10n_es_is_dua(self) <span class="position">@ line 44</span></li></ul><h2>Inherited: odoo/addons/l10n_es_edi_facturae/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_es_edi_facturae_reason_code">l10n_es_edi_facturae_reason_code <span class="position">@ line 58</span></summary><pre>l10n_es_edi_facturae_reason_code = fields.Selection(
        selection=[
            ('01', "Invoice number"),
            ('02', "Invoice serial number"),
            ('03', "Issue date"),
            ('04', "Name and surnames/Corporate name - Issuer (Sender)"),
            ('05', "Name and surnames/Corporate name - Receiver"),
            ('06', "Issuer's Tax Identification Number"),
            ('07', "Receiver's Tax Identification Number"),
            ('08', "Issuer's address"),
            ('09', "Receiver's address"),
            ('10', "Item line"),
            ('11', "Applicable Tax Rate"),
            ('12', "Applicable Tax Amount"),
            ('13', "Applicable Date/Period"),
            ('14', "Invoice Class"),
            ('15', "Legal literals"),
            ('16', "Taxable Base"),
            ('80', "Calculation of tax outputs"),
            ('81', "Calculation of tax inputs"),
            ('82', "Taxable Base modified due to return of packages and packaging materials"),
            ('83', "Taxable Base modified due to discounts and rebates"),
            ('84', "Taxable Base modified due to firm court ruling or administrative decision"),
            ('85', "Taxable Base modified due to unpaid outputs where there is a judgement opening insolvency proceedings"),
        ], string='Spanish Facturae EDI Reason Code', default='10')</pre></details><details><summary id="f-l10n_es_edi_facturae_xml_file">l10n_es_edi_facturae_xml_file <span class="position">@ line 53</span></summary><pre>l10n_es_edi_facturae_xml_file = fields.Binary(
        attachment=True,
        string="Facturae File",
        copy=False,
    )</pre></details><details><summary id="f-l10n_es_edi_facturae_xml_id">l10n_es_edi_facturae_xml_id <span class="position">@ line 47</span></summary><pre>l10n_es_edi_facturae_xml_id = fields.Many2one(
        comodel_name='ir.attachment',
        string="Facturae Attachment",
        compute=lambda self: self._compute_linked_attachment_id('l10n_es_edi_facturae_xml_id', 'l10n_es_edi_facturae_xml_file'),
        depends=['l10n_es_edi_facturae_xml_file']
    )</pre></details><details><summary id="f-l10n_es_invoicing_period_end_date">l10n_es_invoicing_period_end_date <span class="position">@ line 84</span></summary><pre>l10n_es_invoicing_period_end_date = fields.Date(string="Invoice Period End Date")</pre></details><details><summary id="f-l10n_es_invoicing_period_start_date">l10n_es_invoicing_period_start_date <span class="position">@ line 83</span></summary><pre>l10n_es_invoicing_period_start_date = fields.Date(string="Invoice Period Start Date")</pre></details><details><summary id="f-l10n_es_payment_means">l10n_es_payment_means <span class="position">@ line 85</span></summary><pre>l10n_es_payment_means = fields.Selection(
        selection=[
            ('01', "In cash"),
            ('02', "Direct debit"),
            ('03', "Receipt"),
            ('04', "Credit transfer"),
            ('05', "Accepted bill of exchange"),
            ('06', "Documentary credit"),
            ('07', "Contract award"),
            ('08', "Bill of exchange"),
            ('09', "Transferable promissory note"),
            ('10', "Non transferable promissory note"),
            ('11', "Cheque"),
            ('12', "Open account reimbursement"),
            ('13', "Special payment"),
            ('14', "Set-off by reciprocal credits"),
            ('15', "Payment by postgiro"),
            ('16', "Certified cheque"),
            ('17', "Bankers draft"),
            ('18', "Cash on delivery"),
            ('19', "Payment by card"),
        ], string="Payment Means", default='04')</pre></details><h3>Methods</h3><ul id="m-_get_edi_decoder"><li>_get_edi_decoder(self, file_data, new) <span class="position">@ line 466</span></li></ul><ul id="m-_import_create_or_retrieve_partner"><li>_import_create_or_retrieve_partner(self, partner_vals) <span class="position">@ line 502</span></li></ul><ul id="m-_import_extract_partner_values"><li>_import_extract_partner_values(self, party_node) <span class="position">@ line 489</span></li></ul><ul id="m-_import_fill_invoice_line_taxes"><li>_import_fill_invoice_line_taxes(self, invoice, line_vals, tax_ids, tax_nodes, is_withheld, is_purchase) <span class="position">@ line 647</span></li></ul><ul id="m-_import_get_partner"><li>_import_get_partner(self, tree, is_bill) <span class="position">@ line 481</span></li></ul><ul id="m-_import_invoice_facturae"><li>_import_invoice_facturae(self, invoice, file_data, new) <span class="position">@ line 475</span></li></ul><ul id="m-_import_invoice_facturae_invoice"><li>_import_invoice_facturae_invoice(self, invoice, partner, tree) <span class="position">@ line 539</span></li></ul><ul id="m-_import_invoice_facturae_invoices"><li>_import_invoice_facturae_invoices(self, invoice, partner, tree) <span class="position">@ line 522</span></li></ul><ul id="m-_import_invoice_fill_lines"><li>_import_invoice_fill_lines(self, invoice, tree, ref_multiplier) <span class="position">@ line 597</span></li></ul><details><summary id="m-_l10n_es_edi_facturae_convert_payment_terms_to_installments">_l10n_es_edi_facturae_convert_payment_terms_to_installments(self) <span class="position">@ line 224</span></summary><pre>Convert the payments terms to a list of <Installment> elements to be used in the
<PaymentDetails> node of the Facturae XML generation.</pre></details><details><summary id="m-_l10n_es_edi_facturae_export_facturae">_l10n_es_edi_facturae_export_facturae(self) <span class="position">@ line 326</span></summary><pre>Produce the Facturae XML data for the invoice.

:return: (data needed to render the full template, data needed to render the signature template)</pre></details><ul id="m-_l10n_es_edi_facturae_get_administrative_centers"><li>_l10n_es_edi_facturae_get_administrative_centers(self, partner) <span class="position">@ line 186</span></li></ul><ul id="m-_l10n_es_edi_facturae_get_corrective_data"><li>_l10n_es_edi_facturae_get_corrective_data(self) <span class="position">@ line 161</span></li></ul><ul id="m-_l10n_es_edi_facturae_get_default_enable"><li>_l10n_es_edi_facturae_get_default_enable(self) <span class="position">@ line 108</span></li></ul><ul id="m-_l10n_es_edi_facturae_get_filename"><li>_l10n_es_edi_facturae_get_filename(self) <span class="position">@ line 117</span></li></ul><ul id="m-_l10n_es_edi_facturae_get_refunded_invoices"><li>_l10n_es_edi_facturae_get_refunded_invoices(self) <span class="position">@ line 131</span></li></ul><ul id="m-_l10n_es_edi_facturae_get_tax_period"><li>_l10n_es_edi_facturae_get_tax_period(self) <span class="position">@ line 121</span></li></ul><details><summary id="m-_l10n_es_edi_facturae_inv_lines_to_items">_l10n_es_edi_facturae_inv_lines_to_items(self, conversion_rate) <span class="position">@ line 244</span></summary><pre>Convert the invoice lines to a list of items required for the Facturae xml generation

:param float conversion_rate: Conversion rate of the invoice, if needed
:return: A tuple containing the Face items, the taxes and the invoice totals data.</pre></details><details><summary id="m-_l10n_es_edi_facturae_render_facturae">_l10n_es_edi_facturae_render_facturae(self) <span class="position">@ line 442</span></summary><pre>Produce the Facturae XML file for the invoice.

:return: rendered xml file string.
:rtype:  str</pre></details><ul id="m-_search_product_for_import"><li>_search_product_for_import(self, item_description) <span class="position">@ line 685</span></li></ul><ul id="m-_search_tax_for_import"><li>_search_tax_for_import(self, company, amount, is_fixed, is_withheld, is_purchase, price_included) <span class="position">@ line 674</span></li></ul><h2>Inherited: odoo/addons/l10n_es/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_es_is_simplified">l10n_es_is_simplified <span class="position">@ line 8</span></summary><pre>l10n_es_is_simplified = fields.Boolean("Is Simplified",
                                           compute="_compute_l10n_es_is_simplified", readonly=False, store=True)</pre></details><h2>Inherited: odoo/addons/l10n_eg_edi_eta/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_eg_eta_json_doc_id">l10n_eg_eta_json_doc_id <span class="position">@ line 22</span></summary><pre>l10n_eg_eta_json_doc_id = fields.Many2one('ir.attachment', copy=False)</pre></details><details><summary id="f-l10n_eg_is_signed">l10n_eg_is_signed <span class="position">@ line 24</span></summary><pre>l10n_eg_is_signed = fields.Boolean(copy=False)</pre></details><details><summary id="f-l10n_eg_long_id">l10n_eg_long_id <span class="position">@ line 18</span></summary><pre>l10n_eg_long_id = fields.Char(string='ETA Long ID', compute='_compute_eta_long_id')</pre></details><details><summary id="f-l10n_eg_qr_code">l10n_eg_qr_code <span class="position">@ line 19</span></summary><pre>l10n_eg_qr_code = fields.Char(string='ETA QR Code', compute='_compute_eta_qr_code_str')</pre></details><details><summary id="f-l10n_eg_signing_time">l10n_eg_signing_time <span class="position">@ line 23</span></summary><pre>l10n_eg_signing_time = fields.Datetime('Signing Time', copy=False)</pre></details><details><summary id="f-l10n_eg_submission_number">l10n_eg_submission_number <span class="position">@ line 20</span></summary><pre>l10n_eg_submission_number = fields.Char(string='Submission ID', compute='_compute_eta_response_data', store=True, copy=False)</pre></details><details><summary id="f-l10n_eg_uuid">l10n_eg_uuid <span class="position">@ line 21</span></summary><pre>l10n_eg_uuid = fields.Char(string='Document UUID', compute='_compute_eta_response_data', store=True, copy=False)</pre></details><h3>Methods</h3><ul id="m-_auto_init"><li>_auto_init(self) <span class="position">@ line 26</span></li></ul><details><summary id="m-_l10n_eg_edi_exchange_currency_rate">_l10n_eg_edi_exchange_currency_rate(self) <span class="position">@ line 120</span></summary><pre>Calculate the rate based on the balance and amount_currency, so we recuperate the one used at the time</pre></details><details><summary id="m-action_get_eta_invoice_pdf">action_get_eta_invoice_pdf(self) <span class="position">@ line 108</span></summary><pre>This is a pdf with the structure from the government.  While we can use our own format,
some clients appreciate this to verify that all the data is there in case of confusion.</pre></details><ul id="m-action_post_sign_invoices"><li>action_post_sign_invoices(self) <span class="position">@ line 71</span></li></ul><ul id="m-button_draft"><li>button_draft(self) <span class="position">@ line 66</span></li></ul><h2>Inherited: odoo/addons/l10n_ec/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_ec_sri_payment_id">l10n_ec_sri_payment_id <span class="position">@ line 133</span></summary><pre>l10n_ec_sri_payment_id = fields.Many2one(
        comodel_name="l10n_ec.sri.payment",
        string="Payment Method (SRI)",
        help="Ecuador: Payment Methods Defined by the SRI.",
    )</pre></details><h3>Methods</h3><ul id="m-_get_ec_formatted_sequence"><li>_get_ec_formatted_sequence(self, number) <span class="position">@ line 160</span></li></ul><ul id="m-_get_l10n_latam_documents_domain"><li>_get_l10n_latam_documents_domain(self) <span class="position">@ line 148</span></li></ul><ul id="m-_get_last_sequence_domain"><li>_get_last_sequence_domain(self, relaxed) <span class="position">@ line 179</span></li></ul><details><summary id="m-_get_starting_sequence">_get_starting_sequence(self) <span class="position">@ line 168</span></summary><pre>If use documents then will create a new starting sequence using the document type code prefix and the
journal document number with a 8 padding number</pre></details><h2>Inherited: odoo/addons/l10n_de/models/account_move.py</h2><h3>Methods</h3><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 22</span></li></ul><h2>Inherited: odoo/addons/l10n_cz/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-taxable_supply_date">taxable_supply_date <span class="position">@ line 8</span></summary><pre>taxable_supply_date = fields.Date()</pre></details><h2>Inherited: odoo/addons/l10n_cn/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-fapiao">fapiao <span class="position">@ line 16</span></summary><pre>fapiao = fields.Char(string='Fapiao Number', size=8, copy=False, tracking=True)</pre></details><h3>Methods</h3><ul id="m-_count_attachments"><li>_count_attachments(self) <span class="position">@ line 35</span></li></ul><h2>Inherited: odoo/addons/l10n_cl/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_latam_internal_type">l10n_latam_internal_type <span class="position">@ line 14</span></summary><pre>l10n_latam_internal_type = fields.Selection(
        related='l10n_latam_document_type_id.internal_type', string='L10n Latam Internal Type')</pre></details><details><summary id="f-partner_id_vat">partner_id_vat <span class="position">@ line 13</span></summary><pre>partner_id_vat = fields.Char(related='partner_id.vat', string='VAT No')</pre></details><h3>Methods</h3><ul id="m-_check_document_types_post"><li>_check_document_types_post(self) <span class="position">@ line 53</span></li></ul><ul id="m-_get_l10n_latam_documents_domain"><li>_get_l10n_latam_documents_domain(self) <span class="position">@ line 17</span></li></ul><ul id="m-_get_last_sequence_domain"><li>_get_last_sequence_domain(self, relaxed) <span class="position">@ line 114</span></li></ul><ul id="m-_get_name_invoice_report"><li>_get_name_invoice_report(self) <span class="position">@ line 127</span></li></ul><details><summary id="m-_get_starting_sequence">_get_starting_sequence(self) <span class="position">@ line 106</span></summary><pre>If use documents then will create a new starting sequence using the document type code prefix and the
journal document number with a 6 padding number</pre></details><ul id="m-_is_manual_document_number"><li>_is_manual_document_number(self) <span class="position">@ line 171</span></li></ul><ul id="m-_l10n_cl_get_formatted_sequence"><li>_l10n_cl_get_formatted_sequence(self, number) <span class="position">@ line 103</span></li></ul><ul id="m-_l10n_cl_get_invoice_totals_for_report"><li>_l10n_cl_get_invoice_totals_for_report(self) <span class="position">@ line 133</span></li></ul><ul id="m-_l10n_cl_include_sii"><li>_l10n_cl_include_sii(self) <span class="position">@ line 167</span></li></ul><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 99</span></li></ul><h2>Inherited: odoo/addons/l10n_ch/models/account_invoice.py</h2><h3>Fields</h3><details><summary id="f-l10n_ch_is_qr_valid">l10n_ch_is_qr_valid <span class="position">@ line 14</span></summary><pre>l10n_ch_is_qr_valid = fields.Boolean(compute='_compute_l10n_ch_qr_is_valid', help="Determines whether an invoice can be printed as a QR or not")</pre></details><h3>Methods</h3><details><summary id="m-_get_invoice_reference_ch_invoice">_get_invoice_reference_ch_invoice(self) <span class="position">@ line 47</span></summary><pre>This sets QRR reference number which is generated based on customer's `Bank Account` and set it as
`Payment Reference` of the invoice when invoice's journal is using Switzerland's communication standard</pre></details><details><summary id="m-_get_invoice_reference_ch_partner">_get_invoice_reference_ch_partner(self) <span class="position">@ line 54</span></summary><pre>This sets QRR reference number which is generated based on customer's `Bank Account` and set it as
`Payment Reference` of the invoice when invoice's journal is using Switzerland's communication standard</pre></details><ul id="m-_l10n_ch_dispatch_invoices_to_print"><li>_l10n_ch_dispatch_invoices_to_print(self) <span class="position">@ line 99</span></li></ul><details><summary id="m-get_l10n_ch_qrr_number">get_l10n_ch_qrr_number(self) <span class="position">@ line 22</span></summary><pre>Generates the QRR reference.
QRR references are 27 characters long.

The invoice sequence number is used, removing each of its non-digit characters,
and pad the unused spaces on the left of this number with zeros.
The last digit is a checksum (mod10r).</pre></details><details><summary id="m-l10n_ch_action_print_qr">l10n_ch_action_print_qr(self) <span class="position">@ line 80</span></summary><pre>Checks that all invoices can be printed in the QR format.
If so, launches the printing action.
Else, triggers the l10n_ch wizard that will display the informations.</pre></details><h2>Inherited: odoo/addons/l10n_br/models/account_move.py</h2><h3>Methods</h3><details><summary id="m-_compute_l10n_latam_document_type">_compute_l10n_latam_document_type(self) <span class="position">@ line 8</span></summary><pre>Override for debit notes. This sets the same document type as the one on the origin. Cannot
override the defaults in the account.move.debit wizard because l10n_latam_invoice_document explicitly
calls _compute_l10n_latam_document_type() after the debit note is created.</pre></details><details><summary id="m-_get_last_sequence_domain">_get_last_sequence_domain(self, relaxed) <span class="position">@ line 18</span></summary><pre>Override to give sequence names in the same journal their own, independent numbering.</pre></details><h2>Inherited: odoo/addons/l10n_be/models/account_move.py</h2><h3>Methods</h3><details><summary id="m-_get_invoice_reference_be_invoice">_get_invoice_reference_be_invoice(self) <span class="position">@ line 37</span></summary><pre>This computes the reference based on the belgian national standard
OGM-VCS.
The data of the reference is the database id number of the invoice.
For instance, if an invoice is issued with id 654, the check number
is 72 so the reference will be '+++000/0000/65472+++'.</pre></details><details><summary id="m-_get_invoice_reference_be_partner">_get_invoice_reference_be_partner(self) <span class="position">@ line 20</span></summary><pre>This computes the reference based on the belgian national standard
OGM-VCS.
For instance, if an invoice is issued for the partner with internal
reference 'food buyer 654', the digits will be extracted and used as
the data. This will lead to a check number equal to 72 and the
reference will be '+++000/0000/65472+++'.
If no reference is set for the partner, its id in the database will
be used.</pre></details><h2>Inherited: odoo/addons/l10n_au/models/account_move.py</h2><h3>Methods</h3><ul id="m-_get_name_invoice_report"><li>_get_name_invoice_report(self) <span class="position">@ line 8</span></li></ul><h2>Inherited: odoo/addons/l10n_ar_withholding/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_ar_withholding_ids">l10n_ar_withholding_ids <span class="position">@ line 9</span></summary><pre>l10n_ar_withholding_ids = fields.One2many(
        'account.move.line', 'move_id', string='Withholdings',
        compute='_compute_l10n_ar_withholding_ids',
        readonly=True
    )</pre></details><h2>Inherited: odoo/addons/l10n_ar/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-l10n_ar_afip_concept">l10n_ar_afip_concept <span class="position">@ line 29</span></summary><pre>l10n_ar_afip_concept = fields.Selection(
        compute='_compute_l10n_ar_afip_concept', selection='_get_afip_invoice_concepts', string="AFIP Concept",
        help="A concept is suggested regarding the type of the products on the invoice but it is allowed to force a"
        " different type if required.")</pre></details><details><summary id="f-l10n_ar_afip_responsibility_type_id">l10n_ar_afip_responsibility_type_id <span class="position">@ line 23</span></summary><pre>l10n_ar_afip_responsibility_type_id = fields.Many2one(
        'l10n_ar.afip.responsibility.type', string='AFIP Responsibility Type', help='Defined by AFIP to'
        ' identify the type of responsibilities that a person or a legal entity could have and that impacts in the'
        ' type of operations and requirements they need.')</pre></details><details><summary id="f-l10n_ar_afip_service_end">l10n_ar_afip_service_end <span class="position">@ line 34</span></summary><pre>l10n_ar_afip_service_end = fields.Date(string='AFIP Service End Date')</pre></details><details><summary id="f-l10n_ar_afip_service_start">l10n_ar_afip_service_start <span class="position">@ line 33</span></summary><pre>l10n_ar_afip_service_start = fields.Date(string='AFIP Service Start Date')</pre></details><h3>Methods</h3><ul id="m-_check_argentinean_invoice_taxes"><li>_check_argentinean_invoice_taxes(self) <span class="position">@ line 131</span></li></ul><details><summary id="m-_get_afip_invoice_concepts">_get_afip_invoice_concepts(self) <span class="position">@ line 74</span></summary><pre>Return the list of values of the selection field.</pre></details><details><summary id="m-_get_concept">_get_concept(self) <span class="position">@ line 87</span></summary><pre>Method to get the concept of the invoice considering the type of the products on the invoice</pre></details><ul id="m-_get_formatted_sequence"><li>_get_formatted_sequence(self, number) <span class="position">@ line 247</span></li></ul><ul id="m-_get_l10n_latam_documents_domain"><li>_get_l10n_latam_documents_domain(self) <span class="position">@ line 117</span></li></ul><ul id="m-_get_last_sequence_domain"><li>_get_last_sequence_domain(self, relaxed) <span class="position">@ line 259</span></li></ul><ul id="m-_get_name_invoice_report"><li>_get_name_invoice_report(self) <span class="position">@ line 330</span></li></ul><details><summary id="m-_get_starting_sequence">_get_starting_sequence(self) <span class="position">@ line 251</span></summary><pre>If use documents then will create a new starting sequence using the document type code prefix and the
journal document number with a 8 padding number</pre></details><details><summary id="m-_get_vat">_get_vat(self) <span class="position">@ line 304</span></summary><pre>Applies on wsfe web service and in the VAT digital books</pre></details><details><summary id="m-_is_manual_document_number">_is_manual_document_number(self) <span class="position">@ line 36</span></summary><pre>Document number should be manual input by user when the journal use documents and

* if sales journal and not a AFIP pos (liquido producto case)
* if purchase journal and not a AFIP pos (regular case of vendor bills)

All the other cases the number should be automatic set, wiht only one exception, for pre-printed/online AFIP
POS type, the first numeber will be always set manually by the user and then will be computed automatically
from there</pre></details><details><summary id="m-_l10n_ar_get_amounts">_l10n_ar_get_amounts(self, company_currency) <span class="position">@ line 266</span></summary><pre>Method used to prepare data to present amounts and taxes related amounts when creating an
electronic invoice for argentinean and the txt files for digital VAT books. Only take into account the argentinean taxes</pre></details><details><summary id="m-_l10n_ar_get_invoice_totals_for_report">_l10n_ar_get_invoice_totals_for_report(self) <span class="position">@ line 336</span></summary><pre>If the invoice document type indicates that vat should not be detailed in the printed report (result of _l10n_ar_include_vat()) then we overwrite tax_totals field so that includes taxes in the total amount, otherwise it would be showing amount_untaxed in the amount_total</pre></details><ul id="m-_l10n_ar_include_vat"><li>_l10n_ar_include_vat(self) <span class="position">@ line 374</span></li></ul><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 200</span></li></ul><ul id="m-_reverse_moves"><li>_reverse_moves(self, default_values_list, cancel) <span class="position">@ line 212</span></li></ul><details><summary id="m-_set_afip_responsibility">_set_afip_responsibility(self) <span class="position">@ line 156</span></summary><pre>We save the information about the receptor responsability at the time we validate the invoice, this is
necessary because the user can change the responsability after that any time</pre></details><ul id="m-_set_afip_service_dates"><li>_set_afip_service_dates(self) <span class="position">@ line 149</span></li></ul><h2>Inherited: odoo/addons/hr_expense/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-expense_sheet_id">expense_sheet_id <span class="position">@ line 12</span></summary><pre>expense_sheet_id = fields.Many2one(comodel_name='hr.expense.sheet', ondelete='set null', copy=False, index='btree_not_null')</pre></details><h3>Methods</h3><ul id="m-_check_journal_move_type"><li>_check_journal_move_type(self) <span class="position">@ line 26</span></li></ul><ul id="m-_creation_message"><li>_creation_message(self) <span class="position">@ line 29</span></li></ul><ul id="m-_must_delete_all_expense_entries"><li>_must_delete_all_expense_entries(self) <span class="position">@ line 63</span></li></ul><ul id="m-_reverse_moves"><li>_reverse_moves(self, default_values_list, cancel) <span class="position">@ line 56</span></li></ul><ul id="m-action_open_expense_report"><li>action_open_expense_report(self) <span class="position">@ line 14</span></li></ul><h2>Inherited: odoo/addons/event_booth_sale/models/account_move.py</h2><h3>Methods</h3><details><summary id="m-_invoice_paid_hook">_invoice_paid_hook(self) <span class="position">@ line 10</span></summary><pre>When an invoice linked to a sales order selling registrations is
paid, update booths accordingly as they are booked when invoice is paid.</pre></details><h2>Inherited: odoo/addons/account_peppol/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-peppol_is_demo_uuid">peppol_is_demo_uuid <span class="position">@ line 26</span></summary><pre>peppol_is_demo_uuid = fields.Boolean(compute="_compute_peppol_is_demo_uuid")</pre></details><details><summary id="f-peppol_message_uuid">peppol_message_uuid <span class="position">@ line 11</span></summary><pre>peppol_message_uuid = fields.Char(string='PEPPOL message ID')</pre></details><details><summary id="f-peppol_move_state">peppol_move_state <span class="position">@ line 12</span></summary><pre>peppol_move_state = fields.Selection(
        selection=[
            ('ready', 'Ready to send'),
            ('to_send', 'Queued'),
            ('skipped', 'Skipped'),
            ('processing', 'Pending Reception'),
            ('canceled', 'Cancelled'),
            ('done', 'Done'),
            ('error', 'Error'),
        ],
        compute='_compute_peppol_move_state', store=True,
        string='PEPPOL status',
        copy=False,
    )</pre></details><h3>Methods</h3><ul id="m-action_cancel_peppol_documents"><li>action_cancel_peppol_documents(self) <span class="position">@ line 41</span></li></ul><h2>Inherited: odoo/addons/account_payment/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-amount_paid">amount_paid <span class="position">@ line 23</span></summary><pre>amount_paid = fields.Monetary(
        string="Amount paid",
        compute='_compute_amount_paid'
    )</pre></details><details><summary id="f-authorized_transaction_ids">authorized_transaction_ids <span class="position">@ line 16</span></summary><pre>authorized_transaction_ids = fields.Many2many(
        string="Authorized Transactions", comodel_name='payment.transaction',
        compute='_compute_authorized_transaction_ids', readonly=True, copy=False,
        compute_sudo=True)</pre></details><details><summary id="f-transaction_count">transaction_count <span class="position">@ line 20</span></summary><pre>transaction_count = fields.Integer(
        string="Transaction Count", compute='_compute_transaction_count'
    )</pre></details><details><summary id="f-transaction_ids">transaction_ids <span class="position">@ line 12</span></summary><pre>transaction_ids = fields.Many2many(
        string="Transactions", comodel_name='payment.transaction',
        relation='account_invoice_transaction_rel', column1='invoice_id', column2='transaction_id',
        readonly=True, copy=False)</pre></details><h3>Methods</h3><ul id="m-_get_default_payment_link_values"><li>_get_default_payment_link_values(self) <span class="position">@ line 102</span></li></ul><ul id="m-_has_to_be_paid"><li>_has_to_be_paid(self) <span class="position">@ line 51</span></li></ul><ul id="m-action_view_payment_transactions"><li>action_view_payment_transactions(self) <span class="position">@ line 90</span></li></ul><ul id="m-get_portal_last_transaction"><li>get_portal_last_transaction(self) <span class="position">@ line 71</span></li></ul><details><summary id="m-payment_action_capture">payment_action_capture(self) <span class="position">@ line 75</span></summary><pre>Capture all transactions linked to this invoice.</pre></details><details><summary id="m-payment_action_void">payment_action_void(self) <span class="position">@ line 83</span></summary><pre>Void all transactions linked to this invoice.</pre></details><h2>Inherited: odoo/addons/account_fleet/models/account_move.py</h2><h3>Methods</h3><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 9</span></li></ul><h2>Inherited: odoo/addons/account_edi_ubl_cii/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-ubl_cii_xml_file">ubl_cii_xml_file <span class="position">@ line 14</span></summary><pre>ubl_cii_xml_file = fields.Binary(
        attachment=True,
        string="UBL/CII File",
        copy=False,
    )</pre></details><details><summary id="f-ubl_cii_xml_id">ubl_cii_xml_id <span class="position">@ line 8</span></summary><pre>ubl_cii_xml_id = fields.Many2one(
        comodel_name='ir.attachment',
        string="Attachment",
        compute=lambda self: self._compute_linked_attachment_id('ubl_cii_xml_id', 'ubl_cii_xml_file'),
        depends=['ubl_cii_xml_id']
    )</pre></details><h3>Methods</h3><ul id="m-_get_edi_decoder"><li>_get_edi_decoder(self, file_data, new) <span class="position">@ line 47</span></li></ul><ul id="m-_need_ubl_cii_xml"><li>_need_ubl_cii_xml(self) <span class="position">@ line 56</span></li></ul><h2>Inherited: odoo/addons/account_edi/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-edi_blocking_level">edi_blocking_level <span class="position">@ line 27</span></summary><pre>edi_blocking_level = fields.Selection(
        selection=[('info', 'Info'), ('warning', 'Warning'), ('error', 'Error')],
        compute='_compute_edi_error_message')</pre></details><details><summary id="f-edi_document_ids">edi_document_ids <span class="position">@ line 15</span></summary><pre>edi_document_ids = fields.One2many(
        comodel_name='account.edi.document',
        inverse_name='move_id')</pre></details><details><summary id="f-edi_error_count">edi_error_count <span class="position">@ line 24</span></summary><pre>edi_error_count = fields.Integer(
        compute='_compute_edi_error_count',
        help='How many EDIs are in error for this move?')</pre></details><details><summary id="f-edi_error_message">edi_error_message <span class="position">@ line 30</span></summary><pre>edi_error_message = fields.Html(
        compute='_compute_edi_error_message')</pre></details><details><summary id="f-edi_show_abandon_cancel_button">edi_show_abandon_cancel_button <span class="position">@ line 37</span></summary><pre>edi_show_abandon_cancel_button = fields.Boolean(
        compute='_compute_edi_show_abandon_cancel_button')</pre></details><details><summary id="f-edi_show_cancel_button">edi_show_cancel_button <span class="position">@ line 35</span></summary><pre>edi_show_cancel_button = fields.Boolean(
        compute='_compute_edi_show_cancel_button')</pre></details><details><summary id="f-edi_state">edi_state <span class="position">@ line 18</span></summary><pre>edi_state = fields.Selection(
        selection=[('to_send', 'To Send'), ('sent', 'Sent'), ('to_cancel', 'To Cancel'), ('cancelled', 'Cancelled')],
        string="Electronic invoicing",
        store=True,
        compute='_compute_edi_state',
        help='The aggregated state of all the EDIs with web-service of this move')</pre></details><details><summary id="f-edi_web_services_to_process">edi_web_services_to_process <span class="position">@ line 33</span></summary><pre>edi_web_services_to_process = fields.Text(
        compute='_compute_edi_web_services_to_process')</pre></details><h3>Methods</h3><ul id="m-_get_edi_attachment"><li>_get_edi_attachment(self, edi_format) <span class="position">@ line 321</span></li></ul><ul id="m-_get_edi_document"><li>_get_edi_document(self, edi_format) <span class="position">@ line 318</span></li></ul><ul id="m-_is_ready_to_be_sent"><li>_is_ready_to_be_sent(self) <span class="position">@ line 210</span></li></ul><ul id="m-_message_set_main_attachment_id"><li>_message_set_main_attachment_id(self, attachment_ids) <span class="position">@ line 325</span></li></ul><ul id="m-_post"><li>_post(self, soft) <span class="position">@ line 221</span></li></ul><details><summary id="m-_prepare_edi_tax_details">_prepare_edi_tax_details(self, filter_to_apply, filter_invl_to_apply, grouping_key_generator) <span class="position">@ line 143</span></summary><pre>Compute amounts related to taxes for the current invoice.

:param filter_to_apply:         Optional filter to exclude some tax values from the final results.
The filter is defined as a method getting a dictionary as parameter
representing the tax values for a single repartition line.
This dictionary contains:

'base_line_id':             An account.move.line record.
'tax_id':                   An account.tax record.
'tax_repartition_line_id':  An account.tax.repartition.line record.
'base_amount':              The tax base amount expressed in company currency.
'tax_amount':               The tax amount expressed in company currency.
'base_amount_currency':     The tax base amount expressed in foreign currency.
'tax_amount_currency':      The tax amount expressed in foreign currency.

If the filter is returning False, it means the current tax values will be
ignored when computing the final results.

:param filter_invl_to_apply:    Optional filter to exclude some invoice lines.

:param grouping_key_generator:  Optional method used to group tax values together. By default, the tax values
are grouped by tax. This parameter is a method getting a dictionary as parameter
(same signature as 'filter_to_apply').

This method must returns a dictionary where values will be used to create the
grouping_key to aggregate tax values together. The returned dictionary is added
to each tax details in order to retrieve the full grouping_key later.

:return:                        The full tax details for the current invoice and for each invoice line
separately. The returned dictionary is the following:

'base_amount':              The total tax base amount in company currency for the whole invoice.
'tax_amount':               The total tax amount in company currency for the whole invoice.
'base_amount_currency':     The total tax base amount in foreign currency for the whole invoice.
'tax_amount_currency':      The total tax amount in foreign currency for the whole invoice.
'tax_details':              A mapping of each grouping key (see 'grouping_key_generator') to a dictionary
containing:

'base_amount':              The tax base amount in company currency for the current group.
'tax_amount':               The tax amount in company currency for the current group.
'base_amount_currency':     The tax base amount in foreign currency for the current group.
'tax_amount_currency':      The tax amount in foreign currency for the current group.
'group_tax_details':        The list of all tax values aggregated into this group.

'tax_details_per_record': A mapping of each invoice line to a dictionary containing:

'base_amount':          The total tax base amount in company currency for the whole invoice line.
'tax_amount':           The total tax amount in company currency for the whole invoice line.
'base_amount_currency': The total tax base amount in foreign currency for the whole invoice line.
'tax_amount_currency':  The total tax amount in foreign currency for the whole invoice line.
'tax_details':          A mapping of each grouping key (see 'grouping_key_generator') to a dictionary
containing:

'base_amount':          The tax base amount in company currency for the current group.
'tax_amount':           The tax amount in company currency for the current group.
'base_amount_currency': The tax base amount in foreign currency for the current group.
'tax_amount_currency':  The tax amount in foreign currency for the current group.
'group_tax_details':    The list of all tax values aggregated into this group.</pre></details><details><summary id="m-_process_attachments_for_template_post">_process_attachments_for_template_post(self, mail_template) <span class="position">@ line 356</span></summary><pre>Add Edi attachments to templates.</pre></details><details><summary id="m-_retry_edi_documents_error_hook">_retry_edi_documents_error_hook(self) <span class="position">@ line 341</span></summary><pre>Hook called when edi_documents are retried. For example, when it's needed to clean a field.
TO OVERRIDE</pre></details><ul id="m-action_process_edi_web_services"><li>action_process_edi_web_services(self, with_commit) <span class="position">@ line 337</span></li></ul><ul id="m-action_retry_edi_documents_error"><li>action_retry_edi_documents_error(self) <span class="position">@ line 347</span></li></ul><details><summary id="m-button_abandon_cancel_posted_posted_moves">button_abandon_cancel_posted_posted_moves(self) <span class="position">@ line 302</span></summary><pre>Cancel the request for cancellation of the EDI.</pre></details><ul id="m-button_cancel"><li>button_cancel(self) <span class="position">@ line 254</span></li></ul><details><summary id="m-button_cancel_posted_moves">button_cancel_posted_moves(self) <span class="position">@ line 282</span></summary><pre>Mark the edi.document related to this move to be canceled.</pre></details><ul id="m-button_draft"><li>button_draft(self) <span class="position">@ line 266</span></li></ul><ul id="m-button_process_edi_web_services"><li>button_process_edi_web_services(self) <span class="position">@ line 334</span></li></ul><h2>Inherited: odoo/addons/account_debit_note/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-debit_note_count">debit_note_count <span class="position">@ line 12</span></summary><pre>debit_note_count = fields.Integer('Number of Debit Notes', compute='_compute_debit_count')</pre></details><details><summary id="f-debit_note_ids">debit_note_ids <span class="position">@ line 10</span></summary><pre>debit_note_ids = fields.One2many('account.move', 'debit_origin_id', 'Debit Notes',
                                     help="The debit notes created for this invoice")</pre></details><details><summary id="f-debit_origin_id">debit_origin_id <span class="position">@ line 9</span></summary><pre>debit_origin_id = fields.Many2one('account.move', 'Original Invoice Debited', readonly=True, copy=False, index='btree_not_null')</pre></details><h3>Methods</h3><ul id="m-action_debit_note"><li>action_debit_note(self) <span class="position">@ line 32</span></li></ul><ul id="m-action_view_debit_notes"><li>action_view_debit_notes(self) <span class="position">@ line 22</span></li></ul><h2>Inherited: odoo/addons/account_check_printing/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-preferred_payment_method_id">preferred_payment_method_id <span class="position">@ line 12</span></summary><pre>preferred_payment_method_id = fields.Many2one(
        string="Preferred Payment Method",
        comodel_name='account.payment.method',
        compute='_compute_preferred_payment_method_idd',
        store=True,
    )</pre></details><h3>Methods</h3><details><summary id="m-_auto_init">_auto_init(self) <span class="position">@ line 19</span></summary><pre>Create column for `preferred_payment_method_id` to avoid having it
computed by the ORM on installation. Since `property_payment_method_id` is
introduced in this module, there is no need for UPDATE</pre></details><h2>Inherited: odoo/addons/account_audit_trail/models/account_move.py</h2><h3>Methods</h3><ul id="m-unlink"><li>unlink(self) <span class="position">@ line 24</span></li></ul><h2>Inherited: odoo/addons/account/models/account_payment.py</h2><h3>Fields</h3><details><summary id="f-payment_ids">payment_ids <span class="position">@ line 1141</span></summary><pre>payment_ids = fields.One2many('account.payment', 'move_id', string='Payments')</pre></details><h2>Inherited: odoo/addons/account/models/account_move.py</h2><h3>Fields</h3><details><summary id="f-abnormal_amount_warning">abnormal_amount_warning <span class="position">@ line 616</span></summary><pre>abnormal_amount_warning = fields.Text(compute='_compute_abnormal_warnings')</pre></details><details><summary id="f-abnormal_date_warning">abnormal_date_warning <span class="position">@ line 617</span></summary><pre>abnormal_date_warning = fields.Text(compute='_compute_abnormal_warnings')</pre></details><details><summary id="f-always_tax_exigible">always_tax_exigible <span class="position">@ line 218</span></summary><pre>always_tax_exigible = fields.Boolean(compute='_compute_always_tax_exigible', store=True, readonly=False)</pre></details><details><summary id="f-amount_residual">amount_residual <span class="position">@ line 433</span></summary><pre>amount_residual = fields.Monetary(
        string='Amount Due',
        compute='_compute_amount', store=True,
    )</pre></details><details><summary id="f-amount_residual_signed">amount_residual_signed <span class="position">@ line 457</span></summary><pre>amount_residual_signed = fields.Monetary(
        string='Amount Due Signed',
        compute='_compute_amount', store=True,
        currency_field='company_currency_id',
    )</pre></details><details><summary id="f-amount_tax">amount_tax <span class="position">@ line 424</span></summary><pre>amount_tax = fields.Monetary(
        string='Tax',
        compute='_compute_amount', store=True, readonly=True,
    )</pre></details><details><summary id="f-amount_tax_signed">amount_tax_signed <span class="position">@ line 442</span></summary><pre>amount_tax_signed = fields.Monetary(
        string='Tax Signed',
        compute='_compute_amount', store=True, readonly=True,
        currency_field='company_currency_id',
    )</pre></details><details><summary id="f-amount_total">amount_total <span class="position">@ line 428</span></summary><pre>amount_total = fields.Monetary(
        string='Total',
        compute='_compute_amount', store=True, readonly=True,
        inverse='_inverse_amount_total',
    )</pre></details><details><summary id="f-amount_total_in_currency_signed">amount_total_in_currency_signed <span class="position">@ line 452</span></summary><pre>amount_total_in_currency_signed = fields.Monetary(
        string='Total in Currency Signed',
        compute='_compute_amount', store=True, readonly=True,
        currency_field='currency_id',
    )</pre></details><details><summary id="f-amount_total_signed">amount_total_signed <span class="position">@ line 447</span></summary><pre>amount_total_signed = fields.Monetary(
        string='Total Signed',
        compute='_compute_amount', store=True, readonly=True,
        currency_field='company_currency_id',
    )</pre></details><details><summary id="f-amount_total_words">amount_total_words <span class="position">@ line 476</span></summary><pre>amount_total_words = fields.Char(
        string="Amount total in words",
        compute="_compute_amount_total_words",
    )</pre></details><details><summary id="f-amount_untaxed">amount_untaxed <span class="position">@ line 419</span></summary><pre>amount_untaxed = fields.Monetary(
        string='Untaxed Amount',
        compute='_compute_amount', store=True, readonly=True,
        tracking=True,
    )</pre></details><details><summary id="f-amount_untaxed_signed">amount_untaxed_signed <span class="position">@ line 437</span></summary><pre>amount_untaxed_signed = fields.Monetary(
        string='Untaxed Amount Signed',
        compute='_compute_amount', store=True, readonly=True,
        currency_field='company_currency_id',
    )</pre></details><details><summary id="f-attachment_ids">attachment_ids <span class="position">@ line 261</span></summary><pre>attachment_ids = fields.One2many('ir.attachment', 'res_id', domain=[('res_model', '=', 'account.move')], string='Attachments')</pre></details><details><summary id="f-auto_post">auto_post <span class="position">@ line 221</span></summary><pre>auto_post = fields.Selection(
        string='Auto-post',
        selection=[
            ('no', 'No'),
            ('at_date', 'At Date'),
            ('monthly', 'Monthly'),
            ('quarterly', 'Quarterly'),
            ('yearly', 'Yearly'),
        ],
        default='no', required=True, copy=False,
        help='Specify whether this entry is posted automatically on its accounting date, and any similar recurring invoices.')</pre></details><details><summary id="f-auto_post_origin_id">auto_post_origin_id <span class="position">@ line 237</span></summary><pre>auto_post_origin_id = fields.Many2one(
        comodel_name='account.move',
        string='First recurring entry',
        readonly=True, copy=False,
        index='btree_not_null',
    )</pre></details><details><summary id="f-auto_post_until">auto_post_until <span class="position">@ line 232</span></summary><pre>auto_post_until = fields.Date(
        string='Auto-post until',
        copy=False,
        compute='_compute_auto_post_until', store=True, readonly=False,
        help='This recurring move will be posted up to and including this date.')</pre></details><details><summary id="f-bank_partner_id">bank_partner_id <span class="position">@ line 587</span></summary><pre>bank_partner_id = fields.Many2one(
        comodel_name='res.partner',
        compute='_compute_bank_partner_id',
        help='Technical field to get the domain on the bank',
    )</pre></details><details><summary id="f-commercial_partner_id">commercial_partner_id <span class="position">@ line 323</span></summary><pre>commercial_partner_id = fields.Many2one(
        'res.partner',
        string='Commercial Entity',
        compute='_compute_commercial_partner_id', store=True, readonly=True,
        ondelete='restrict',
    )</pre></details><details><summary id="f-company_currency_id">company_currency_id <span class="position">@ line 395</span></summary><pre>company_currency_id = fields.Many2one(
        string='Company Currency',
        related='company_id.currency_id', readonly=True,
    )</pre></details><details><summary id="f-company_id">company_id <span class="position">@ line 159</span></summary><pre>company_id = fields.Many2one(
        comodel_name='res.company',
        string='Company',
        compute='_compute_company_id', inverse='_inverse_company_id', store=True, readonly=False, precompute=True,
        index=True,
    )</pre></details><details><summary id="f-country_code">country_code <span class="position">@ line 260</span></summary><pre>country_code = fields.Char(related='company_id.account_fiscal_country_id.code', readonly=True)</pre></details><details><summary id="f-currency_id">currency_id <span class="position">@ line 399</span></summary><pre>currency_id = fields.Many2one(
        'res.currency',
        string='Currency',
        tracking=True,
        required=True,
        compute='_compute_currency_id', inverse='_inverse_currency_id', store=True, readonly=False, precompute=True,
    )</pre></details><details><summary id="f-date">date <span class="position">@ line 109</span></summary><pre>date = fields.Date(
        string='Date',
        index=True,
        compute='_compute_date', store=True, required=True, readonly=False, precompute=True,
        copy=False,
        tracking=True,
    )</pre></details><details><summary id="f-delivery_date">delivery_date <span class="position">@ line 292</span></summary><pre>delivery_date = fields.Date(
        string='Delivery Date',
        copy=False,
        store=True,
        compute='_compute_delivery_date',
    )</pre></details><details><summary id="f-direction_sign">direction_sign <span class="position">@ line 415</span></summary><pre>direction_sign = fields.Integer(
        compute='_compute_direction_sign',
        help="Multiplicator depending on the document type, to convert a price into a balance",
    )</pre></details><details><summary id="f-display_inactive_currency_warning">display_inactive_currency_warning <span class="position">@ line 595</span></summary><pre>display_inactive_currency_warning = fields.Boolean(compute="_compute_display_inactive_currency_warning")</pre></details><details><summary id="f-display_qr_code">display_qr_code <span class="position">@ line 366</span></summary><pre>display_qr_code = fields.Boolean(
        string="Display QR-code",
        compute='_compute_display_qr_code',
    )</pre></details><details><summary id="f-duplicated_ref_ids">duplicated_ref_ids <span class="position">@ line 608</span></summary><pre>duplicated_ref_ids = fields.Many2many(comodel_name='account.move', compute='_compute_duplicated_ref_ids')</pre></details><details><summary id="f-fiscal_position_id">fiscal_position_id <span class="position">@ line 347</span></summary><pre>fiscal_position_id = fields.Many2one(
        'account.fiscal.position',
        string='Fiscal Position',
        check_company=True,
        compute='_compute_fiscal_position_id', store=True, readonly=False, precompute=True,
        ondelete="restrict",
        help="Fiscal positions are used to adapt taxes and accounts for particular "
             "customers or sales orders/invoices. The default value comes from the customer.",
    )</pre></details><details><summary id="f-has_reconciled_entries">has_reconciled_entries <span class="position">@ line 601</span></summary><pre>has_reconciled_entries = fields.Boolean(compute="_compute_has_reconciled_entries")</pre></details><details><summary id="f-hide_post_button">hide_post_button <span class="position">@ line 243</span></summary><pre>hide_post_button = fields.Boolean(compute='_compute_hide_post_button', readonly=True)</pre></details><details><summary id="f-highest_name">highest_name <span class="position">@ line 256</span></summary><pre>highest_name = fields.Char(compute='_compute_highest_name')</pre></details><details><summary id="f-inalterable_hash">inalterable_hash <span class="position">@ line 266</span></summary><pre>inalterable_hash = fields.Char(string="Inalterability Hash", readonly=True, copy=False, index='btree_not_null')</pre></details><details><summary id="f-incoterm_location">incoterm_location <span class="position">@ line 560</span></summary><pre>incoterm_location = fields.Char(
        string='Incoterm Location',
        compute='_compute_incoterm_location',
        readonly=False,
        store=True,
    )</pre></details><details><summary id="f-invoice_cash_rounding_id">invoice_cash_rounding_id <span class="position">@ line 566</span></summary><pre>invoice_cash_rounding_id = fields.Many2one(
        comodel_name='account.cash.rounding',
        string='Cash Rounding Method',
        help='Defines the smallest coinage of the currency that can be used to pay by cash.',
    )</pre></details><details><summary id="f-invoice_currency_rate">invoice_currency_rate <span class="position">@ line 406</span></summary><pre>invoice_currency_rate = fields.Float(
        string='Currency Rate',
        compute='_compute_invoice_currency_rate', store=True, precompute=True,
        copy=False,
        digits=0,
        help="Currency rate from company currency to document currency.",
    )</pre></details><details><summary id="f-invoice_date">invoice_date <span class="position">@ line 281</span></summary><pre>invoice_date = fields.Date(
        string='Invoice/Bill Date',
        index=True,
        copy=False,
    )</pre></details><details><summary id="f-invoice_date_due">invoice_date_due <span class="position">@ line 286</span></summary><pre>invoice_date_due = fields.Date(
        string='Due Date',
        compute='_compute_invoice_date_due', store=True, readonly=False,
        index=True,
        copy=False,
    )</pre></details><details><summary id="f-invoice_filter_type_domain">invoice_filter_type_domain <span class="position">@ line 586</span></summary><pre>invoice_filter_type_domain = fields.Char(compute='_compute_invoice_filter_type_domain')</pre></details><details><summary id="f-invoice_has_outstanding">invoice_has_outstanding <span class="position">@ line 384</span></summary><pre>invoice_has_outstanding = fields.Boolean(
        groups="account.group_account_invoice,account.group_account_readonly",
        compute='_compute_payments_widget_to_reconcile_info',
    )</pre></details><details><summary id="f-invoice_incoterm_id">invoice_incoterm_id <span class="position">@ line 553</span></summary><pre>invoice_incoterm_id = fields.Many2one(
        comodel_name='account.incoterms',
        string='Incoterm',
        default=lambda self: self.env.company.incoterm_id,
        help='International Commercial Terms are a series of predefined commercial '
             'terms used in international transactions.',
    )</pre></details><details><summary id="f-invoice_line_ids">invoice_line_ids <span class="position">@ line 272</span></summary><pre>invoice_line_ids = fields.One2many(  # /!\ invoice_line_ids is just a subset of line_ids.
        'account.move.line',
        'move_id',
        string='Invoice lines',
        copy=False,
        domain=[('display_type', 'in', ('product', 'line_section', 'line_note'))],
    )</pre></details><details><summary id="f-invoice_origin">invoice_origin <span class="position">@ line 547</span></summary><pre>invoice_origin = fields.Char(
        string='Origin',
        readonly=True,
        tracking=True,
        help="The document(s) that generated the invoice.",
    )</pre></details><details><summary id="f-invoice_outstanding_credits_debits_widget">invoice_outstanding_credits_debits_widget <span class="position">@ line 379</span></summary><pre>invoice_outstanding_credits_debits_widget = fields.Binary(
        groups="account.group_account_invoice,account.group_account_readonly",
        compute='_compute_payments_widget_to_reconcile_info',
        exportable=False,
    )</pre></details><details><summary id="f-invoice_partner_display_name">invoice_partner_display_name <span class="position">@ line 501</span></summary><pre>invoice_partner_display_name = fields.Char(compute='_compute_invoice_partner_display_info', store=True)</pre></details><details><summary id="f-invoice_payment_term_id">invoice_payment_term_id <span class="position">@ line 299</span></summary><pre>invoice_payment_term_id = fields.Many2one(
        comodel_name='account.payment.term',
        string='Payment Terms',
        compute='_compute_invoice_payment_term_id', store=True, readonly=False, precompute=True,
        inverse='_inverse_invoice_payment_term_id',
        check_company=True,
    )</pre></details><details><summary id="f-invoice_payments_widget">invoice_payments_widget <span class="position">@ line 388</span></summary><pre>invoice_payments_widget = fields.Binary(
        groups="account.group_account_invoice,account.group_account_readonly",
        compute='_compute_payments_widget_reconciled_info',
        exportable=False,
    )</pre></details><details><summary id="f-invoice_pdf_report_file">invoice_pdf_report_file <span class="position">@ line 578</span></summary><pre>invoice_pdf_report_file = fields.Binary(
        attachment=True,
        string="PDF File",
        copy=False,
    )</pre></details><details><summary id="f-invoice_pdf_report_id">invoice_pdf_report_id <span class="position">@ line 572</span></summary><pre>invoice_pdf_report_id = fields.Many2one(
        comodel_name='ir.attachment',
        string="PDF Attachment",
        compute=lambda self: self._compute_linked_attachment_id('invoice_pdf_report_id', 'invoice_pdf_report_file'),
        depends=['invoice_pdf_report_file']
    )</pre></details><details><summary id="f-invoice_source_email">invoice_source_email <span class="position">@ line 500</span></summary><pre>invoice_source_email = fields.Char(string='Source Email', tracking=True)</pre></details><details><summary id="f-invoice_user_id">invoice_user_id <span class="position">@ line 536</span></summary><pre>invoice_user_id = fields.Many2one(
        string='Salesperson',
        comodel_name='res.users',
        copy=False,
        tracking=True,
        compute='_compute_invoice_default_sale_person',
        store=True,
        readonly=False,
    )</pre></details><details><summary id="f-invoice_vendor_bill_id">invoice_vendor_bill_id <span class="position">@ line 493</span></summary><pre>invoice_vendor_bill_id = fields.Many2one(
        'account.move',
        store=False,
        check_company=True,
        string='Vendor Bill',
        help="Auto-complete from a past bill.",
    )</pre></details><details><summary id="f-is_being_sent">is_being_sent <span class="position">@ line 523</span></summary><pre>is_being_sent = fields.Boolean(
        help="Is the move being sent asynchronously",
        compute='_compute_is_being_sent'
    )</pre></details><details><summary id="f-is_move_sent">is_move_sent <span class="position">@ line 517</span></summary><pre>is_move_sent = fields.Boolean(
        readonly=True,
        copy=False,
        tracking=True,
        help="It indicates that the invoice/payment has been sent or the PDF has been generated.",
    )</pre></details><details><summary id="f-is_storno">is_storno <span class="position">@ line 147</span></summary><pre>is_storno = fields.Boolean(
        compute='_compute_is_storno', store=True, readonly=False,
        copy=False,
    )</pre></details><details><summary id="f-journal_id">journal_id <span class="position">@ line 151</span></summary><pre>journal_id = fields.Many2one(
        'account.journal',
        string='Journal',
        compute='_compute_journal_id', inverse='_inverse_journal_id', store=True, readonly=False, precompute=True,
        required=True,
        check_company=True,
        domain="[('id', 'in', suitable_journal_ids)]",
    )</pre></details><details><summary id="f-line_ids">line_ids <span class="position">@ line 165</span></summary><pre>line_ids = fields.One2many(
        'account.move.line',
        'move_id',
        string='Journal Items',
        copy=True,
    )</pre></details><details><summary id="f-made_sequence_hole">made_sequence_hole <span class="position">@ line 257</span></summary><pre>made_sequence_hole = fields.Boolean(compute='_compute_made_sequence_hole', search="_search_made_sequence_hole")</pre></details><details><summary id="f-move_sent_values">move_sent_values <span class="position">@ line 528</span></summary><pre>move_sent_values = fields.Selection(
        selection=[
            ('sent', 'Sent'),
            ('not_sent', 'Not Sent'),
        ],
        string='Sent',
        compute='compute_move_sent_values',
    )</pre></details><details><summary id="f-move_type">move_type <span class="position">@ line 129</span></summary><pre>move_type = fields.Selection(
        selection=[
            ('entry', 'Journal Entry'),
            ('out_invoice', 'Customer Invoice'),
            ('out_refund', 'Customer Credit Note'),
            ('in_invoice', 'Vendor Bill'),
            ('in_refund', 'Vendor Credit Note'),
            ('out_receipt', 'Sales Receipt'),
            ('in_receipt', 'Purchase Receipt'),
        ],
        string='Type',
        required=True,
        readonly=True,
        tracking=True,
        change_default=True,
        index=True,
        default="entry",
    )</pre></details><details><summary id="f-name">name <span class="position">@ line 96</span></summary><pre>name = fields.Char(
        string='Number',
        compute='_compute_name', inverse='_inverse_name', readonly=False, store=True,
        copy=False,
        tracking=True,
        index='trigram',
    )</pre></details><details><summary id="f-narration">narration <span class="position">@ line 513</span></summary><pre>narration = fields.Html(
        string='Terms and Conditions',
        compute='_compute_narration', store=True, readonly=False,
    )</pre></details><details><summary id="f-need_cancel_request">need_cancel_request <span class="position">@ line 609</span></summary><pre>need_cancel_request = fields.Boolean(compute='_compute_need_cancel_request')</pre></details><details><summary id="f-needed_terms">needed_terms <span class="position">@ line 306</span></summary><pre>needed_terms = fields.Binary(compute='_compute_needed_terms', exportable=False)</pre></details><details><summary id="f-needed_terms_dirty">needed_terms_dirty <span class="position">@ line 307</span></summary><pre>needed_terms_dirty = fields.Boolean(compute='_compute_needed_terms')</pre></details><details><summary id="f-partner_bank_id">partner_bank_id <span class="position">@ line 336</span></summary><pre>partner_bank_id = fields.Many2one(
        'res.partner.bank',
        string='Recipient Bank',
        compute='_compute_partner_bank_id', store=True, readonly=False,
        help="Bank Account Number to which the invoice will be paid. "
             "A Company bank account if this is a Customer Invoice or Vendor Credit Note, "
             "otherwise a Partner bank account number.",
        check_company=True,
        tracking=True,
        ondelete='restrict',
    )</pre></details><details><summary id="f-partner_credit">partner_credit <span class="position">@ line 607</span></summary><pre>partner_credit = fields.Monetary(compute='_compute_partner_credit')</pre></details><details><summary id="f-partner_credit_warning">partner_credit_warning <span class="position">@ line 603</span></summary><pre>partner_credit_warning = fields.Text(
        compute='_compute_partner_credit_warning',
        groups="account.group_account_invoice,account.group_account_readonly",
    )</pre></details><details><summary id="f-partner_id">partner_id <span class="position">@ line 312</span></summary><pre>partner_id = fields.Many2one(
        'res.partner',
        string='Partner',
        readonly=False,
        tracking=True,
        inverse='_inverse_partner_id',
        check_company=True,
        change_default=True,
        index=True,
        ondelete='restrict',
    )</pre></details><details><summary id="f-partner_shipping_id">partner_shipping_id <span class="position">@ line 329</span></summary><pre>partner_shipping_id = fields.Many2one(
        comodel_name='res.partner',
        string='Delivery Address',
        compute='_compute_partner_shipping_id', store=True, readonly=False, precompute=True,
        check_company=True,
        help="The delivery address will be used in the computation of the fiscal position.",
    )</pre></details><details><summary id="f-payment_id">payment_id <span class="position">@ line 173</span></summary><pre>payment_id = fields.Many2one(
        comodel_name='account.payment',
        string="Payment",
        index='btree_not_null',
        copy=False,
        check_company=True,
    )</pre></details><details><summary id="f-payment_reference">payment_reference <span class="position">@ line 358</span></summary><pre>payment_reference = fields.Char(
        string='Payment Reference',
        index='trigram',
        copy=False,
        help="The payment reference to set on journal items.",
        tracking=True,
        compute='_compute_payment_reference', inverse='_inverse_payment_reference', store=True, readonly=False,
    )</pre></details><details><summary id="f-payment_state">payment_state <span class="position">@ line 469</span></summary><pre>payment_state = fields.Selection(
        selection=PAYMENT_STATE_SELECTION,
        string="Payment Status",
        compute='_compute_payment_state', store=True, readonly=True,
        copy=False,
        tracking=True,
    )</pre></details><details><summary id="f-payment_term_details">payment_term_details <span class="position">@ line 612</span></summary><pre>payment_term_details = fields.Binary(compute="_compute_payment_term_details", exportable=False)</pre></details><details><summary id="f-posted_before">posted_before <span class="position">@ line 251</span></summary><pre>posted_before = fields.Boolean(copy=False)</pre></details><details><summary id="f-qr_code_method">qr_code_method <span class="position">@ line 370</span></summary><pre>qr_code_method = fields.Selection(
        string="Payment QR-code", copy=False,
        selection=lambda self: self.env['res.partner.bank'].get_available_qr_methods_in_sequence(),
        help="Type of QR-code to be generated for the payment of this invoice, "
             "when printing it. If left blank, the first available and usable method "
             "will be used.",
    )</pre></details><details><summary id="f-quick_edit_mode">quick_edit_mode <span class="position">@ line 504</span></summary><pre>quick_edit_mode = fields.Boolean(compute='_compute_quick_edit_mode')</pre></details><details><summary id="f-quick_edit_total_amount">quick_edit_total_amount <span class="position">@ line 505</span></summary><pre>quick_edit_total_amount = fields.Monetary(
        string='Total (Tax inc.)',
        help='Use this field to encode the total amount of the invoice.\n'
             'Odoo will automatically create one invoice line with default values to match it.',
    )</pre></details><details><summary id="f-quick_encoding_vals">quick_encoding_vals <span class="position">@ line 510</span></summary><pre>quick_encoding_vals = fields.Binary(compute='_compute_quick_encoding_vals', exportable=False)</pre></details><details><summary id="f-ref">ref <span class="position">@ line 103</span></summary><pre>ref = fields.Char(
        string='Reference',
        copy=False,
        tracking=True,
        index='trigram',
    )</pre></details><details><summary id="f-restrict_mode_hash_table">restrict_mode_hash_table <span class="position">@ line 264</span></summary><pre>restrict_mode_hash_table = fields.Boolean(related='journal_id.restrict_mode_hash_table')</pre></details><details><summary id="f-reversal_move_id">reversal_move_id <span class="position">@ line 490</span></summary><pre>reversal_move_id = fields.One2many('account.move', 'reversed_entry_id')</pre></details><details><summary id="f-reversed_entry_id">reversed_entry_id <span class="position">@ line 482</span></summary><pre>reversed_entry_id = fields.Many2one(
        comodel_name='account.move',
        string="Reversal of",
        index='btree_not_null',
        readonly=True,
        copy=False,
        check_company=True,
    )</pre></details><details><summary id="f-secure_sequence_number">secure_sequence_number <span class="position">@ line 265</span></summary><pre>secure_sequence_number = fields.Integer(string="Inalterability No Gap Sequence #", readonly=True, copy=False, index=True)</pre></details><details><summary id="f-send_and_print_values">send_and_print_values <span class="position">@ line 571</span></summary><pre>send_and_print_values = fields.Json(copy=False)</pre></details><details><summary id="f-show_delivery_date">show_delivery_date <span class="position">@ line 298</span></summary><pre>show_delivery_date = fields.Boolean(compute='_compute_show_delivery_date')</pre></details><details><summary id="f-show_discount_details">show_discount_details <span class="position">@ line 614</span></summary><pre>show_discount_details = fields.Boolean(compute="_compute_show_payment_term_details")</pre></details><details><summary id="f-show_name_warning">show_name_warning <span class="position">@ line 258</span></summary><pre>show_name_warning = fields.Boolean(store=False)</pre></details><details><summary id="f-show_payment_term_details">show_payment_term_details <span class="position">@ line 613</span></summary><pre>show_payment_term_details = fields.Boolean(compute="_compute_show_payment_term_details")</pre></details><details><summary id="f-show_reset_to_draft_button">show_reset_to_draft_button <span class="position">@ line 602</span></summary><pre>show_reset_to_draft_button = fields.Boolean(compute='_compute_show_reset_to_draft_button')</pre></details><details><summary id="f-state">state <span class="position">@ line 116</span></summary><pre>state = fields.Selection(
        selection=[
            ('draft', 'Draft'),
            ('posted', 'Posted'),
            ('cancel', 'Cancelled'),
        ],
        string='Status',
        required=True,
        readonly=True,
        copy=False,
        tracking=True,
        default='draft',
    )</pre></details><details><summary id="f-statement_id">statement_id <span class="position">@ line 189</span></summary><pre>statement_id = fields.Many2one(
        related="statement_line_id.statement_id"
    )</pre></details><details><summary id="f-statement_line_id">statement_line_id <span class="position">@ line 182</span></summary><pre>statement_line_id = fields.Many2one(
        comodel_name='account.bank.statement.line',
        string="Statement Line",
        copy=False,
        check_company=True,
        index='btree_not_null',
    )</pre></details><details><summary id="f-suitable_journal_ids">suitable_journal_ids <span class="position">@ line 252</span></summary><pre>suitable_journal_ids = fields.Many2many(
        'account.journal',
        compute='_compute_suitable_journal_ids',
    )</pre></details><details><summary id="f-tax_calculation_rounding_method">tax_calculation_rounding_method <span class="position">@ line 308</span></summary><pre>tax_calculation_rounding_method = fields.Selection(
        related='company_id.tax_calculation_rounding_method',
        string='Tax calculation rounding method', readonly=True)</pre></details><details><summary id="f-tax_cash_basis_created_move_ids">tax_cash_basis_created_move_ids <span class="position">@ line 209</span></summary><pre>tax_cash_basis_created_move_ids = fields.One2many(
        string="Cash Basis Entries",
        comodel_name='account.move',
        inverse_name='tax_cash_basis_origin_move_id',
        help="The cash basis entries created from the taxes on this entry, when reconciling its lines.",
    )</pre></details><details><summary id="f-tax_cash_basis_origin_move_id">tax_cash_basis_origin_move_id <span class="position">@ line 202</span></summary><pre>tax_cash_basis_origin_move_id = fields.Many2one(
        comodel_name='account.move',
        index='btree_not_null',
        string="Cash Basis Origin",
        readonly=True,
        help="The journal entry from which this tax cash basis journal entry has been created.",
    )</pre></details><details><summary id="f-tax_cash_basis_rec_id">tax_cash_basis_rec_id <span class="position">@ line 197</span></summary><pre>tax_cash_basis_rec_id = fields.Many2one(
        comodel_name='account.partial.reconcile',
        index='btree_not_null',
        string='Tax Cash Basis Entry of',
    )</pre></details><details><summary id="f-tax_country_code">tax_country_code <span class="position">@ line 600</span></summary><pre>tax_country_code = fields.Char(compute="_compute_tax_country_code")</pre></details><details><summary id="f-tax_country_id">tax_country_id <span class="position">@ line 596</span></summary><pre>tax_country_id = fields.Many2one(  # used to filter the available taxes depending on the fiscal country and fiscal position.
        comodel_name='res.country',
        compute='_compute_tax_country_id',
    )</pre></details><details><summary id="f-tax_lock_date_message">tax_lock_date_message <span class="position">@ line 593</span></summary><pre>tax_lock_date_message = fields.Char(compute='_compute_tax_lock_date_message')</pre></details><details><summary id="f-tax_totals">tax_totals <span class="position">@ line 462</span></summary><pre>tax_totals = fields.Binary(
        string="Invoice Totals",
        compute='_compute_tax_totals',
        inverse='_inverse_tax_totals',
        help='Edit Tax amounts if you encounter rounding issues.',
        exportable=False,
    )</pre></details><details><summary id="f-taxes_legal_notes">taxes_legal_notes <span class="position">@ line 619</span></summary><pre>taxes_legal_notes = fields.Html(string='Taxes Legal Notes', compute='_compute_taxes_legal_notes')</pre></details><details><summary id="f-to_check">to_check <span class="position">@ line 244</span></summary><pre>to_check = fields.Boolean(
        string='To Check',
        tracking=True,
        help="If this checkbox is ticked, it means that the user was not sure of all the related "
             "information at the time of the creation of the move and that the move needs to be "
             "checked again.",
    )</pre></details><details><summary id="f-type_name">type_name <span class="position">@ line 259</span></summary><pre>type_name = fields.Char('Type Name', compute='_compute_type_name')</pre></details><details><summary id="f-user_id">user_id <span class="position">@ line 546</span></summary><pre>user_id = fields.Many2one(string='User', related='invoice_user_id')</pre></details><h3>Methods</h3><details><summary id="m-_action_invoice_ready_to_be_sent">_action_invoice_ready_to_be_sent(self) <span class="position">@ line 5226</span></summary><pre>Hook allowing custom code when an invoice becomes ready to be sent by mail to the customer.
For example, when an EDI document must be sent to the government and be signed by it.</pre></details><ul id="m-_affect_tax_report"><li>_affect_tax_report(self) <span class="position">@ line 3923</span></li></ul><ul id="m-_auto_init"><li>_auto_init(self) <span class="position">@ line 625</span></li></ul><details><summary id="m-_autopost_draft_entries">_autopost_draft_entries(self) <span class="position">@ line 4609</span></summary><pre>This method is called from a cron job.
It is used to post entries such as those created by the module
account_asset and recurring entries created in _post().</pre></details><details><summary id="m-_build_credit_warning_message">_build_credit_warning_message(self, record, current_amount, exclude_current, exclude_amount) <span class="position">@ line 1544</span></summary><pre>Build the warning message that will be displayed in a yellow banner on top of the current record
if the partner exceeds a credit limit (set on the company or the partner itself).
:param record:                  The record where the warning will appear (Invoice, Sales Order...).
:param current_amount (float):  The partner's outstanding credit amount from the current document.
:param exclude_current (bool):  DEPRECATED in favor of parameter `exclude_amount`:
Whether to exclude `current_amount` from the credit to invoice.
:param exclude_amount (float):  The amount to subtract from the partner's `credit_to_invoice`.
Consider the warning on a draft invoice created from a sales order.
After confirming the invoice the (partial) amount (on the invoice)
stemming from sales orders will be substracted from the `credit_to_invoice`.
This will reduce the total credit of the partner.
This parameter is used to reflect this amount.
:return (str):                  The warning message to be showed.</pre></details><details><summary id="m-_calculate_hashes">_calculate_hashes(self, previous_hash) <span class="position">@ line 3357</span></summary><pre>:return: dict of move_id: hash</pre></details><details><summary id="m-_check_balanced">_check_balanced(self, container) <span class="position">@ line 2056</span></summary><pre>Assert the move is fully balanced debit = credit.
An error is raised if it's not the case.</pre></details><ul id="m-_check_fiscalyear_lock_date"><li>_check_fiscalyear_lock_date(self) <span class="position">@ line 2105</span></li></ul><details><summary id="m-_check_total_amount">_check_total_amount(self, amount_total) <span class="position">@ line 3234</span></summary><pre>Verifies that the total amount corresponds to the quick total amount chosen as some
rounding errors may appear. In such a case, we round up the tax such that the total
is equal to the quick total amount set
E.g.: 100 including 21% tax: base = 82.64, tax = 17.35, total = 99.99
The tax will be set to 17.36 in order to have a total of 100.00</pre></details><details><summary id="m-_collect_tax_cash_basis_values">_collect_tax_cash_basis_values(self) <span class="position">@ line 2887</span></summary><pre>Collect all information needed to create the tax cash basis journal entries:
- Determine if a tax cash basis journal entry is needed.
- Compute the lines to be processed and the amounts needed to compute a percentage.
:return: A dictionary:
* move:                     The current account.move record passed as parameter.
* to_process_lines:         A tuple (caba_treatment, line) where:
- caba_treatment is either 'tax' or 'base', depending on what should
be considered on the line when generating the caba entry.
For example, a line with tax_ids=caba and tax_line_id=non_caba
will have a 'base' caba treatment, as we only want to treat its base
part in the caba entry (the tax part is already exigible on the invoice)

- line is an account.move.line record being not exigible on the tax report.
* currency:                 The currency on which the percentage has been computed.
* total_balance:            sum(payment_term_lines.mapped('balance').
* total_residual:           sum(payment_term_lines.mapped('amount_residual').
* total_amount_currency:    sum(payment_term_lines.mapped('amount_currency').
* total_residual_currency:  sum(payment_term_lines.mapped('amount_residual_currency').
* is_fully_paid:            A flag indicating the current move is now fully paid.</pre></details><ul id="m-_compute_access_url"><li>_compute_access_url(self) <span class="position">@ line 1493</span></li></ul><ul id="m-_compute_delivery_date"><li>_compute_delivery_date(self) <span class="position">@ line 921</span></li></ul><ul id="m-_compute_incoterm_location"><li>_compute_incoterm_location(self) <span class="position">@ line 1710</span></li></ul><ul id="m-_compute_is_being_sent"><li>_compute_is_being_sent(self) <span class="position">@ line 672</span></li></ul><details><summary id="m-_compute_linked_attachment_id">_compute_linked_attachment_id(self, attachment_field, binary_field) <span class="position">@ line 1696</span></summary><pre>Helper to retreive Attachment from Binary fields
This is needed because fields.Many2one('ir.attachment') makes all
attachments available to the user.</pre></details><ul id="m-_compute_payment_reference"><li>_compute_payment_reference(self) <span class="position">@ line 681</span></li></ul><ul id="m-_compute_payments_widget_to_reconcile_info"><li>_compute_payments_widget_to_reconcile_info(self) <span class="position">@ line 1174</span></li></ul><ul id="m-_conditional_add_to_compute"><li>_conditional_add_to_compute(self, fname, condition) <span class="position">@ line 5212</span></li></ul><details><summary id="m-_copy_recurring_entries">_copy_recurring_entries(self) <span class="position">@ line 3402</span></summary><pre>Creates a copy of a recurring (periodic) entry and adjusts its dates for the next period.
Meant to be called right after posting a periodic entry.
Copies extra fields as defined by _get_fields_to_copy_recurring_entries().</pre></details><ul id="m-_creation_message"><li>_creation_message(self) <span class="position">@ line 5171</span></li></ul><ul id="m-_creation_subtype"><li>_creation_subtype(self) <span class="position">@ line 5148</span></li></ul><ul id="m-_default_order_line_values"><li>_default_order_line_values(self, child_field) <span class="position">@ line 2172</span></li></ul><details><summary id="m-_disable_discount_precision">_disable_discount_precision(self) <span class="position">@ line 3453</span></summary><pre>Disable the user defined precision for discounts.

This is useful for importing documents coming from other softwares and providers.
The reasonning is that if the document that we are importing has a discount, it
shouldn't be rounded to the local settings.</pre></details><details><summary id="m-_disable_recursion">_disable_recursion(self, container, key, default, target) <span class="position">@ line 4993</span></summary><pre>Apply the context key to all environments inside this context manager.

If this context key is already set on the recordsets, yield `True`.
The recordsets modified are the one in the container, as well as all the
`self` recordsets of the calling stack.
This more or less gives the wanted context to all records inside of the
context manager.

:param container: A mutable dict that needs to at least contain the key
`records`. Can contain other items if changing the env
is needed.
:param key: The context key to apply to the recordsets.
:param default: the default value of the context key, if it isn't defined
yet in the context
:param target: the value of the context key meaning that we shouldn't
recurse
:return: True iff we should just exit the context manager</pre></details><details><summary id="m-_extend_with_attachments">_extend_with_attachments(self, attachments, new) <span class="position">@ line 3474</span></summary><pre>Main entry point to extend/enhance invoices with attachments.

Either coming from:
- The chatter when the user drops an attachment on an existing invoice.
- The journal when the user drops one or multiple attachments from the dashboard.
- The server mail alias when an alias is configured on the journal.

It will unwrap all attachments by priority then try to decode until it succeed.

:param attachments: A recordset of ir.attachment.
:param new:         Indicate if the current invoice is a fresh one or an existing one.
:returns:           True if at least one document is successfully imported</pre></details><ul id="m-_fetch_duplicate_reference"><li>_fetch_duplicate_reference(self, matching_states) <span class="position">@ line 1614</span></li></ul><ul id="m-_find_and_set_purchase_orders"><li>_find_and_set_purchase_orders(self, po_references, partner_id, amount_total, from_ocr, timeout) <span class="position">@ line 4315</span></li></ul><details><summary id="m-_generate_pdf_and_send_invoice">_generate_pdf_and_send_invoice(self, template, force_synchronous, allow_fallback_pdf, bypass_download) <span class="position">@ line 4874</span></summary><pre>Generate the pdf for the current invoices and send them by mail using the send & print wizard.
:param force_synchronous:   Flag indicating if the method should be done synchronously.
:param allow_fallback_pdf:  In case of error when generating the documents for invoices, generate a
proforma PDF report instead.
:param bypass_download: Don't trigger the action from action_send_and_print and get generated attachments_ids instead.</pre></details><details><summary id="m-_generate_qr_code">_generate_qr_code(self, silent_errors) <span class="position">@ line 4823</span></summary><pre>Generates and returns a QR-code generation URL for this invoice,
raising an error message if something is misconfigured.

The chosen QR generation method is the one set in qr_method field if there is one,
or the first eligible one found. If this search had to be performed and
and eligible method was found, qr_method field is set to this method before
returning the URL. If no eligible QR method could be found, we return None.</pre></details><details><summary id="m-_get_accounting_date">_get_accounting_date(self, invoice_date, has_tax) <span class="position">@ line 4744</span></summary><pre>Get correct accounting date for previous periods, taking tax lock date into account.
When registering an invoice in the past, we still want the sequence to be increasing.
We then take the last day of the period, depending on the sequence format.

If there is a tax lock date and there are taxes involved, we register the invoice at the
last date of the first open period.
:param invoice_date (datetime.date): The invoice date
:param has_tax (bool): Iff any taxes are involved in the lines of the invoice
:return (datetime.date):</pre></details><ul id="m-_get_action_add_from_catalog_extra_context"><li>_get_action_add_from_catalog_extra_context(self) <span class="position">@ line 2155</span></li></ul><ul id="m-_get_all_reconciled_invoice_partials"><li>_get_all_reconciled_invoice_partials(self) <span class="position">@ line 3976</span></li></ul><details><summary id="m-_get_chains_to_hash">_get_chains_to_hash(self, force_hash, raise_if_gap, raise_if_no_document, include_pre_last_hash, early_stop) <span class="position">@ line 3293</span></summary><pre>From a recordset of moves, retrieve the chains of moves that need to be hashed by taking
into account the last move of each chain of the recordset.
So if we have INV/1, INV/2, INV/3, INV4 that are not hashed yet in the database
but self contains INV/2, INV/3, we will return INV/1, INV/2 and INV/3. Not INV/4.
:param force_hash: if True, we'll check all moves posted, independently of whether they were sent or not
:param raise_if_gap: if True, we'll raise an error if a gap is detected in the sequence
:param raise_if_no_document: if True, we'll raise an error if no document needs to be hashed
:param include_pre_last_hash: if True, we'll include the moves not hashed that are previous to the last hashed move
:param early_stop: if True, we'll stop the computation as soon as we find at least one document to hash</pre></details><ul id="m-_get_discount_allocation_account"><li>_get_discount_allocation_account(self) <span class="position">@ line 4952</span></li></ul><details><summary id="m-_get_edi_creation">_get_edi_creation(self) <span class="position">@ line 3437</span></summary><pre>Get an environment to import documents from other sources.

Allow to edit the current move or create a new one.
This will prevent computing the dynamic lines at each invoice line added and only
compute everything at the end.</pre></details><details><summary id="m-_get_edi_decoder">_get_edi_decoder(self, file_data, new) <span class="position">@ line 3463</span></summary><pre>To be extended with decoding capabilities.
:returns:  Function to be later used to import the file.
Function' args:
- invoice: account.move
- file_data: attachemnt information / value
- new: whether the invoice is newly created
returns True if was able to process the invoice</pre></details><details><summary id="m-_get_fields_to_copy_recurring_entries">_get_fields_to_copy_recurring_entries(self, values) <span class="position">@ line 3414</span></summary><pre>Determines which extra fields to copy when copying a recurring entry.
To be extended by modules that add fields with copy=False (implicit or explicit)
whenever the opposite behavior is expected for recurring invoices.</pre></details><ul id="m-_get_integrity_hash_fields"><li>_get_integrity_hash_fields(self) <span class="position">@ line 3256</span></li></ul><ul id="m-_get_integrity_hash_fields_and_subfields"><li>_get_integrity_hash_fields_and_subfields(self) <span class="position">@ line 3265</span></li></ul><ul id="m-_get_invoice_computed_reference"><li>_get_invoice_computed_reference(self) <span class="position">@ line 3077</span></li></ul><details><summary id="m-_get_invoice_counterpart_amls_for_early_payment_discount_per_payment_term_line">_get_invoice_counterpart_amls_for_early_payment_discount_per_payment_term_line(self) <span class="position">@ line 3657</span></summary><pre>Helper to get the values to create the counterpart journal items on the register payment wizard and the
bank reconciliation widget in case of an early payment discount. When the early payment discount computation
is included, we need to compute the base amounts / tax amounts for each receivable / payable but we need to
take care about the rounding issues. For others computations, we need to balance the discount you get.

:return: A list of values to create the counterpart journal items split in 3 categories:
* term_lines:   The journal items containing the discount amounts for each receivable line when the
discount computation is excluded / mixed.
* tax_lines:    The journal items acting as tax lines when the discount computation is included.
* base_lines:   The journal items acting as base for tax lines when the discount computation is included.</pre></details><details><summary id="m-_get_invoice_legal_documents">_get_invoice_legal_documents(self) <span class="position">@ line 4885</span></summary><pre>Return existing attachments or a temporary Pro Forma pdf.</pre></details><details><summary id="m-_get_invoice_proforma_pdf_report_filename">_get_invoice_proforma_pdf_report_filename(self) <span class="position">@ line 4918</span></summary><pre>Get the filename of the generated proforma PDF invoice report.</pre></details><details><summary id="m-_get_invoice_reference_euro_invoice">_get_invoice_reference_euro_invoice(self) <span class="position">@ line 3033</span></summary><pre>This computes the reference based on the RF Creditor Reference.
The data of the reference is the database id number of the invoice.
For instance, if an invoice is issued with id 43, the check number
is 07 so the reference will be 'RF07 43'.</pre></details><details><summary id="m-_get_invoice_reference_euro_partner">_get_invoice_reference_euro_partner(self) <span class="position">@ line 3042</span></summary><pre>This computes the reference based on the RF Creditor Reference.
The data of the reference is the user defined reference of the
partner or the database id number of the parter.
For instance, if an invoice is issued for the partner with internal
reference 'food buyer 654', the digits will be extracted and used as
the data. This will lead to a check number equal to 00 and the
reference will be 'RF00 654'.
If no reference is set for the partner, its id in the database will
be used.</pre></details><details><summary id="m-_get_invoice_reference_odoo_invoice">_get_invoice_reference_odoo_invoice(self) <span class="position">@ line 3059</span></summary><pre>This computes the reference based on the Odoo format.
We simply return the number of the invoice, defined on the journal
sequence.</pre></details><details><summary id="m-_get_invoice_reference_odoo_partner">_get_invoice_reference_odoo_partner(self) <span class="position">@ line 3067</span></summary><pre>This computes the reference based on the Odoo format.
The data used is the reference set on the partner or its database
id otherwise. For instance if the reference of the customer is
'dumb customer 97', the reference will be 'CUST/dumb customer 97'.</pre></details><details><summary id="m-_get_invoice_report_filename">_get_invoice_report_filename(self, extension) <span class="position">@ line 4913</span></summary><pre>Get the filename of the generated invoice report with extension file.</pre></details><ul id="m-_get_last_sequence_domain"><li>_get_last_sequence_domain(self, relaxed) <span class="position">@ line 2964</span></li></ul><ul id="m-_get_lines_onchange_currency"><li>_get_lines_onchange_currency(self) <span class="position">@ line 5253</span></li></ul><details><summary id="m-_get_lock_date_message">_get_lock_date_message(self, invoice_date, has_tax) <span class="position">@ line 4788</span></summary><pre>Get a message describing the latest lock date affecting the specified date.
:param invoice_date: The date to be checked
:param has_tax: If any taxes are involved in the lines of the invoice
:return: a message describing the latest lock date affecting this move and the date it will be
accounted on if posted, or False if no lock dates affect this move.</pre></details><details><summary id="m-_get_mail_template">_get_mail_template(self) <span class="position">@ line 4568</span></summary><pre>:return: the correct mail template based on the current move type</pre></details><ul id="m-_get_mail_thread_data_attachments"><li>_get_mail_thread_data_attachments(self) <span class="position">@ line 5203</span></li></ul><details><summary id="m-_get_move_display_name">_get_move_display_name(self, show_ref) <span class="position">@ line 3926</span></summary><pre>Helper to get the display name of an invoice depending of its type.
:param show_ref:    A flag indicating of the display name must include or not the journal entry reference.
:return:            A string representing the invoice.</pre></details><details><summary id="m-_get_name_invoice_report">_get_name_invoice_report(self) <span class="position">@ line 5264</span></summary><pre>This method need to be inherit by the localizations if they want to print a custom invoice report instead of
the default one. For example please review the l10n_ar module</pre></details><ul id="m-_get_partner_credit_warning_exclude_amount"><li>_get_partner_credit_warning_exclude_amount(self) <span class="position">@ line 1517</span></li></ul><ul id="m-_get_pdf_and_send_invoice_vals"><li>_get_pdf_and_send_invoice_vals(self, template) <span class="position">@ line 4865</span></li></ul><ul id="m-_get_product_catalog_domain"><li>_get_product_catalog_domain(self) <span class="position">@ line 2164</span></li></ul><ul id="m-_get_product_catalog_order_data"><li>_get_product_catalog_order_data(self, products) <span class="position">@ line 2177</span></li></ul><ul id="m-_get_product_catalog_record_lines"><li>_get_product_catalog_record_lines(self, product_ids, child_field) <span class="position">@ line 2211</span></li></ul><details><summary id="m-_get_product_price_and_data">_get_product_price_and_data(self, product) <span class="position">@ line 2183</span></summary><pre>This function will return a dict containing the price of the product. If the product is a sale document then
we return the list price (which is the "Sales Price" in a product) otherwise we return the standard_price
(which is the "Cost" in a product).
In case of a purchase document, it's possible that we have special price for certain partner.
We will check the sellers set on the product and update the price and min_qty for it if needed.</pre></details><ul id="m-_get_protected_vals"><li>_get_protected_vals(self, vals, records) <span class="position">@ line 2729</span></li></ul><details><summary id="m-_get_quick_edit_suggestions">_get_quick_edit_suggestions(self) <span class="position">@ line 3129</span></summary><pre>Returns a dictionnary containing the suggested values when creating a new
line with the quick_edit_total_amount set. We will compute the price_unit
that has to be set with the correct that in order to match this total amount.
If the vendor/customer is set, we will suggest the most frequently used account
for that partner as the default one, otherwise the default of the journal.</pre></details><details><summary id="m-_get_reconciled_amls">_get_reconciled_amls(self) <span class="position">@ line 3959</span></summary><pre>Helper used to retrieve the reconciled move lines on this journal entry</pre></details><details><summary id="m-_get_reconciled_invoices">_get_reconciled_invoices(self) <span class="position">@ line 3972</span></summary><pre>Helper used to retrieve the reconciled invoices on this journal entry</pre></details><details><summary id="m-_get_reconciled_invoices_partials">_get_reconciled_invoices_partials(self) <span class="position">@ line 4059</span></summary><pre>Helper to retrieve the details about reconciled invoices.
:return A list of tuple (partial, amount, invoice_line).</pre></details><details><summary id="m-_get_reconciled_payments">_get_reconciled_payments(self) <span class="position">@ line 3964</span></summary><pre>Helper used to retrieve the reconciled payments on this journal entry</pre></details><details><summary id="m-_get_reconciled_statement_lines">_get_reconciled_statement_lines(self) <span class="position">@ line 3968</span></summary><pre>Helper used to retrieve the reconciled statement lines on this journal entry</pre></details><ul id="m-_get_report_base_filename"><li>_get_report_base_filename(self) <span class="position">@ line 4602</span></li></ul><ul id="m-_get_sequence_date_range"><li>_get_sequence_date_range(self, reset) <span class="position">@ line 3023</span></li></ul><ul id="m-_get_starting_sequence"><li>_get_starting_sequence(self) <span class="position">@ line 3010</span></li></ul><ul id="m-_get_unbalanced_moves"><li>_get_unbalanced_moves(self, container) <span class="position">@ line 2081</span></li></ul><ul id="m-_get_valid_journal_types"><li>_get_valid_journal_types(self) <span class="position">@ line 730</span></li></ul><details><summary id="m-_get_violated_lock_dates">_get_violated_lock_dates(self, invoice_date, has_tax) <span class="position">@ line 4780</span></summary><pre>Get all the lock dates affecting the current invoice_date.
:param invoice_date: The invoice date
:param has_tax: If any taxes are involved in the lines of the invoice
:return: a list of tuples containing the lock dates affecting this move, ordered chronologically.</pre></details><ul id="m-_hash_moves"><li>_hash_moves(self, force_hash) <span class="position">@ line 3285</span></li></ul><ul id="m-_inverse_amount_total"><li>_inverse_amount_total(self) <span class="position">@ line 1851</span></li></ul><ul id="m-_inverse_name"><li>_inverse_name(self) <span class="position">@ line 1921</span></li></ul><ul id="m-_inverse_tax_totals"><li>_inverse_tax_totals(self) <span class="position">@ line 1822</span></li></ul><details><summary id="m-_invoice_paid_hook">_invoice_paid_hook(self) <span class="position">@ line 5250</span></summary><pre>Hook to be overrided called when the invoice moves to the paid state.</pre></details><details><summary id="m-_is_downpayment">_is_downpayment(self) <span class="position">@ line 5270</span></summary><pre>Return true if the invoice is a downpayment.
Down-payments can be created from a sale order. This method is overridden in the sale order module.</pre></details><ul id="m-_is_eligible_for_early_payment_discount"><li>_is_eligible_for_early_payment_discount(self, currency, reference_date) <span class="position">@ line 2258</span></li></ul><details><summary id="m-_is_readonly">_is_readonly(self) <span class="position">@ line 2248</span></summary><pre>Check if the move has been canceled</pre></details><details><summary id="m-_is_ready_to_be_sent">_is_ready_to_be_sent(self) <span class="position">@ line 5231</span></summary><pre>Helper telling if a journal entry is ready to be sent by mail to the customer.

:return: True if the invoice is ready, False otherwise.</pre></details><ul id="m-_link_bill_origin_to_purchase_orders"><li>_link_bill_origin_to_purchase_orders(self, timeout) <span class="position">@ line 4319</span></li></ul><ul id="m-_mailing_get_default_domain"><li>_mailing_get_default_domain(self, mailing) <span class="position">@ line 5036</span></li></ul><ul id="m-_message_post_after_hook"><li>_message_post_after_hook(self, new_message, message_values) <span class="position">@ line 5097</span></li></ul><ul id="m-_must_check_constrains_date_sequence"><li>_must_check_constrains_date_sequence(self) <span class="position">@ line 2960</span></li></ul><details><summary id="m-_need_cancel_request">_need_cancel_request(self) <span class="position">@ line 1410</span></summary><pre>Hook allowing a localization to prevent the user to reset draft an invoice that has been already sent
to the government and thus, must remain untouched except if its cancellation is approved.

:return: True if the cancel button is displayed instead of draft button, False otherwise.</pre></details><ul id="m-_notify_by_email_prepare_rendering_context"><li>_notify_by_email_prepare_rendering_context(self, message, msg_vals, model_description, force_email_company, force_email_lang) <span class="position">@ line 5184</span></li></ul><ul id="m-_notify_get_recipients_groups"><li>_notify_get_recipients_groups(self, message, model_description, msg_vals) <span class="position">@ line 4578</span></li></ul><details><summary id="m-_post">_post(self, soft) <span class="position">@ line 4156</span></summary><pre>Post/Validate the documents.

Posting the documents will give it a number, and check that the document is
complete (some fields might not be required if not posted but are required
otherwise).
If the journal is locked with a hash table, it will be impossible to change
some fields afterwards.

:param soft (bool): if True, future documents are not immediately posted,
but are set to be auto posted automatically at the set accounting date.
Nothing will be performed on those documents before the accounting date.
:return Model<account.move>: the documents that have been posted</pre></details><details><summary id="m-_prepare_edi_vals_to_export">_prepare_edi_vals_to_export(self) <span class="position">@ line 4923</span></summary><pre>The purpose of this helper is to prepare values in order to export an invoice through the EDI system.
This includes the computation of the tax details for each invoice line that could be very difficult to
handle regarding the computation of the base amount.

:return: A python dict containing default pre-processed values.</pre></details><ul id="m-_prepare_invoice_aggregated_taxes"><li>_prepare_invoice_aggregated_taxes(self, filter_invl_to_apply, filter_tax_values_to_apply, grouping_key_generator, distribute_total_on_line) <span class="position">@ line 3567</span></li></ul><details><summary id="m-_recompute_cash_rounding_lines">_recompute_cash_rounding_lines(self) <span class="position">@ line 2292</span></summary><pre>Handle the cash rounding feature on invoices.

In some countries, the smallest coins do not exist. For example, in Switzerland, there is no coin for 0.01 CHF.
For this reason, if invoices are paid in cash, you have to round their total amount to the smallest coin that
exists in the currency. For the CHF, the smallest coin is 0.05 CHF.

There are two strategies for the rounding:

1) Add a line on the invoice for the rounding: The cash rounding line is added as a new invoice line.
2) Add the rounding in the biggest tax amount: The cash rounding line is added as a new tax line on the tax
having the biggest balance.</pre></details><details><summary id="m-_reconcile_reversed_moves">_reconcile_reversed_moves(self, reverse_moves, move_reverse_cancel) <span class="position">@ line 4079</span></summary><pre>Reconciles moves in self and reverse moves
:param move_reverse_cancel: parameter used when lines are reconciled
will determine whether the tax cash basis journal entries should be created
:param reverse_moves:       An account.move recordset, reverse of the current self.
:return:                    An account.move recordset, reverse of the current self.</pre></details><details><summary id="m-_reverse_moves">_reverse_moves(self, default_values_list, cancel) <span class="position">@ line 4096</span></summary><pre>Reverse a recordset of account.move.
If cancel parameter is true, the reconcilable or liquidity lines
of each original move will be reconciled with its reverse's.
:param default_values_list: A list of default values to consider per move.
('type' & 'reversed_entry_id' are computed in the method).
:return:                    An account.move recordset, reverse of the current self.</pre></details><ul id="m-_sanitize_vals"><li>_sanitize_vals(self, vals) <span class="position">@ line 2700</span></li></ul><ul id="m-_search_default_journal"><li>_search_default_journal(self) <span class="position">@ line 739</span></li></ul><ul id="m-_search_made_sequence_hole"><li>_search_made_sequence_hole(self, operator, value) <span class="position">@ line 845</span></li></ul><ul id="m-_send_only_when_ready"><li>_send_only_when_ready(self) <span class="position">@ line 5240</span></li></ul><ul id="m-_sequence_fixed_regex"><li>_sequence_fixed_regex(self) <span class="position">@ line 87</span></li></ul><ul id="m-_sequence_monthly_regex"><li>_sequence_monthly_regex(self) <span class="position">@ line 79</span></li></ul><ul id="m-_sequence_yearly_regex"><li>_sequence_yearly_regex(self) <span class="position">@ line 83</span></li></ul><ul id="m-_stolen_move"><li>_stolen_move(self, vals) <span class="position">@ line 2722</span></li></ul><ul id="m-_sync_dynamic_line"><li>_sync_dynamic_line(self, existing_key_fname, needed_vals_fname, needed_dirty_fname, line_type, container) <span class="position">@ line 2459</span></li></ul><ul id="m-_sync_dynamic_lines"><li>_sync_dynamic_lines(self, container) <span class="position">@ line 2605</span></li></ul><ul id="m-_sync_invoice"><li>_sync_invoice(self, container) <span class="position">@ line 2584</span></li></ul><ul id="m-_sync_rounding_lines"><li>_sync_rounding_lines(self, container) <span class="position">@ line 2452</span></li></ul><ul id="m-_sync_unbalanced_lines"><li>_sync_unbalanced_lines(self, container) <span class="position">@ line 2412</span></li></ul><details><summary id="m-_synchronize_business_models">_synchronize_business_models(self, changed_fields) <span class="position">@ line 2270</span></summary><pre>Ensure the consistency between:
account.payment & account.move
account.bank.statement.line & account.move

The idea is to call the method performing the synchronization of the business
models regarding their related journal entries. To avoid cycling, the
'skip_account_move_synchronization' key is used through the context.

:param changed_fields: A set containing all modified fields on account.move.</pre></details><ul id="m-_track_subtype"><li>_track_subtype(self, init_values) <span class="position">@ line 5155</span></li></ul><ul id="m-_unlink_or_reverse"><li>_unlink_or_reverse(self) <span class="position">@ line 4141</span></li></ul><details><summary id="m-_update_order_line_info">_update_order_line_info(self, product_id, quantity) <span class="position">@ line 2218</span></summary><pre>Update account_move_line information for a given product or create a
new one if none exists yet.
:param int product_id: The product, as a `product.product` id.
:param int quantity: The quantity selected in the catalog
:return: The unit price of the product, based on the pricelist of the
sale order and the quantity selected.
:rtype: float</pre></details><ul id="m-action_activate_currency"><li>action_activate_currency(self) <span class="position">@ line 4565</span></li></ul><ul id="m-action_add_from_catalog"><li>action_add_from_catalog(self) <span class="position">@ line 2149</span></li></ul><ul id="m-action_duplicate"><li>action_duplicate(self) <span class="position">@ line 4395</span></li></ul><details><summary id="m-action_invoice_sent">action_invoice_sent(self) <span class="position">@ line 4424</span></summary><pre>Open a window to compose an email, with the edi invoice template
message loaded by default</pre></details><ul id="m-action_open_business_doc"><li>action_open_business_doc(self) <span class="position">@ line 4332</span></li></ul><ul id="m-action_post"><li>action_post(self) <span class="position">@ line 4453</span></li></ul><ul id="m-action_register_payment"><li>action_register_payment(self) <span class="position">@ line 4392</span></li></ul><ul id="m-action_reverse"><li>action_reverse(self) <span class="position">@ line 4445</span></li></ul><ul id="m-action_send_and_print"><li>action_send_and_print(self) <span class="position">@ line 4405</span></li></ul><ul id="m-action_switch_move_type"><li>action_switch_move_type(self) <span class="position">@ line 4368</span></li></ul><ul id="m-button_cancel"><li>button_cancel(self) <span class="position">@ line 4553</span></li></ul><ul id="m-button_draft"><li>button_draft(self) <span class="position">@ line 4499</span></li></ul><ul id="m-button_hash"><li>button_hash(self) <span class="position">@ line 4544</span></li></ul><details><summary id="m-button_request_cancel">button_request_cancel(self) <span class="position">@ line 4547</span></summary><pre>Hook allowing the localizations to request a cancellation from the government before cancelling the invoice.</pre></details><ul id="m-button_set_checked"><li>button_set_checked(self) <span class="position">@ line 4495</span></li></ul><ul id="m-check_field_access_rights"><li>check_field_access_rights(self, operation, field_names) <span class="position">@ line 2660</span></li></ul><ul id="m-check_move_sequence_chain"><li>check_move_sequence_chain(self) <span class="position">@ line 2837</span></li></ul><ul id="m-copy"><li>copy(self, default) <span class="position">@ line 2688</span></li></ul><ul id="m-copy_data"><li>copy_data(self, default) <span class="position">@ line 2667</span></li></ul><ul id="m-get_invoice_pdf_report_attachment"><li>get_invoice_pdf_report_attachment(self) <span class="position">@ line 4901</span></li></ul><ul id="m-init"><li>init(self) <span class="position">@ line 651</span></li></ul><ul id="m-is_entry"><li>is_entry(self) <span class="position">@ line 4713</span></li></ul><ul id="m-is_inbound"><li>is_inbound(self, include_receipts) <span class="position">@ line 4734</span></li></ul><ul id="m-is_invoice"><li>is_invoice(self, include_receipts) <span class="position">@ line 4710</span></li></ul><ul id="m-is_outbound"><li>is_outbound(self, include_receipts) <span class="position">@ line 4741</span></li></ul><ul id="m-is_purchase_document"><li>is_purchase_document(self, include_receipts) <span class="position">@ line 4727</span></li></ul><ul id="m-is_sale_document"><li>is_sale_document(self, include_receipts) <span class="position">@ line 4720</span></li></ul><details><summary id="m-js_assign_outstanding_line">js_assign_outstanding_line(self, line_id) <span class="position">@ line 4475</span></summary><pre>Called by the 'payment' widget to reconcile a suggested journal item to the present
invoice.

:param line_id: The id of the line to reconcile with the current invoice.</pre></details><details><summary id="m-js_remove_outstanding_partial">js_remove_outstanding_partial(self, partial_id) <span class="position">@ line 4486</span></summary><pre>Called by the 'payment' widget to remove a reconciled entry to the present invoice.

:param partial_id: The id of an existing partial reconciled with the current invoice.</pre></details><ul id="m-onchange"><li>onchange(self, values, field_names, fields_spec) <span class="position">@ line 2871</span></li></ul><ul id="m-open_created_caba_entries"><li>open_created_caba_entries(self) <span class="position">@ line 4357</span></li></ul><ul id="m-open_reconcile_view"><li>open_reconcile_view(self) <span class="position">@ line 4329</span></li></ul><ul id="m-preview_invoice"><li>preview_invoice(self) <span class="position">@ line 4437</span></li></ul><ul id="m-unlink"><li>unlink(self) <span class="position">@ line 2860</span></li></ul><ul id="m-write"><li>write(self, vals) <span class="position">@ line 2754</span></li></ul><h2>Inherited: odoo/addons/account/models/account_bank_statement_line.py</h2><h3>Fields</h3><details><summary id="f-statement_line_ids">statement_line_ids <span class="position">@ line 835</span></summary><pre>statement_line_ids = fields.One2many('account.bank.statement.line', 'move_id', string='Statements')</pre></details><script src="class.js"></script></body></html>
