<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>digest.digest - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>digest.digest</h1><p>Originally defined in: odoo/addons/digest/models/digest.py</p><p>Inherited in: odoo/addons/website_sale/models/digest.py<br/>Inherited in: odoo/addons/sale_management/models/digest.py<br/>Inherited in: odoo/addons/project/models/digest_digest.py<br/>Inherited in: odoo/addons/point_of_sale/models/digest.py<br/>Inherited in: odoo/addons/im_livechat/models/digest.py<br/>Inherited in: odoo/addons/hr_recruitment/models/digest.py<br/>Inherited in: odoo/addons/crm/models/digest.py<br/>Inherited in: odoo/addons/account/models/digest.py<br/></p><hr/><h2>Original: odoo/addons/digest/models/digest.py</h2><h3>Fields</h3><details><summary id="f-available_fields">available_fields <span class="position">@ line 36</span></summary><pre>available_fields = fields.Char(compute='_compute_available_fields')</pre></details><details><summary id="f-company_id">company_id <span class="position">@ line 35</span></summary><pre>company_id = fields.Many2one('res.company', string='Company', default=lambda self: self.env.company.id)</pre></details><details><summary id="f-currency_id">currency_id <span class="position">@ line 34</span></summary><pre>currency_id = fields.Many2one(related="company_id.currency_id", string='Currency', readonly=False)</pre></details><details><summary id="f-is_subscribed">is_subscribed <span class="position">@ line 37</span></summary><pre>is_subscribed = fields.Boolean('Is user subscribed', compute='_compute_is_subscribed')</pre></details><details><summary id="f-kpi_mail_message_total">kpi_mail_message_total <span class="position">@ line 42</span></summary><pre>kpi_mail_message_total = fields.Boolean('Messages Sent')</pre></details><details><summary id="f-kpi_mail_message_total_value">kpi_mail_message_total_value <span class="position">@ line 43</span></summary><pre>kpi_mail_message_total_value = fields.Integer(compute='_compute_kpi_mail_message_total_value')</pre></details><details><summary id="f-kpi_res_users_connected">kpi_res_users_connected <span class="position">@ line 40</span></summary><pre>kpi_res_users_connected = fields.Boolean('Connected Users')</pre></details><details><summary id="f-kpi_res_users_connected_value">kpi_res_users_connected_value <span class="position">@ line 41</span></summary><pre>kpi_res_users_connected_value = fields.Integer(compute='_compute_kpi_res_users_connected_value')</pre></details><details><summary id="f-name">name <span class="position">@ line 26</span></summary><pre>name = fields.Char(string='Name', required=True, translate=True)</pre></details><details><summary id="f-next_run_date">next_run_date <span class="position">@ line 33</span></summary><pre>next_run_date = fields.Date(string='Next Mailing Date')</pre></details><details><summary id="f-periodicity">periodicity <span class="position">@ line 28</span></summary><pre>periodicity = fields.Selection([('daily', 'Daily'),
                                    ('weekly', 'Weekly'),
                                    ('monthly', 'Monthly'),
                                    ('quarterly', 'Quarterly')],
                                   string='Periodicity', default='daily', required=True)</pre></details><details><summary id="f-state">state <span class="position">@ line 38</span></summary><pre>state = fields.Selection([('activated', 'Activated'), ('deactivated', 'Deactivated')], string='Status', readonly=True, default='activated')</pre></details><details><summary id="f-user_ids">user_ids <span class="position">@ line 27</span></summary><pre>user_ids = fields.Many2many('res.users', string='Recipients', domain="[('share', '=', False)]")</pre></details><h3>Methods</h3><details><summary id="m-_action_send">_action_send(self, update_periodicity) <span class="position">@ line 140</span></summary><pre>Send digests email to all the registered users.

:param bool update_periodicity: if True, check user logs to update
periodicity of digests. Purpose is to slow down digest whose users
do not connect to avoid spam;</pre></details><ul id="m-_action_send_to_user"><li>_action_send_to_user(self, user, tips_count, consume_tips) <span class="position">@ line 160</span></li></ul><details><summary id="m-_action_subscribe_users">_action_subscribe_users(self, users) <span class="position">@ line 107</span></summary><pre>Private method to manage subscriptions. Done as sudo() to speedup
computation and avoid ACLs issues.</pre></details><details><summary id="m-_action_unsubscribe_users">_action_unsubscribe_users(self, users) <span class="position">@ line 116</span></summary><pre>Private method to manage subscriptions. Done as sudo() to speedup
computation and avoid ACLs issues.</pre></details><details><summary id="m-_calculate_company_based_kpi">_calculate_company_based_kpi(self, model, digest_kpi_field, date_field, additional_domain, sum_field) <span class="position">@ line 394</span></summary><pre>Generic method that computes the KPI on a given model.

:param model: Model on which we will compute the KPI
This model must have a "company_id" field
:param digest_kpi_field: Field name on which we will write the KPI
:param date_field: Field used for the date range
:param additional_domain: Additional domain
:param sum_field: Field to sum to obtain the KPI,
if None it will count the number of records</pre></details><details><summary id="m-_check_daily_logs">_check_daily_logs(self) <span class="position">@ line 439</span></summary><pre>Badly named method that checks user logs and slowdown the sending
of digest emails based on recipients being away.</pre></details><ul id="m-_compute_available_fields"><li>_compute_available_fields(self) <span class="position">@ line 50</span></li></ul><ul id="m-_compute_kpi_mail_message_total_value"><li>_compute_kpi_mail_message_total_value(self) <span class="position">@ line 78</span></li></ul><ul id="m-_compute_kpi_res_users_connected_value"><li>_compute_kpi_res_users_connected_value(self) <span class="position">@ line 71</span></li></ul><details><summary id="m-_compute_kpis">_compute_kpis(self, company, user) <span class="position">@ line 241</span></summary><pre>Compute KPIs to display in the digest template. It is expected to be
a list of KPIs, each containing values for 3 columns display.

:return list: result [{
'kpi_name': 'kpi_mail_message',
'kpi_fullname': 'Messages',  # translated
'kpi_action': 'crm.crm_lead_action_pipeline',  # xml id of an action to execute
'kpi_col1': {
'value': '12.0',
'margin': 32.36,
'col_subtitle': 'Yesterday',  # translated
},
'kpi_col2': { ... },
'kpi_col3':  { ... },
}, { ... }]</pre></details><details><summary id="m-_compute_kpis_actions">_compute_kpis_actions(self, company, user) <span class="position">@ line 325</span></summary><pre>Give an optional action to display in digest email linked to some KPIs.

:return dict: key: kpi name (field name), value: an action that will be
concatenated with /web#action={action}</pre></details><details><summary id="m-_compute_preferences">_compute_preferences(self, company, user) <span class="position">@ line 333</span></summary><pre>Give an optional text for preferences, like a shortcut for configuration.

:return string: html to put in template</pre></details><ul id="m-_compute_timeframes"><li>_compute_timeframes(self, company) <span class="position">@ line 372</span></li></ul><ul id="m-_compute_tips"><li>_compute_tips(self, company, user, tips_count, consumed) <span class="position">@ line 304</span></li></ul><ul id="m-_format_currency_amount"><li>_format_currency_amount(self, amount, currency_id) <span class="position">@ line 468</span></li></ul><details><summary id="m-_get_kpi_compute_parameters">_get_kpi_compute_parameters(self) <span class="position">@ line 58</span></summary><pre>Get the parameters used to computed the KPI value.</pre></details><ul id="m-_get_kpi_fields"><li>_get_kpi_fields(self) <span class="position">@ line 428</span></li></ul><ul id="m-_get_margin_value"><li>_get_margin_value(self, value, previous_value) <span class="position">@ line 433</span></li></ul><ul id="m-_get_next_periodicity"><li>_get_next_periodicity(self) <span class="position">@ line 461</span></li></ul><ul id="m-_get_next_run_date"><li>_get_next_run_date(self) <span class="position">@ line 360</span></li></ul><details><summary id="m-_get_unsubscribe_token">_get_unsubscribe_token(self, user_id) <span class="position">@ line 229</span></summary><pre>Generate a secure hash for this digest and user. It allows to
unsubscribe from a digest while keeping some security in that process.

:param int user_id: ID of the user to unsubscribe</pre></details><ul id="m-action_activate"><li>action_activate(self) <span class="position">@ line 121</span></li></ul><ul id="m-action_deactivate"><li>action_deactivate(self) <span class="position">@ line 124</span></li></ul><details><summary id="m-action_send">action_send(self) <span class="position">@ line 130</span></summary><pre>Send digests emails to all the registered users.</pre></details><details><summary id="m-action_send_manual">action_send_manual(self) <span class="position">@ line 134</span></summary><pre>Manually send digests emails to all registered users. In that case
do not update periodicity as this is not an automation rule that could
be considered as unwanted spam.</pre></details><ul id="m-action_set_periodicity"><li>action_set_periodicity(self, periodicity) <span class="position">@ line 127</span></li></ul><ul id="m-action_subscribe"><li>action_subscribe(self) <span class="position">@ line 103</span></li></ul><ul id="m-action_unsubscribe"><li>action_unsubscribe(self) <span class="position">@ line 112</span></li></ul><h2>Inherited: odoo/addons/website_sale/models/digest.py</h2><h3>Fields</h3><details><summary id="f-kpi_website_sale_total">kpi_website_sale_total <span class="position">@ line 10</span></summary><pre>kpi_website_sale_total = fields.Boolean(string="eCommerce Sales")</pre></details><details><summary id="f-kpi_website_sale_total_value">kpi_website_sale_total_value <span class="position">@ line 11</span></summary><pre>kpi_website_sale_total_value = fields.Monetary(compute='_compute_kpi_website_sale_total_value')</pre></details><h3>Methods</h3><ul id="m-_compute_kpi_website_sale_total_value"><li>_compute_kpi_website_sale_total_value(self) <span class="position">@ line 13</span></li></ul><ul id="m-_compute_kpis_actions"><li>_compute_kpis_actions(self, company, user) <span class="position">@ line 25</span></li></ul><h2>Inherited: odoo/addons/sale_management/models/digest.py</h2><h3>Fields</h3><details><summary id="f-kpi_all_sale_total">kpi_all_sale_total <span class="position">@ line 11</span></summary><pre>kpi_all_sale_total = fields.Boolean('All Sales')</pre></details><details><summary id="f-kpi_all_sale_total_value">kpi_all_sale_total_value <span class="position">@ line 12</span></summary><pre>kpi_all_sale_total_value = fields.Monetary(compute='_compute_kpi_sale_total_value')</pre></details><h3>Methods</h3><ul id="m-_compute_kpi_sale_total_value"><li>_compute_kpi_sale_total_value(self) <span class="position">@ line 14</span></li></ul><ul id="m-_compute_kpis_actions"><li>_compute_kpis_actions(self, company, user) <span class="position">@ line 26</span></li></ul><h2>Inherited: odoo/addons/project/models/digest_digest.py</h2><h3>Fields</h3><details><summary id="f-kpi_project_task_opened">kpi_project_task_opened <span class="position">@ line 11</span></summary><pre>kpi_project_task_opened = fields.Boolean('Open Tasks')</pre></details><details><summary id="f-kpi_project_task_opened_value">kpi_project_task_opened_value <span class="position">@ line 12</span></summary><pre>kpi_project_task_opened_value = fields.Integer(compute='_compute_project_task_opened_value', export_string_translation=False)</pre></details><h3>Methods</h3><ul id="m-_compute_kpis_actions"><li>_compute_kpis_actions(self, company, user) <span class="position">@ line 24</span></li></ul><ul id="m-_compute_project_task_opened_value"><li>_compute_project_task_opened_value(self) <span class="position">@ line 14</span></li></ul><h2>Inherited: odoo/addons/point_of_sale/models/digest.py</h2><h3>Fields</h3><details><summary id="f-kpi_pos_total">kpi_pos_total <span class="position">@ line 11</span></summary><pre>kpi_pos_total = fields.Boolean('POS Sales')</pre></details><details><summary id="f-kpi_pos_total_value">kpi_pos_total_value <span class="position">@ line 12</span></summary><pre>kpi_pos_total_value = fields.Monetary(compute='_compute_kpi_pos_total_value')</pre></details><h3>Methods</h3><ul id="m-_compute_kpi_pos_total_value"><li>_compute_kpi_pos_total_value(self) <span class="position">@ line 14</span></li></ul><ul id="m-_compute_kpis_actions"><li>_compute_kpis_actions(self, company, user) <span class="position">@ line 26</span></li></ul><h2>Inherited: odoo/addons/im_livechat/models/digest.py</h2><h3>Fields</h3><details><summary id="f-kpi_livechat_conversations">kpi_livechat_conversations <span class="position">@ line 12</span></summary><pre>kpi_livechat_conversations = fields.Boolean('Conversations handled')</pre></details><details><summary id="f-kpi_livechat_conversations_value">kpi_livechat_conversations_value <span class="position">@ line 13</span></summary><pre>kpi_livechat_conversations_value = fields.Integer(compute='_compute_kpi_livechat_conversations_value')</pre></details><details><summary id="f-kpi_livechat_rating">kpi_livechat_rating <span class="position">@ line 10</span></summary><pre>kpi_livechat_rating = fields.Boolean('% of Happiness')</pre></details><details><summary id="f-kpi_livechat_rating_value">kpi_livechat_rating_value <span class="position">@ line 11</span></summary><pre>kpi_livechat_rating_value = fields.Float(digits=(16, 2), compute='_compute_kpi_livechat_rating_value')</pre></details><details><summary id="f-kpi_livechat_response">kpi_livechat_response <span class="position">@ line 14</span></summary><pre>kpi_livechat_response = fields.Boolean('Time to answer (sec)')</pre></details><details><summary id="f-kpi_livechat_response_value">kpi_livechat_response_value <span class="position">@ line 15</span></summary><pre>kpi_livechat_response_value = fields.Float(digits=(16, 2), compute='_compute_kpi_livechat_response_value')</pre></details><h3>Methods</h3><ul id="m-_compute_kpi_livechat_conversations_value"><li>_compute_kpi_livechat_conversations_value(self) <span class="position">@ line 30</span></li></ul><ul id="m-_compute_kpi_livechat_rating_value"><li>_compute_kpi_livechat_rating_value(self) <span class="position">@ line 17</span></li></ul><ul id="m-_compute_kpi_livechat_response_value"><li>_compute_kpi_livechat_response_value(self) <span class="position">@ line 37</span></li></ul><ul id="m-_compute_kpis_actions"><li>_compute_kpis_actions(self, company, user) <span class="position">@ line 45</span></li></ul><h2>Inherited: odoo/addons/hr_recruitment/models/digest.py</h2><h3>Fields</h3><details><summary id="f-kpi_hr_recruitment_new_colleagues">kpi_hr_recruitment_new_colleagues <span class="position">@ line 11</span></summary><pre>kpi_hr_recruitment_new_colleagues = fields.Boolean('New Employees')</pre></details><details><summary id="f-kpi_hr_recruitment_new_colleagues_value">kpi_hr_recruitment_new_colleagues_value <span class="position">@ line 12</span></summary><pre>kpi_hr_recruitment_new_colleagues_value = fields.Integer(compute='_compute_kpi_hr_recruitment_new_colleagues_value')</pre></details><h3>Methods</h3><ul id="m-_compute_kpi_hr_recruitment_new_colleagues_value"><li>_compute_kpi_hr_recruitment_new_colleagues_value(self) <span class="position">@ line 14</span></li></ul><ul id="m-_compute_kpis_actions"><li>_compute_kpis_actions(self, company, user) <span class="position">@ line 23</span></li></ul><h2>Inherited: odoo/addons/crm/models/digest.py</h2><h3>Fields</h3><details><summary id="f-kpi_crm_lead_created">kpi_crm_lead_created <span class="position">@ line 11</span></summary><pre>kpi_crm_lead_created = fields.Boolean('New Leads')</pre></details><details><summary id="f-kpi_crm_lead_created_value">kpi_crm_lead_created_value <span class="position">@ line 12</span></summary><pre>kpi_crm_lead_created_value = fields.Integer(compute='_compute_kpi_crm_lead_created_value')</pre></details><details><summary id="f-kpi_crm_opportunities_won">kpi_crm_opportunities_won <span class="position">@ line 13</span></summary><pre>kpi_crm_opportunities_won = fields.Boolean('Opportunities Won')</pre></details><details><summary id="f-kpi_crm_opportunities_won_value">kpi_crm_opportunities_won_value <span class="position">@ line 14</span></summary><pre>kpi_crm_opportunities_won_value = fields.Integer(compute='_compute_kpi_crm_opportunities_won_value')</pre></details><h3>Methods</h3><ul id="m-_compute_kpi_crm_lead_created_value"><li>_compute_kpi_crm_lead_created_value(self) <span class="position">@ line 16</span></li></ul><ul id="m-_compute_kpi_crm_opportunities_won_value"><li>_compute_kpi_crm_opportunities_won_value(self) <span class="position">@ line 22</span></li></ul><ul id="m-_compute_kpis_actions"><li>_compute_kpis_actions(self, company, user) <span class="position">@ line 33</span></li></ul><h2>Inherited: odoo/addons/account/models/digest.py</h2><h3>Fields</h3><details><summary id="f-kpi_account_total_revenue">kpi_account_total_revenue <span class="position">@ line 11</span></summary><pre>kpi_account_total_revenue = fields.Boolean('Revenue')</pre></details><details><summary id="f-kpi_account_total_revenue_value">kpi_account_total_revenue_value <span class="position">@ line 12</span></summary><pre>kpi_account_total_revenue_value = fields.Monetary(compute='_compute_kpi_account_total_revenue_value')</pre></details><h3>Methods</h3><ul id="m-_compute_kpi_account_total_revenue_value"><li>_compute_kpi_account_total_revenue_value(self) <span class="position">@ line 14</span></li></ul><ul id="m-_compute_kpis_actions"><li>_compute_kpis_actions(self, company, user) <span class="position">@ line 36</span></li></ul><script src="class.js"></script></body></html>
