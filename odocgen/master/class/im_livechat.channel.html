<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>im_livechat.channel - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>im_livechat.channel</h1><p>Inherited in: odoo/addons/website_livechat/models/im_livechat_channel.py<br/>Inherited in: odoo/addons/website_livechat/models/im_livechat.py<br/>Inherited in: odoo/addons/im_livechat/models/im_livechat_channel.py<br/></p><hr/><h2>Inherited: odoo/addons/website_livechat/models/im_livechat_channel.py</h2><h3>Methods</h3><ul id="m-_get_livechat_discuss_channel_vals"><li>_get_livechat_discuss_channel_vals(self, anonymous_name, previous_operator_id, chatbot_script, user_id, country_id, lang) <span class="position">@ line 10</span></li></ul><h2>Inherited: odoo/addons/website_livechat/models/im_livechat.py</h2><h3>Fields</h3><details><summary id="f-website_description">website_description <span class="position">@ line 19</span></summary><pre>website_description = fields.Html(
        "Website description", default=False, translate=html_translate,
        sanitize_overridable=True,
        sanitize_attributes=False, sanitize_form=False,
        help="Description of the channel displayed on the website page")</pre></details><h3>Methods</h3><ul id="m-_compute_website_url"><li>_compute_website_url(self) <span class="position">@ line 14</span></li></ul><h2>Inherited: odoo/addons/im_livechat/models/im_livechat_channel.py</h2><h3>Fields</h3><details><summary id="f-are_you_inside">are_you_inside <span class="position">@ line 48</span></summary><pre>are_you_inside = fields.Boolean(string='Are you inside the matrix?',
        compute='_are_you_inside', store=False, readonly=True)</pre></details><details><summary id="f-available_operator_ids">available_operator_ids <span class="position">@ line 50</span></summary><pre>available_operator_ids = fields.Many2many('res.users', compute='_compute_available_operator_ids')</pre></details><details><summary id="f-button_background_color">button_background_color <span class="position">@ line 42</span></summary><pre>button_background_color = fields.Char(default="#875A7B", help="Default background color of the Livechat button")</pre></details><details><summary id="f-button_text">button_text <span class="position">@ line 35</span></summary><pre>button_text = fields.Char('Text of the Button', default=_default_button_text,
        help="Default text displayed on the Livechat Support Button", translate=True)</pre></details><details><summary id="f-button_text_color">button_text_color <span class="position">@ line 43</span></summary><pre>button_text_color = fields.Char(default="#FFFFFF", help="Default text color of the Livechat button")</pre></details><details><summary id="f-channel_ids">channel_ids <span class="position">@ line 58</span></summary><pre>channel_ids = fields.One2many('discuss.channel', 'livechat_channel_id', 'Sessions')</pre></details><details><summary id="f-chatbot_script_count">chatbot_script_count <span class="position">@ line 59</span></summary><pre>chatbot_script_count = fields.Integer(string='Number of Chatbot', compute='_compute_chatbot_script_count')</pre></details><details><summary id="f-default_message">default_message <span class="position">@ line 37</span></summary><pre>default_message = fields.Char('Welcome Message', default=_default_default_message,
        help="This is an automated 'welcome' message that your visitor will see when they initiate a new conversation.", translate=True)</pre></details><details><summary id="f-header_background_color">header_background_color <span class="position">@ line 40</span></summary><pre>header_background_color = fields.Char(default="#875A7B", help="Default background color of the channel header once open")</pre></details><details><summary id="f-image_128">image_128 <span class="position">@ line 54</span></summary><pre>image_128 = fields.Image("Image", max_width=128, max_height=128)</pre></details><details><summary id="f-input_placeholder">input_placeholder <span class="position">@ line 39</span></summary><pre>input_placeholder = fields.Char('Chat Input Placeholder', help='Text that prompts the user to initiate the chat.', translate=True)</pre></details><details><summary id="f-name">name <span class="position">@ line 34</span></summary><pre>name = fields.Char('Channel Name', required=True)</pre></details><details><summary id="f-nbr_channel">nbr_channel <span class="position">@ line 52</span></summary><pre>nbr_channel = fields.Integer('Number of conversation', compute='_compute_nbr_channel', store=False, readonly=True)</pre></details><details><summary id="f-rule_ids">rule_ids <span class="position">@ line 60</span></summary><pre>rule_ids = fields.One2many('im_livechat.channel.rule', 'channel_id', 'Rules')</pre></details><details><summary id="f-script_external">script_external <span class="position">@ line 51</span></summary><pre>script_external = fields.Html('Script (external)', compute='_compute_script_external', store=False, readonly=True, sanitize=False)</pre></details><details><summary id="f-title_color">title_color <span class="position">@ line 41</span></summary><pre>title_color = fields.Char(default="#FFFFFF", help="Default title color of the channel once open")</pre></details><details><summary id="f-user_ids">user_ids <span class="position">@ line 57</span></summary><pre>user_ids = fields.Many2many('res.users', 'im_livechat_channel_im_user', 'channel_id', 'user_id', string='Operators', default=_default_user_ids)</pre></details><details><summary id="f-web_page">web_page <span class="position">@ line 46</span></summary><pre>web_page = fields.Char('Web Page', compute='_compute_web_page_link', store=False, readonly=True,
        help="URL to a static page where you client can discuss with the operator of the channel.")</pre></details><h3>Methods</h3><ul id="m-_are_you_inside"><li>_are_you_inside(self) <span class="position">@ line 62</span></li></ul><ul id="m-_compute_script_external"><li>_compute_script_external(self) <span class="position">@ line 79</span></li></ul><ul id="m-_compute_web_page_link"><li>_compute_web_page_link(self) <span class="position">@ line 88</span></li></ul><ul id="m-_default_button_text"><li>_default_button_text(self) <span class="position">@ line 27</span></li></ul><ul id="m-_default_default_message"><li>_default_default_message(self) <span class="position">@ line 30</span></li></ul><ul id="m-_default_user_ids"><li>_default_user_ids(self) <span class="position">@ line 24</span></li></ul><ul id="m-_get_channel_infos"><li>_get_channel_infos(self) <span class="position">@ line 310</span></li></ul><details><summary id="m-_get_less_active_operator">_get_less_active_operator(self, operator_statuses, operators) <span class="position">@ line 192</span></summary><pre>Retrieve the most available operator based on the following criteria:
- Lowest number of active chats.
- Not in  a call.
- If an operator is in a call and has two or more active chats, don't
give priority over an operator with more conversations who is not in a
call.

:param operator_statuses: list of dictionaries containing the operator's
id, the number of active chats and a boolean indicating if the
operator is in a call. The list is ordered by the number of active
chats (ascending) and whether the operator is in a call
(descending).
:param operators: recordset of :class:`ResUsers` operators to choose from.
:return: the :class:`ResUsers` record for the chosen operator</pre></details><ul id="m-_get_livechat_discuss_channel_vals"><li>_get_livechat_discuss_channel_vals(self, anonymous_name, previous_operator_id, chatbot_script, user_id, country_id, lang) <span class="position">@ line 143</span></li></ul><details><summary id="m-_get_operator">_get_operator(self, previous_operator_id, lang, country_id) <span class="position">@ line 232</span></summary><pre>Return an operator for a livechat. Try to return the previous
operator if available. If not, one of the most available operators be
returned.

A livechat is considered 'active' if it has at least one message within
the 30 minutes. This method will try to match the given lang and
country_id.

(Some annoying conversions have to be made on the fly because this model
holds 'res.users' as available operators and the discuss_channel model
stores the partner_id of the randomly selected operator)

:param previous_operator_id: id of the previous operator with whom the
visitor was chatting.
:param lang: code of the preferred lang of the visitor.
:param country_id: id of the country of the visitor.
:return : user
:rtype : res.users</pre></details><ul id="m-action_join"><li>action_join(self) <span class="position">@ line 104</span></li></ul><ul id="m-action_quit"><li>action_quit(self) <span class="position">@ line 111</span></li></ul><ul id="m-action_view_chatbot_scripts"><li>action_view_chatbot_scripts(self) <span class="position">@ line 128</span></li></ul><details><summary id="m-action_view_rating">action_view_rating(self) <span class="position">@ line 118</span></summary><pre>Action to display the rating relative to the channel, so all rating of the
sessions of the current channel
:returns : the ir.action 'action_view_rating' with the correct context</pre></details><ul id="m-get_livechat_info"><li>get_livechat_info(self, username) <span class="position">@ line 325</span></li></ul><script src="class.js"></script></body></html>
