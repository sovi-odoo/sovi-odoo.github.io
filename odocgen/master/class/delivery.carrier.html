<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>delivery.carrier - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>delivery.carrier</h1><p>Originally defined in: odoo/addons/delivery/models/delivery_carrier.py</p><p>Inherited in: odoo/addons/website_sale_picking/models/delivery_carrier.py<br/>Inherited in: odoo/addons/website_sale/models/delivery_carrier.py<br/>Inherited in: odoo/addons/stock_delivery/models/delivery_carrier.py<br/>Inherited in: odoo/addons/delivery_mondialrelay/models/delivery_carrier.py<br/></p><hr/><h2>Original: odoo/addons/delivery/models/delivery_carrier.py</h2><h3>Fields</h3><details><summary id="f-active">active <span class="position">@ line 37</span></summary><pre>active = fields.Boolean(default=True)</pre></details><details><summary id="f-amount">amount <span class="position">@ line 85</span></summary><pre>amount = fields.Float(
        string="Amount",
        default=1000,
        help="Amount of the order to benefit from a free shipping, expressed in the company currency",
    )</pre></details><details><summary id="f-can_generate_return">can_generate_return <span class="position">@ line 91</span></summary><pre>can_generate_return = fields.Boolean(compute="_compute_can_generate_return")</pre></details><details><summary id="f-carrier_description">carrier_description <span class="position">@ line 77</span></summary><pre>carrier_description = fields.Text(
        'Carrier Description', translate=True,
        help="A description of the delivery method that you want to communicate to your customers on the Sales Order and sales confirmation email."
             "E.g. instructions for customers to follow.")</pre></details><details><summary id="f-company_id">company_id <span class="position">@ line 49</span></summary><pre>company_id = fields.Many2one('res.company', string='Company', related='product_id.company_id', store=True, readonly=False)</pre></details><details><summary id="f-country_ids">country_ids <span class="position">@ line 62</span></summary><pre>country_ids = fields.Many2many('res.country', 'delivery_carrier_country_rel', 'carrier_id', 'country_id', 'Countries')</pre></details><details><summary id="f-currency_id">currency_id <span class="position">@ line 52</span></summary><pre>currency_id = fields.Many2one(related='product_id.currency_id')</pre></details><details><summary id="f-debug_logging">debug_logging <span class="position">@ line 48</span></summary><pre>debug_logging = fields.Boolean('Debug logging', help="Log requests in order to ease debugging")</pre></details><details><summary id="f-delivery_type">delivery_type <span class="position">@ line 40</span></summary><pre>delivery_type = fields.Selection(
        [('base_on_rule', 'Based on Rules'), ('fixed', 'Fixed Price')],
        string='Provider',
        default='fixed',
        required=True,
    )</pre></details><details><summary id="f-excluded_tag_ids">excluded_tag_ids <span class="position">@ line 74</span></summary><pre>excluded_tag_ids = fields.Many2many(string='Excluded Tags', comodel_name='product.tag', relation='product_tag_delivery_carrier_excluded_rel',
                                        help="The method is NOT available if at least one product of the order has one of these tags.")</pre></details><details><summary id="f-fixed_margin">fixed_margin <span class="position">@ line 83</span></summary><pre>fixed_margin = fields.Float(help='This fixed amount will be added to the shipping price.')</pre></details><details><summary id="f-fixed_price">fixed_price <span class="position">@ line 316</span></summary><pre>fixed_price = fields.Float(compute='_compute_fixed_price', inverse='_set_product_fixed_price', store=True, string='Fixed Price')</pre></details><details><summary id="f-free_over">free_over <span class="position">@ line 84</span></summary><pre>free_over = fields.Boolean('Free if order amount is above', help="If the order total amount (shipping excluded) is above or equal to this value, the customer benefits from a free shipping", default=False)</pre></details><details><summary id="f-get_return_label_from_portal">get_return_label_from_portal <span class="position">@ line 93</span></summary><pre>get_return_label_from_portal = fields.Boolean(string="Return Label Accessible from Customer Portal", help="The return label can be downloaded by the customer from the customer portal.")</pre></details><details><summary id="f-integration_level">integration_level <span class="position">@ line 46</span></summary><pre>integration_level = fields.Selection([('rate', 'Get Rate'), ('rate_and_ship', 'Get Rate and Create Shipment')], string="Integration Level", default='rate_and_ship', help="Action while validating Delivery Orders")</pre></details><details><summary id="f-invoice_policy">invoice_policy <span class="position">@ line 54</span></summary><pre>invoice_policy = fields.Selection(
        selection=[('estimated', "Estimated cost")],
        string="Invoicing Policy",
        default='estimated',
        required=True,
        help="Estimated Cost: the customer will be invoiced the estimated cost of the shipping.",
    )</pre></details><details><summary id="f-margin">margin <span class="position">@ line 82</span></summary><pre>margin = fields.Float(help='This percentage will be added to the shipping price.')</pre></details><details><summary id="f-max_volume">max_volume <span class="position">@ line 70</span></summary><pre>max_volume = fields.Float('Max Volume', help="If the total volume of the order is over this volume, the method won't be available.")</pre></details><details><summary id="f-max_weight">max_weight <span class="position">@ line 68</span></summary><pre>max_weight = fields.Float('Max Weight', help="If the total weight of the order is over this weight, the method won't be available.")</pre></details><details><summary id="f-must_have_tag_ids">must_have_tag_ids <span class="position">@ line 72</span></summary><pre>must_have_tag_ids = fields.Many2many(string='Must Have Tags', comodel_name='product.tag', relation='product_tag_delivery_carrier_must_have_rel',
                                         help="The method is available only if at least one product of the order has one of these tags.")</pre></details><details><summary id="f-name">name <span class="position">@ line 36</span></summary><pre>name = fields.Char('Delivery Method', required=True, translate=True)</pre></details><details><summary id="f-price_rule_ids">price_rule_ids <span class="position">@ line 102</span></summary><pre>price_rule_ids = fields.One2many(
        'delivery.price.rule', 'carrier_id', 'Pricing Rules', copy=True
    )</pre></details><details><summary id="f-prod_environment">prod_environment <span class="position">@ line 47</span></summary><pre>prod_environment = fields.Boolean("Environment", help="Set to True if your credentials are certified for production.")</pre></details><details><summary id="f-product_id">product_id <span class="position">@ line 50</span></summary><pre>product_id = fields.Many2one('product.product', string='Delivery Product', required=True, ondelete='restrict')</pre></details><details><summary id="f-return_label_on_delivery">return_label_on_delivery <span class="position">@ line 92</span></summary><pre>return_label_on_delivery = fields.Boolean(string="Generate Return Label", help="The return label is automatically generated at the delivery.")</pre></details><details><summary id="f-sequence">sequence <span class="position">@ line 38</span></summary><pre>sequence = fields.Integer(help="Determine the display order", default=10)</pre></details><details><summary id="f-shipping_insurance">shipping_insurance <span class="position">@ line 96</span></summary><pre>shipping_insurance = fields.Integer(
        "Insurance Percentage",
        help="Shipping insurance is a service which may reimburse senders whose parcels are lost, stolen, and/or damaged in transit.",
        default=0
    )</pre></details><details><summary id="f-state_ids">state_ids <span class="position">@ line 63</span></summary><pre>state_ids = fields.Many2many('res.country.state', 'delivery_carrier_state_rel', 'carrier_id', 'state_id', 'States')</pre></details><details><summary id="f-supports_shipping_insurance">supports_shipping_insurance <span class="position">@ line 95</span></summary><pre>supports_shipping_insurance = fields.Boolean(compute="_compute_supports_shipping_insurance")</pre></details><details><summary id="f-tracking_url">tracking_url <span class="position">@ line 51</span></summary><pre>tracking_url = fields.Char(string='Tracking Link', help="This option adds a link for the customer in the portal to track their package easily. Use <shipmenttrackingnumber> as a placeholder in your URL.")</pre></details><details><summary id="f-volume_uom_name">volume_uom_name <span class="position">@ line 71</span></summary><pre>volume_uom_name = fields.Char(string='Volume unit of measure label', compute='_compute_volume_uom_name')</pre></details><details><summary id="f-weight_uom_name">weight_uom_name <span class="position">@ line 69</span></summary><pre>weight_uom_name = fields.Char(string='Weight unit of measure label', compute='_compute_weight_uom_name')</pre></details><details><summary id="f-zip_prefix_ids">zip_prefix_ids <span class="position">@ line 64</span></summary><pre>zip_prefix_ids = fields.Many2many(
        'delivery.zip.prefix', 'delivery_zip_prefix_rel', 'carrier_id', 'zip_prefix_id', 'Zip Prefixes',
        help="Prefixes of zip codes that this carrier applies to. Note that regular expressions can be used to support countries with varying zip code lengths, i.e. '$' can be added to end of prefix to match the exact zip (e.g. '100$' will only match '100' and not '1000')")</pre></details><h3>Methods</h3><ul id="m-_apply_margins"><li>_apply_margins(self, price) <span class="position">@ line 238</span></li></ul><ul id="m-_compute_currency"><li>_compute_currency(self, order, price, conversion) <span class="position">@ line 375</span></li></ul><ul id="m-_compute_volume_uom_name"><li>_compute_volume_uom_name(self) <span class="position">@ line 121</span></li></ul><ul id="m-_compute_weight_uom_name"><li>_compute_weight_uom_name(self) <span class="position">@ line 117</span></li></ul><ul id="m-_get_conversion_currencies"><li>_get_conversion_currencies(self, order, conversion) <span class="position">@ line 367</span></li></ul><details><summary id="m-_get_delivery_type">_get_delivery_type(self) <span class="position">@ line 229</span></summary><pre>Return the delivery type.

This method needs to be overridden by a delivery carrier module if the delivery type is not
stored on the field `delivery_type`.</pre></details><ul id="m-_get_price_available"><li>_get_price_available(self, order) <span class="position">@ line 381</span></li></ul><details><summary id="m-_get_price_dict">_get_price_dict(self, total, weight, volume, quantity, wv) <span class="position">@ line 411</span></summary><pre>Hook allowing to retrieve dict to be used in _get_price_from_picking() function.
Hook to be overridden when we need to add some field to product and use it in variable factor from price rules.</pre></details><ul id="m-_get_price_from_picking"><li>_get_price_from_picking(self, total, weight, volume, quantity, wv) <span class="position">@ line 422</span></li></ul><ul id="m-_is_available_for_order"><li>_is_available_for_order(self, order) <span class="position">@ line 156</span></li></ul><ul id="m-_match"><li>_match(self, partner, order) <span class="position">@ line 170</span></li></ul><ul id="m-_match_address"><li>_match_address(self, partner) <span class="position">@ line 174</span></li></ul><ul id="m-_match_excluded_tags"><li>_match_excluded_tags(self, order) <span class="position">@ line 190</span></li></ul><ul id="m-_match_must_have_tags"><li>_match_must_have_tags(self, order) <span class="position">@ line 186</span></li></ul><ul id="m-_match_volume"><li>_match_volume(self, order) <span class="position">@ line 198</span></li></ul><ul id="m-_match_weight"><li>_match_weight(self, order) <span class="position">@ line 194</span></li></ul><ul id="m-_set_product_fixed_price"><li>_set_product_fixed_price(self) <span class="position">@ line 323</span></li></ul><ul id="m-available_carriers"><li>available_carriers(self, partner, order) <span class="position">@ line 167</span></li></ul><ul id="m-base_on_rule_rate_shipment"><li>base_on_rule_rate_shipment(self, order) <span class="position">@ line 344</span></li></ul><ul id="m-copy_data"><li>copy_data(self, default) <span class="position">@ line 225</span></li></ul><ul id="m-fixed_rate_shipment"><li>fixed_rate_shipment(self, order) <span class="position">@ line 327</span></li></ul><ul id="m-install_more_provider"><li>install_more_provider(self) <span class="position">@ line 143</span></li></ul><ul id="m-log_xml"><li>log_xml(self, xml_string, func) <span class="position">@ line 288</span></li></ul><details><summary id="m-rate_shipment">rate_shipment(self, order) <span class="position">@ line 248</span></summary><pre>Compute the price of the order shipment

:param order: record of sale.order
:return dict: {'success': boolean,
'price': a float,
'error_message': a string containing an error message,
'warning_message': a string containing a warning message}
# TODO maybe the currency code?</pre></details><ul id="m-toggle_debug"><li>toggle_debug(self) <span class="position">@ line 139</span></li></ul><ul id="m-toggle_prod_environment"><li>toggle_prod_environment(self) <span class="position">@ line 135</span></li></ul><h2>Inherited: odoo/addons/website_sale_picking/models/delivery_carrier.py</h2><h3>Fields</h3><details><summary id="f-delivery_type">delivery_type <span class="position">@ line 12</span></summary><pre>delivery_type = fields.Selection(selection_add=[
        ('onsite', 'Pickup in store')
    ], ondelete={'onsite': 'set default'})</pre></details><details><summary id="f-warehouse_id">warehouse_id <span class="position">@ line 17</span></summary><pre>warehouse_id = fields.Many2one('stock.warehouse', 'Warehouse')</pre></details><h3>Methods</h3><ul id="m-onsite_cancel_shipment"><li>onsite_cancel_shipment(self, pickings) <span class="position">@ line 42</span></li></ul><details><summary id="m-onsite_rate_shipment">onsite_rate_shipment(self, order) <span class="position">@ line 25</span></summary><pre>Required to show the price on the checkout page for the onsite delivery type</pre></details><ul id="m-onsite_send_shipping"><li>onsite_send_shipping(self, pickings) <span class="position">@ line 36</span></li></ul><h2>Inherited: odoo/addons/website_sale/models/delivery_carrier.py</h2><h3>Fields</h3><details><summary id="f-website_description">website_description <span class="position">@ line 10</span></summary><pre>website_description = fields.Text(
        string="Description for Online Quotations",
        related='product_id.description_sale',
        readonly=False,
    )</pre></details><h2>Inherited: odoo/addons/stock_delivery/models/delivery_carrier.py</h2><h3>Fields</h3><details><summary id="f-invoice_policy">invoice_policy <span class="position">@ line 19</span></summary><pre>invoice_policy = fields.Selection(
        selection_add=[('real', 'Real cost')],
        ondelete={'real': 'set default'},
        help="Estimated Cost: the customer will be invoiced the estimated cost of the shipping.\n"
        "Real Cost: the customer will be invoiced the real cost of the shipping, the cost of the"
        "shipping will be updated on the SO after the delivery."
    )</pre></details><details><summary id="f-route_ids">route_ids <span class="position">@ line 27</span></summary><pre>route_ids = fields.Many2many(
        'stock.route', 'stock_route_shipping', 'shipping_id', 'route_id', 'Routes',
        domain=[('shipping_selectable', '=', True)])</pre></details><h3>Methods</h3><ul id="m-_get_commodities_from_order"><li>_get_commodities_from_order(self, order) <span class="position">@ line 199</span></li></ul><ul id="m-_get_commodities_from_stock_move_lines"><li>_get_commodities_from_stock_move_lines(self, move_lines) <span class="position">@ line 215</span></li></ul><details><summary id="m-_get_default_custom_package_code">_get_default_custom_package_code(self) <span class="position">@ line 88</span></summary><pre>Some delivery carriers require a prefix to be sent in order to use custom
packages (ie not official ones). This optional method will return it as a string.</pre></details><ul id="m-_get_delivery_doc_prefix"><li>_get_delivery_doc_prefix(self) <span class="position">@ line 66</span></li></ul><ul id="m-_get_delivery_label_prefix"><li>_get_delivery_label_prefix(self) <span class="position">@ line 63</span></li></ul><ul id="m-_get_packages_from_order"><li>_get_packages_from_order(self, order, default_package_type) <span class="position">@ line 102</span></li></ul><ul id="m-_get_packages_from_picking"><li>_get_packages_from_picking(self, picking, default_package_type) <span class="position">@ line 140</span></li></ul><ul id="m-_product_price_to_company_currency"><li>_product_price_to_company_currency(self, quantity, product, company) <span class="position">@ line 232</span></li></ul><ul id="m-base_on_rule_cancel_shipment"><li>base_on_rule_cancel_shipment(self, pickings) <span class="position">@ line 273</span></li></ul><ul id="m-base_on_rule_get_tracking_link"><li>base_on_rule_get_tracking_link(self, picking) <span class="position">@ line 268</span></li></ul><ul id="m-base_on_rule_send_shipping"><li>base_on_rule_send_shipping(self, pickings) <span class="position">@ line 258</span></li></ul><details><summary id="m-cancel_shipment">cancel_shipment(self, pickings) <span class="position">@ line 79</span></summary><pre>Cancel a shipment

:param pickings: A recordset of pickings</pre></details><ul id="m-fixed_cancel_shipment"><li>fixed_cancel_shipment(self, pickings) <span class="position">@ line 251</span></li></ul><ul id="m-fixed_get_tracking_link"><li>fixed_get_tracking_link(self, picking) <span class="position">@ line 246</span></li></ul><ul id="m-fixed_send_shipping"><li>fixed_send_shipping(self, pickings) <span class="position">@ line 239</span></li></ul><ul id="m-get_return_label"><li>get_return_label(self, pickings, tracking_number, origin_date) <span class="position">@ line 50</span></li></ul><ul id="m-get_return_label_prefix"><li>get_return_label_prefix(self) <span class="position">@ line 60</span></li></ul><details><summary id="m-get_tracking_link">get_tracking_link(self, picking) <span class="position">@ line 69</span></summary><pre>Ask the tracking link to the service provider

:param picking: record of stock.picking
:return str: an URL containing the tracking link or False</pre></details><details><summary id="m-send_shipping">send_shipping(self, pickings) <span class="position">@ line 35</span></summary><pre>Send the package to the service provider

:param pickings: A recordset of pickings
:return list: A list of dictionaries (one per picking) containing of the form::
{ 'exact_price': price,
'tracking_number': number }
# TODO missing labels per package
# TODO missing currency
# TODO missing success, error, warnings</pre></details><h2>Inherited: odoo/addons/delivery_mondialrelay/models/delivery_carrier.py</h2><h3>Fields</h3><details><summary id="f-is_mondialrelay">is_mondialrelay <span class="position">@ line 11</span></summary><pre>is_mondialrelay = fields.Boolean(compute='_compute_is_mondialrelay', search='_search_is_mondialrelay')</pre></details><details><summary id="f-mondialrelay_brand">mondialrelay_brand <span class="position">@ line 12</span></summary><pre>mondialrelay_brand = fields.Char(string='Brand Code', default='BDTEST  ')</pre></details><details><summary id="f-mondialrelay_packagetype">mondialrelay_packagetype <span class="position">@ line 13</span></summary><pre>mondialrelay_packagetype = fields.Char(default="24R", groups="base.group_system")</pre></details><h3>Methods</h3><ul id="m-_search_is_mondialrelay"><li>_search_is_mondialrelay(self, operator, value) <span class="position">@ line 20</span></li></ul><ul id="m-base_on_rule_get_tracking_link"><li>base_on_rule_get_tracking_link(self, picking) <span class="position">@ line 32</span></li></ul><ul id="m-fixed_get_tracking_link"><li>fixed_get_tracking_link(self, picking) <span class="position">@ line 27</span></li></ul><script src="class.js"></script></body></html>
