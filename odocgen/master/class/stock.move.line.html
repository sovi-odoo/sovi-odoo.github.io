<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>stock.move.line - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>stock.move.line</h1><p>Originally defined in: odoo/addons/stock/models/stock_move_line.py</p><p>Inherited in: odoo/addons/stock_picking_batch/models/stock_move_line.py<br/>Inherited in: odoo/addons/stock_delivery/models/stock_move.py<br/>Inherited in: odoo/addons/stock_account/models/stock_move_line.py<br/>Inherited in: odoo/addons/sale_mrp/models/stock_move.py<br/>Inherited in: odoo/addons/product_expiry/models/stock_move_line.py<br/>Inherited in: odoo/addons/mrp_subcontracting/models/stock_move_line.py<br/>Inherited in: odoo/addons/mrp/models/stock_move.py<br/></p><hr/><h2>Original: odoo/addons/stock/models/stock_move_line.py</h2><h3>Fields</h3><details><summary id="f-company_id">company_id <span class="position">@ line 26</span></summary><pre>company_id = fields.Many2one('res.company', string='Company', readonly=True, required=True, index=True)</pre></details><details><summary id="f-consume_line_ids">consume_line_ids <span class="position">@ line 79</span></summary><pre>consume_line_ids = fields.Many2many('stock.move.line', 'stock_move_line_consume_rel', 'consume_line_id', 'produce_line_id')</pre></details><details><summary id="f-date">date <span class="position">@ line 55</span></summary><pre>date = fields.Datetime('Date', default=fields.Datetime.now, required=True)</pre></details><details><summary id="f-description_picking">description_picking <span class="position">@ line 84</span></summary><pre>description_picking = fields.Text(string="Description picking")</pre></details><details><summary id="f-is_inventory">is_inventory <span class="position">@ line 77</span></summary><pre>is_inventory = fields.Boolean(related='move_id.is_inventory')</pre></details><details><summary id="f-is_locked">is_locked <span class="position">@ line 78</span></summary><pre>is_locked = fields.Boolean(related='move_id.is_locked', readonly=True)</pre></details><details><summary id="f-location_dest_id">location_dest_id <span class="position">@ line 65</span></summary><pre>location_dest_id = fields.Many2one('stock.location', 'To', domain="[('usage', '!=', 'view')]", check_company=True, required=True, compute="_compute_location_id", store=True, readonly=False, precompute=True)</pre></details><details><summary id="f-location_dest_usage">location_dest_usage <span class="position">@ line 67</span></summary><pre>location_dest_usage = fields.Selection(string="Destination Location Type", related='location_dest_id.usage')</pre></details><details><summary id="f-location_id">location_id <span class="position">@ line 61</span></summary><pre>location_id = fields.Many2one(
        'stock.location', 'From', domain="[('usage', '!=', 'view')]", check_company=True, required=True,
        compute="_compute_location_id", store=True, readonly=False, precompute=True,
    )</pre></details><details><summary id="f-location_usage">location_usage <span class="position">@ line 66</span></summary><pre>location_usage = fields.Selection(string="Source Location Type", related='location_id.usage')</pre></details><details><summary id="f-lot_id">lot_id <span class="position">@ line 46</span></summary><pre>lot_id = fields.Many2one(
        'stock.lot', 'Lot/Serial Number',
        domain="[('product_id', '=', product_id)]", check_company=True)</pre></details><details><summary id="f-lot_name">lot_name <span class="position">@ line 49</span></summary><pre>lot_name = fields.Char('Lot/Serial Number Name')</pre></details><details><summary id="f-lots_visible">lots_visible <span class="position">@ line 68</span></summary><pre>lots_visible = fields.Boolean(compute='_compute_lots_visible')</pre></details><details><summary id="f-move_id">move_id <span class="position">@ line 23</span></summary><pre>move_id = fields.Many2one(
        'stock.move', 'Stock Operation',
        check_company=True, index=True)</pre></details><details><summary id="f-origin">origin <span class="position">@ line 83</span></summary><pre>origin = fields.Char(related='move_id.origin', string='Source')</pre></details><details><summary id="f-owner_id">owner_id <span class="position">@ line 57</span></summary><pre>owner_id = fields.Many2one(
        'res.partner', 'From Owner',
        check_company=True, index='btree_not_null',
        help="When validating the transfer, the products will be taken from this owner.")</pre></details><details><summary id="f-package_id">package_id <span class="position">@ line 41</span></summary><pre>package_id = fields.Many2one(
        'stock.quant.package', 'Source Package', ondelete='restrict',
        check_company=True,
        domain="[('location_id', '=', location_id)]")</pre></details><details><summary id="f-package_level_id">package_level_id <span class="position">@ line 45</span></summary><pre>package_level_id = fields.Many2one('stock.package_level', 'Package Level', check_company=True)</pre></details><details><summary id="f-picked">picked <span class="position">@ line 40</span></summary><pre>picked = fields.Boolean('Picked', compute='_compute_picked', store=True, readonly=False, copy=False)</pre></details><details><summary id="f-picking_code">picking_code <span class="position">@ line 70</span></summary><pre>picking_code = fields.Selection(related='picking_type_id.code', readonly=True)</pre></details><details><summary id="f-picking_id">picking_id <span class="position">@ line 18</span></summary><pre>picking_id = fields.Many2one(
        'stock.picking', 'Transfer', auto_join=True,
        check_company=True,
        index=True,
        help='The stock operation where the packing has been made')</pre></details><details><summary id="f-picking_location_dest_id">picking_location_dest_id <span class="position">@ line 88</span></summary><pre>picking_location_dest_id = fields.Many2one(related='picking_id.location_dest_id')</pre></details><details><summary id="f-picking_location_id">picking_location_id <span class="position">@ line 87</span></summary><pre>picking_location_id = fields.Many2one(related='picking_id.location_id')</pre></details><details><summary id="f-picking_partner_id">picking_partner_id <span class="position">@ line 69</span></summary><pre>picking_partner_id = fields.Many2one(related='picking_id.partner_id', readonly=True)</pre></details><details><summary id="f-picking_type_entire_packs">picking_type_entire_packs <span class="position">@ line 75</span></summary><pre>picking_type_entire_packs = fields.Boolean(related='picking_id.picking_type_id.show_entire_packs', readonly=True)</pre></details><details><summary id="f-picking_type_id">picking_type_id <span class="position">@ line 71</span></summary><pre>picking_type_id = fields.Many2one(
        'stock.picking.type', 'Operation type', compute='_compute_picking_type_id', search='_search_picking_type_id')</pre></details><details><summary id="f-picking_type_use_create_lots">picking_type_use_create_lots <span class="position">@ line 73</span></summary><pre>picking_type_use_create_lots = fields.Boolean(related='picking_type_id.use_create_lots', readonly=True)</pre></details><details><summary id="f-picking_type_use_existing_lots">picking_type_use_existing_lots <span class="position">@ line 74</span></summary><pre>picking_type_use_existing_lots = fields.Boolean(related='picking_type_id.use_existing_lots', readonly=True)</pre></details><details><summary id="f-produce_line_ids">produce_line_ids <span class="position">@ line 80</span></summary><pre>produce_line_ids = fields.Many2many('stock.move.line', 'stock_move_line_consume_rel', 'produce_line_id', 'consume_line_id')</pre></details><details><summary id="f-product_category_name">product_category_name <span class="position">@ line 33</span></summary><pre>product_category_name = fields.Char(related="product_id.categ_id.complete_name", string="Product Category")</pre></details><details><summary id="f-product_id">product_id <span class="position">@ line 27</span></summary><pre>product_id = fields.Many2one('product.product', 'Product', ondelete="cascade", check_company=True, domain="[('type', '!=', 'service')]", index=True)</pre></details><details><summary id="f-product_packaging_qty">product_packaging_qty <span class="position">@ line 86</span></summary><pre>product_packaging_qty = fields.Float(string="Reserved Packaging Quantity", compute='_compute_product_packaging_qty')</pre></details><details><summary id="f-product_uom_category_id">product_uom_category_id <span class="position">@ line 32</span></summary><pre>product_uom_category_id = fields.Many2one(related='product_id.uom_id.category_id')</pre></details><details><summary id="f-product_uom_id">product_uom_id <span class="position">@ line 28</span></summary><pre>product_uom_id = fields.Many2one(
        'uom.uom', 'Unit of Measure', required=True, domain="[('category_id', '=', product_uom_category_id)]",
        compute="_compute_product_uom_id", store=True, readonly=False, precompute=True,
    )</pre></details><details><summary id="f-quant_id">quant_id <span class="position">@ line 85</span></summary><pre>quant_id = fields.Many2one('stock.quant', "Pick From", store=False)</pre></details><details><summary id="f-quantity">quantity <span class="position">@ line 34</span></summary><pre>quantity = fields.Float(
        'Quantity', digits='Product Unit of Measure', copy=False, store=True,
        compute='_compute_quantity', readonly=False)</pre></details><details><summary id="f-quantity_product_uom">quantity_product_uom <span class="position">@ line 37</span></summary><pre>quantity_product_uom = fields.Float(
        'Quantity in Product UoM', digits='Product Unit of Measure',
        copy=False, compute='_compute_quantity_product_uom', store=True)</pre></details><details><summary id="f-reference">reference <span class="position">@ line 81</span></summary><pre>reference = fields.Char(related='move_id.reference', store=True, related_sudo=False, readonly=False)</pre></details><details><summary id="f-result_package_id">result_package_id <span class="position">@ line 50</span></summary><pre>result_package_id = fields.Many2one(
        'stock.quant.package', 'Destination Package',
        ondelete='restrict', required=False, check_company=True,
        domain="['|', '|', ('location_id', '=', False), ('location_id', '=', location_dest_id), ('id', '=', package_id)]",
        help="If set, the operations are packed into this package")</pre></details><details><summary id="f-scheduled_date">scheduled_date <span class="position">@ line 56</span></summary><pre>scheduled_date = fields.Datetime('Scheduled Date', related='move_id.date')</pre></details><details><summary id="f-state">state <span class="position">@ line 76</span></summary><pre>state = fields.Selection(related='move_id.state', store=True, related_sudo=False)</pre></details><details><summary id="f-tracking">tracking <span class="position">@ line 82</span></summary><pre>tracking = fields.Selection(related='product_id.tracking', readonly=True)</pre></details><h3>Methods</h3><details><summary id="m-_action_done">_action_done(self) <span class="position">@ line 508</span></summary><pre>This method is called during a move's `action_done`. It'll actually move a quant from
the source location to the destination location, and unreserve if needed in the source
location.

This method is intended to be called on all the move lines of a move. This method is not
intended to be called when editing a `done` move (that's what the override of `write` here
is done.</pre></details><ul id="m-_apply_putaway_strategy"><li>_apply_putaway_strategy(self) <span class="position">@ line 245</span></li></ul><ul id="m-_compute_sale_price"><li>_compute_sale_price(self) <span class="position">@ line 859</span></li></ul><ul id="m-_copy_quant_info"><li>_copy_quant_info(self, vals) <span class="position">@ line 884</span></li></ul><details><summary id="m-_create_and_assign_production_lot">_create_and_assign_production_lot(self) <span class="position">@ line 642</span></summary><pre>Creates and assign new production lots for move lines.</pre></details><details><summary id="m-_free_reservation">_free_reservation(self, product_id, location_id, quantity, lot_id, package_id, owner_id, ml_ids_to_ignore) <span class="position">@ line 692</span></summary><pre>When editing a done move line or validating one with some forced quantities, it is
possible to impact quants that were not reserved. It is therefore necessary to edit or
unlink the move lines that reserved a quantity now unavailable.

:param ml_ids_to_ignore: OrderedSet of `stock.move.line` ids that should NOT be unreserved</pre></details><details><summary id="m-_get_aggregated_product_quantities">_get_aggregated_product_quantities(self) <span class="position">@ line 776</span></summary><pre>Returns a dictionary of products (key = id+name+description+uom+packaging) and corresponding values of interest.

Allows aggregation of data across separate move lines for the same product. This is expected to be useful
in things such as delivery reports. Dict key is made as a combination of values we expect to want to group
the products by (i.e. so data is not lost). This function purposely ignores lots/SNs because these are
expected to already be properly grouped by line.

returns: dictionary {product_id+name+description+uom+packaging: {product, name, description, quantity, product_uom, packaging}, ...}</pre></details><ul id="m-_get_aggregated_properties"><li>_get_aggregated_properties(self, move_line, move) <span class="position">@ line 758</span></li></ul><ul id="m-_get_default_dest_location"><li>_get_default_dest_location(self) <span class="position">@ line 276</span></li></ul><ul id="m-_get_putaway_additional_qty"><li>_get_putaway_additional_qty(self) <span class="position">@ line 283</span></li></ul><ul id="m-_get_revert_inventory_move_values"><li>_get_revert_inventory_move_values(self) <span class="position">@ line 913</span></li></ul><ul id="m-_get_similar_move_lines"><li>_get_similar_move_lines(self) <span class="position">@ line 627</span></li></ul><ul id="m-_log_message"><li>_log_message(self, record, move, template, vals) <span class="position">@ line 672</span></li></ul><ul id="m-_prepare_new_lot_vals"><li>_prepare_new_lot_vals(self) <span class="position">@ line 635</span></li></ul><ul id="m-_reservation_is_updatable"><li>_reservation_is_updatable(self, quantity, reserved_quant) <span class="position">@ line 661</span></li></ul><ul id="m-_search_picking_type_id"><li>_search_picking_type_id(self, operator, value) <span class="position">@ line 137</span></li></ul><details><summary id="m-_synchronize_quant">_synchronize_quant(self, quantity, location, action, in_date) <span class="position">@ line 605</span></summary><pre>quantity should be express in product's UoM</pre></details><ul id="m-action_open_reference"><li>action_open_reference(self) <span class="position">@ line 895</span></li></ul><ul id="m-action_put_in_pack"><li>action_put_in_pack(self) <span class="position">@ line 908</span></li></ul><ul id="m-action_revert_inventory"><li>action_revert_inventory(self) <span class="position">@ line 940</span></li></ul><ul id="m-init"><li>init(self) <span class="position">@ line 290</span></li></ul><ul id="m-unlink"><li>unlink(self) <span class="position">@ line 487</span></li></ul><ul id="m-write"><li>write(self, vals) <span class="position">@ line 373</span></li></ul><h2>Inherited: odoo/addons/stock_picking_batch/models/stock_move_line.py</h2><h3>Fields</h3><details><summary id="f-batch_id">batch_id <span class="position">@ line 14</span></summary><pre>batch_id = fields.Many2one(related='picking_id.batch_id', store=True)</pre></details><h3>Methods</h3><details><summary id="m-_add_to_wave">_add_to_wave(self, wave) <span class="position">@ line 32</span></summary><pre>Detach lines (and corresponding stock move from a picking to another). If wave is
passed, attach new picking into it. If not attach line to their original picking.

:param int wave: id of the wave picking on which to put the move lines.</pre></details><ul id="m-action_open_add_to_wave"><li>action_open_add_to_wave(self) <span class="position">@ line 16</span></li></ul><h2>Inherited: odoo/addons/stock_delivery/models/stock_move.py</h2><h3>Fields</h3><details><summary id="f-carrier_id">carrier_id <span class="position">@ line 55</span></summary><pre>carrier_id = fields.Many2one(related='picking_id.carrier_id', store=True)</pre></details><details><summary id="f-destination_country_code">destination_country_code <span class="position">@ line 54</span></summary><pre>destination_country_code = fields.Char(related='picking_id.destination_country_code')</pre></details><details><summary id="f-sale_price">sale_price <span class="position">@ line 53</span></summary><pre>sale_price = fields.Float(compute='_compute_sale_price')</pre></details><h3>Methods</h3><details><summary id="m-_get_aggregated_product_quantities">_get_aggregated_product_quantities(self) <span class="position">@ line 69</span></summary><pre>Returns dictionary of products and corresponding values of interest + hs_code

Unfortunately because we are working with aggregated data, we have to loop through the
aggregation to add more values to each datum. This extension adds on the hs_code value.

returns: dictionary {same_key_as_super: {same_values_as_super, hs_code}, ...}</pre></details><h2>Inherited: odoo/addons/stock_account/models/stock_move_line.py</h2><h3>Methods</h3><ul id="m-unlink"><li>unlink(self) <span class="position">@ line 56</span></li></ul><ul id="m-write"><li>write(self, vals) <span class="position">@ line 33</span></li></ul><h2>Inherited: odoo/addons/sale_mrp/models/stock_move.py</h2><h3>Methods</h3><ul id="m-_compute_sale_price"><li>_compute_sale_price(self) <span class="position">@ line 21</span></li></ul><h2>Inherited: odoo/addons/product_expiry/models/stock_move_line.py</h2><h3>Fields</h3><details><summary id="f-expiration_date">expiration_date <span class="position">@ line 13</span></summary><pre>expiration_date = fields.Datetime(
        string='Expiration Date', compute='_compute_expiration_date', store=True,
        help='This is the date on which the goods with this Serial Number may'
        ' become dangerous and must not be consumed.')</pre></details><details><summary id="f-is_expired">is_expired <span class="position">@ line 17</span></summary><pre>is_expired = fields.Boolean(related='lot_id.product_expiry_alert')</pre></details><details><summary id="f-use_expiration_date">use_expiration_date <span class="position">@ line 18</span></summary><pre>use_expiration_date = fields.Boolean(
        string='Use Expiration Date', related='product_id.use_expiration_date')</pre></details><h3>Methods</h3><details><summary id="m-_auto_init">_auto_init(self) <span class="position">@ line 21</span></summary><pre>Create column for 'expiration_date' here to avoid MemoryError when letting
the ORM compute it after module installation. Since both 'lot_id.expiration_date'
and 'product_id.use_expiration_date' are new fields introduced in this module,
there is no need for an UPDATE statement here.</pre></details><ul id="m-_prepare_new_lot_vals"><li>_prepare_new_lot_vals(self) <span class="position">@ line 62</span></li></ul><h2>Inherited: odoo/addons/mrp_subcontracting/models/stock_move_line.py</h2><h3>Methods</h3><ul id="m-write"><li>write(self, vals) <span class="position">@ line 22</span></li></ul><h2>Inherited: odoo/addons/mrp/models/stock_move.py</h2><h3>Fields</h3><details><summary id="f-description_bom_line">description_bom_line <span class="position">@ line 16</span></summary><pre>description_bom_line = fields.Char(related='move_id.description_bom_line')</pre></details><details><summary id="f-production_id">production_id <span class="position">@ line 15</span></summary><pre>production_id = fields.Many2one('mrp.production', 'Production Order', check_company=True)</pre></details><details><summary id="f-workorder_id">workorder_id <span class="position">@ line 14</span></summary><pre>workorder_id = fields.Many2one('mrp.workorder', 'Work Order', check_company=True)</pre></details><h3>Methods</h3><details><summary id="m-_get_aggregated_product_quantities">_get_aggregated_product_quantities(self) <span class="position">@ line 86</span></summary><pre>Returns dictionary of products and corresponding values of interest grouped by optional kit_name

Removes descriptions where description == kit_name. kit_name is expected to be passed as a
kwargs value because this is not directly stored in move_line_ids. Unfortunately because we
are working with aggregated data, we have to loop through the aggregation to do this removal.

arguments: kit_name (optional): string value of a kit name passed as a kwarg
returns: dictionary {same_key_as_super: {same_values_as_super, ...}</pre></details><ul id="m-_get_aggregated_properties"><li>_get_aggregated_properties(self, move_line, move) <span class="position">@ line 79</span></li></ul><ul id="m-_get_similar_move_lines"><li>_get_similar_move_lines(self) <span class="position">@ line 60</span></li></ul><ul id="m-_search_picking_type_id"><li>_search_picking_type_id(self, operator, value) <span class="position">@ line 28</span></li></ul><ul id="m-write"><li>write(self, vals) <span class="position">@ line 72</span></li></ul><script src="class.js"></script></body></html>
