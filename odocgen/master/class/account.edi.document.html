<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>account.edi.document - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>account.edi.document</h1><p>Originally defined in: odoo/addons/account_edi/models/account_edi_document.py</p><p>Inherited in: odoo/addons/l10n_sa_edi/models/account_edi_document.py<br/>Inherited in: odoo/addons/l10n_es_edi_tbai/models/account_edi_document.py<br/></p><hr/><h2>Original: odoo/addons/account_edi/models/account_edi_document.py</h2><h3>Fields</h3><details><summary id="f-attachment_id">attachment_id <span class="position">@ line 23</span></summary><pre>attachment_id = fields.Many2one(
        comodel_name='ir.attachment',
        groups='base.group_system',
        help="The file generated by edi_format_id when the invoice is posted (and this document is processed).",
    )</pre></details><details><summary id="f-blocking_level">blocking_level <span class="position">@ line 30</span></summary><pre>blocking_level = fields.Selection(
        selection=[('info', 'Info'), ('warning', 'Warning'), ('error', 'Error')],
        help="Blocks the current operation of the document depending on the error severity:\n"
        "  * Info: the document is not blocked and everything is working as it should.\n"
        "  * Warning: there is an error that doesn't prevent the current Electronic Invoicing operation to succeed.\n"
        "  * Error: there is an error that blocks the current Electronic Invoicing operation.")</pre></details><details><summary id="f-edi_content">edi_content <span class="position">@ line 40</span></summary><pre>edi_content = fields.Binary(compute='_compute_edi_content', compute_sudo=True)</pre></details><details><summary id="f-edi_format_id">edi_format_id <span class="position">@ line 22</span></summary><pre>edi_format_id = fields.Many2one('account.edi.format', required=True)</pre></details><details><summary id="f-edi_format_name">edi_format_name <span class="position">@ line 39</span></summary><pre>edi_format_name = fields.Char(string='Format Name', related='edi_format_id.name')</pre></details><details><summary id="f-error">error <span class="position">@ line 29</span></summary><pre>error = fields.Html(help='The text of the last error that happened during Electronic Invoice operation.')</pre></details><details><summary id="f-move_id">move_id <span class="position">@ line 21</span></summary><pre>move_id = fields.Many2one('account.move', required=True, ondelete='cascade', index=True)</pre></details><details><summary id="f-name">name <span class="position">@ line 38</span></summary><pre>name = fields.Char(related='attachment_id.name')</pre></details><details><summary id="f-state">state <span class="position">@ line 28</span></summary><pre>state = fields.Selection([('to_send', 'To Send'), ('sent', 'Sent'), ('to_cancel', 'To Cancel'), ('cancelled', 'Cancelled')])</pre></details><h3>Methods</h3><details><summary id="m-_filter_edi_attachments_for_mailing">_filter_edi_attachments_for_mailing(self) <span class="position">@ line 262</span></summary><pre>Will either return the information about the attachment of the edi document for adding the attachment in the
mail, or the attachment id to be linked to the 'send & print' wizard.
Can be overridden where e.g. a zip-file needs to be sent with the individual files instead of the entire zip
IMPORTANT:
* If the attachment's id is returned, no new attachment will be created, the existing one on the move is linked
to the wizard (see computed attachment_ids field in mail.compose.message).
* If the attachment's content is returned, a new one is created and linked to the wizard. Thus, when sending
the mail (clicking on 'send & print' in the wizard), a new attachment is added to the move (see
_action_send_mail in mail.compose.message).
:param document: an edi document
:return: dict {
'attachments': tuple with the name and base64 content of the attachment}
'attachment_ids': list containing the id of the attachment
}</pre></details><details><summary id="m-_prepare_jobs">_prepare_jobs(self) <span class="position">@ line 72</span></summary><pre>Creates a list of jobs to be performed by '_process_job' for the documents in self.
Each document represent a job, BUT if multiple documents have the same state, edi_format_id,
doc_type invoice and company_id AND the edi_format_id supports batching, they are grouped
into a single job.

:returns:  [{
'documents': account.edi.document,
'method_to_call': str,
}]</pre></details><details><summary id="m-_process_documents_no_web_services">_process_documents_no_web_services(self) <span class="position">@ line 205</span></summary><pre>Post and cancel all the documents that don't need a web service.</pre></details><details><summary id="m-_process_documents_web_services">_process_documents_web_services(self, job_count, with_commit) <span class="position">@ line 212</span></summary><pre>Post and cancel all the documents that need a web service.

:param job_count:   The maximum number of jobs to process if specified.
:param with_commit: Flag indicating a commit should be made between each job.
:return:            The number of remaining jobs to process.</pre></details><ul id="m-action_export_xml"><li>action_export_xml(self) <span class="position">@ line 65</span></li></ul><h2>Inherited: odoo/addons/l10n_sa_edi/models/account_edi_document.py</h2><h3>Methods</h3><details><summary id="m-_prepare_jobs">_prepare_jobs(self) <span class="position">@ line 11</span></summary><pre>Override to achieve the following:

If there is a job to process that may already be part of the chain (posted invoice that timed out),
Moves it at the beginning of the list.</pre></details><h2>Inherited: odoo/addons/l10n_es_edi_tbai/models/account_edi_document.py</h2><h3>Methods</h3><details><summary id="m-_prepare_jobs">_prepare_jobs(self) <span class="position">@ line 9</span></summary><pre>If there is a job to process that may already be part of the chain (posted invoice that timeout'ed),
Re-places it at the beginning of the list.</pre></details><script src="class.js"></script></body></html>
