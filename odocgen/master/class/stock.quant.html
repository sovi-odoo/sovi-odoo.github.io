<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>stock.quant - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>stock.quant</h1><p>Originally defined in: odoo/addons/stock/models/stock_quant.py</p><p>Inherited in: odoo/addons/stock_account/models/stock_quant.py<br/>Inherited in: odoo/addons/product_expiry/models/stock_quant.py<br/>Inherited in: odoo/addons/mrp_subcontracting/models/stock_quant.py<br/>Inherited in: odoo/addons/mrp/models/stock_quant.py<br/></p><hr/><h2>Original: odoo/addons/stock/models/stock_quant.py</h2><h3>Fields</h3><details><summary id="f-available_quantity">available_quantity <span class="position">@ line 88</span></summary><pre>available_quantity = fields.Float(
        'Available Quantity',
        help="On hand quantity which hasn't been reserved on a transfer, in the default unit of measure of the product",
        compute='_compute_available_quantity', digits='Product Unit of Measure')</pre></details><details><summary id="f-company_id">company_id <span class="position">@ line 57</span></summary><pre>company_id = fields.Many2one(related='location_id.company_id', string='Company', store=True, readonly=True)</pre></details><details><summary id="f-cyclic_inventory_frequency">cyclic_inventory_frequency <span class="position">@ line 64</span></summary><pre>cyclic_inventory_frequency = fields.Integer(related='location_id.cyclic_inventory_frequency')</pre></details><details><summary id="f-in_date">in_date <span class="position">@ line 92</span></summary><pre>in_date = fields.Datetime('Incoming Date', readonly=True, required=True, default=fields.Datetime.now)</pre></details><details><summary id="f-inventory_date">inventory_date <span class="position">@ line 110</span></summary><pre>inventory_date = fields.Date(
        'Scheduled Date', compute='_compute_inventory_date', store=True, readonly=False,
        help="Next date the On Hand Quantity should be counted.")</pre></details><details><summary id="f-inventory_diff_quantity">inventory_diff_quantity <span class="position">@ line 106</span></summary><pre>inventory_diff_quantity = fields.Float(
        'Difference', compute='_compute_inventory_diff_quantity', store=True,
        help="Indicates the gap between the product's theoretical quantity and its counted quantity.",
        readonly=True, digits='Product Unit of Measure')</pre></details><details><summary id="f-inventory_quantity">inventory_quantity <span class="position">@ line 98</span></summary><pre>inventory_quantity = fields.Float(
        'Counted Quantity', digits='Product Unit of Measure',
        help="The product's counted quantity.")</pre></details><details><summary id="f-inventory_quantity_auto_apply">inventory_quantity_auto_apply <span class="position">@ line 101</span></summary><pre>inventory_quantity_auto_apply = fields.Float(
        'Inventoried Quantity', digits='Product Unit of Measure',
        compute='_compute_inventory_quantity_auto_apply',
        inverse='_set_inventory_quantity', groups='stock.group_stock_manager'
    )</pre></details><details><summary id="f-inventory_quantity_set">inventory_quantity_set <span class="position">@ line 114</span></summary><pre>inventory_quantity_set = fields.Boolean(store=True, compute='_compute_inventory_quantity_set', readonly=False, default=False)</pre></details><details><summary id="f-is_favorite">is_favorite <span class="position">@ line 56</span></summary><pre>is_favorite = fields.Boolean(related='product_tmpl_id.is_favorite')</pre></details><details><summary id="f-is_outdated">is_outdated <span class="position">@ line 115</span></summary><pre>is_outdated = fields.Boolean('Quantity has been moved since last count', compute='_compute_is_outdated', search='_search_is_outdated')</pre></details><details><summary id="f-last_count_date">last_count_date <span class="position">@ line 113</span></summary><pre>last_count_date = fields.Date(compute='_compute_last_count_date', help='Last time the Quantity was Updated')</pre></details><details><summary id="f-location_id">location_id <span class="position">@ line 58</span></summary><pre>location_id = fields.Many2one(
        'stock.location', 'Location',
        domain=lambda self: self._domain_location_id(),
        auto_join=True, ondelete='restrict', required=True, index=True, check_company=True)</pre></details><details><summary id="f-lot_id">lot_id <span class="position">@ line 65</span></summary><pre>lot_id = fields.Many2one(
        'stock.lot', 'Lot/Serial Number', index=True,
        ondelete='restrict', check_company=True,
        domain=lambda self: self._domain_lot_id())</pre></details><details><summary id="f-lot_properties">lot_properties <span class="position">@ line 69</span></summary><pre>lot_properties = fields.Properties(related='lot_id.lot_properties', definition='product_id.lot_properties_definition', readonly=True)</pre></details><details><summary id="f-on_hand">on_hand <span class="position">@ line 94</span></summary><pre>on_hand = fields.Boolean('On Hand', store=False, search='_search_on_hand')</pre></details><details><summary id="f-owner_id">owner_id <span class="position">@ line 75</span></summary><pre>owner_id = fields.Many2one(
        'res.partner', 'Owner',
        help='This is the owner of the quant', check_company=True,
        index='btree_not_null')</pre></details><details><summary id="f-package_id">package_id <span class="position">@ line 71</span></summary><pre>package_id = fields.Many2one(
        'stock.quant.package', 'Package',
        domain="[('location_id', '=', location_id)]",
        help='The package containing this quant', ondelete='restrict', check_company=True, index=True)</pre></details><details><summary id="f-product_categ_id">product_categ_id <span class="position">@ line 95</span></summary><pre>product_categ_id = fields.Many2one(related='product_tmpl_id.categ_id')</pre></details><details><summary id="f-product_id">product_id <span class="position">@ line 46</span></summary><pre>product_id = fields.Many2one(
        'product.product', 'Product',
        domain=lambda self: self._domain_product_id(),
        ondelete='restrict', required=True, index=True, check_company=True)</pre></details><details><summary id="f-product_tmpl_id">product_tmpl_id <span class="position">@ line 50</span></summary><pre>product_tmpl_id = fields.Many2one(
        'product.template', string='Product Template',
        related='product_id.product_tmpl_id')</pre></details><details><summary id="f-product_uom_id">product_uom_id <span class="position">@ line 53</span></summary><pre>product_uom_id = fields.Many2one(
        'uom.uom', 'Unit of Measure',
        readonly=True, related='product_id.uom_id')</pre></details><details><summary id="f-quantity">quantity <span class="position">@ line 79</span></summary><pre>quantity = fields.Float(
        'Quantity',
        help='Quantity of products in this quant, in the default unit of measure of the product',
        readonly=True, digits='Product Unit of Measure')</pre></details><details><summary id="f-reserved_quantity">reserved_quantity <span class="position">@ line 83</span></summary><pre>reserved_quantity = fields.Float(
        'Reserved Quantity',
        default=0.0,
        help='Quantity of reserved products in this quant, in the default unit of measure of the product',
        readonly=True, required=True, digits='Product Unit of Measure')</pre></details><details><summary id="f-sn_duplicated">sn_duplicated <span class="position">@ line 70</span></summary><pre>sn_duplicated = fields.Boolean(string="Duplicated Serial Number", compute='_compute_sn_duplicated', help="If the same SN is in another Quant")</pre></details><details><summary id="f-storage_category_id">storage_category_id <span class="position">@ line 63</span></summary><pre>storage_category_id = fields.Many2one(related='location_id.storage_category_id', store=True)</pre></details><details><summary id="f-tracking">tracking <span class="position">@ line 93</span></summary><pre>tracking = fields.Selection(related='product_id.tracking', readonly=True)</pre></details><details><summary id="f-user_id">user_id <span class="position">@ line 116</span></summary><pre>user_id = fields.Many2one(
        'res.users', 'Assigned To', help="User assigned to do product count.")</pre></details><details><summary id="f-warehouse_id">warehouse_id <span class="position">@ line 62</span></summary><pre>warehouse_id = fields.Many2one('stock.warehouse', related='location_id.warehouse_id')</pre></details><h3>Methods</h3><ul id="m-_apply_inventory"><li>_apply_inventory(self) <span class="position">@ line 969</span></li></ul><details><summary id="m-_compute_last_count_date">_compute_last_count_date(self) <span class="position">@ line 131</span></summary><pre>We look at the stock move lines associated with every quant to get the last count date.</pre></details><ul id="m-_domain_location_id"><li>_domain_location_id(self) <span class="position">@ line 26</span></li></ul><ul id="m-_domain_lot_id"><li>_domain_lot_id(self) <span class="position">@ line 31</span></li></ul><ul id="m-_domain_product_id"><li>_domain_product_id(self) <span class="position">@ line 39</span></li></ul><details><summary id="m-_gather">_gather(self, product_id, location_id, lot_id, package_id, owner_id, strict, qty) <span class="position">@ line 765</span></summary><pre>if records in self, the records are filtered based on the wanted characteristics passed to this function
if not, a search is done with all the characteristics passed.</pre></details><details><summary id="m-_get_available_quantity">_get_available_quantity(self, product_id, location_id, lot_id, package_id, owner_id, strict, allow_negative) <span class="position">@ line 781</span></summary><pre>Return the available quantity, i.e. the sum of `quantity` minus the sum of
`reserved_quantity`, for the set of quants sharing the combination of `product_id,
location_id` if `strict` is set to False or sharing the *exact same characteristics*
otherwise.
The set of quants to filter from can be in `self`, if not a search will be done
This method is called in the following usecases:
- when a stock move checks its availability
- when a stock move actually assign
- when editing a move line, to check if the new value is forced or not
- when validating a move line with some forced values and have to potentially unlink an
equivalent move line in another picking
In the two first usecases, `strict` should be set to `False`, as we don't know what exact
quants we'll reserve, and the characteristics are meaningless in this context.
In the last ones, `strict` should be set to `True`, as we work on a specific set of
characteristics.

:return: available quantity as a float</pre></details><ul id="m-_get_gather_domain"><li>_get_gather_domain(self, product_id, location_id, lot_id, package_id, owner_id, strict) <span class="position">@ line 746</span></li></ul><details><summary id="m-_get_gs1_barcode">_get_gs1_barcode(self, gs1_quantity_rules_ai_by_uom) <span class="position">@ line 1296</span></summary><pre>Generates a GS1 barcode for the quant's properties (product, quantity and LN/SN.)

:param gs1_quantity_rules_ai_by_uom: contains the products' GS1 AI paired with the UoM id
:type gs1_quantity_rules_ai_by_uom: dict
:return: str</pre></details><details><summary id="m-_get_inventory_move_values">_get_inventory_move_values(self, qty, location_id, location_dest_id, package_id, package_dest_id) <span class="position">@ line 1182</span></summary><pre>Called when user manually set a new quantity (via `inventory_quantity`)
just before creating the corresponding stock move.

:param location_id: `stock.location`
:param location_dest_id: `stock.location`
:param package_id: `stock.quant.package`
:param package_dest_id: `stock.quant.package`
:return: dict with all values needed to create a new `stock.move` with its move line.</pre></details><ul id="m-_get_removal_strategy_sort_key"><li>_get_removal_strategy_sort_key(self, removal_strategy) <span class="position">@ line 737</span></li></ul><details><summary id="m-_get_reserve_quantity">_get_reserve_quantity(self, product_id, location_id, quantity, product_packaging_id, uom_id, lot_id, package_id, owner_id, strict) <span class="position">@ line 823</span></summary><pre>Get the quantity available to reserve for the set of quants
sharing the combination of `product_id, location_id` if `strict` is set to False or sharing
the *exact same characteristics* otherwise. If no quants are in self, `_gather` will do a search to fetch the quants
Typically, this method is called before the `stock.move.line` creation to know the reserved_qty that could be use.
It's also called by `_update_reserve_quantity` to find the quant to reserve.

:return: a list of tuples (quant, quantity_reserved) showing on which quant the reservation
could be done and how much the system is able to reserve on it</pre></details><details><summary id="m-_load_records_create">_load_records_create(self, values) <span class="position">@ line 294</span></summary><pre>Add default location if import file did not fill it</pre></details><details><summary id="m-_load_records_write">_load_records_write(self, values) <span class="position">@ line 303</span></summary><pre>Only allowed fields should be modified</pre></details><ul id="m-_read_group_select"><li>_read_group_select(self, aggregate_spec, query) <span class="position">@ line 307</span></li></ul><ul id="m-_run_least_packages_removal_strategy_astar"><li>_run_least_packages_removal_strategy_astar(self, domain, qty) <span class="position">@ line 615</span></li></ul><ul id="m-_search"><li>_search(self, domain, *args, **args) <span class="position">@ line 179</span></li></ul><ul id="m-_search_is_outdated"><li>_search_is_outdated(self, operator, value) <span class="position">@ line 203</span></li></ul><details><summary id="m-_search_on_hand">_search_on_hand(self, operator, value) <span class="position">@ line 236</span></summary><pre>Handle the "on_hand" filter, indirectly calling `_get_domain_locations`.</pre></details><details><summary id="m-_set_inventory_quantity">_set_inventory_quantity(self) <span class="position">@ line 222</span></summary><pre>Inverse method to create stock move when `inventory_quantity` is set
(`inventory_quantity` is only accessible in inventory mode).</pre></details><details><summary id="m-_set_view_context">_set_view_context(self) <span class="position">@ line 1228</span></summary><pre>Adds context when opening quants related views.</pre></details><ul id="m-action_apply_all"><li>action_apply_all(self) <span class="position">@ line 514</span></li></ul><ul id="m-action_apply_inventory"><li>action_apply_inventory(self) <span class="position">@ line 409</span></li></ul><ul id="m-action_clear_inventory_quantity"><li>action_clear_inventory_quantity(self) <span class="position">@ line 541</span></li></ul><ul id="m-action_inventory_history"><li>action_inventory_history(self) <span class="position">@ line 465</span></li></ul><ul id="m-action_reset"><li>action_reset(self) <span class="position">@ line 527</span></li></ul><ul id="m-action_set_inventory_quantity"><li>action_set_inventory_quantity(self) <span class="position">@ line 494</span></li></ul><ul id="m-action_set_inventory_quantity_zero"><li>action_set_inventory_quantity_zero(self) <span class="position">@ line 547</span></li></ul><ul id="m-action_stock_quant_relocate"><li>action_stock_quant_relocate(self) <span class="position">@ line 449</span></li></ul><ul id="m-action_view_orderpoints"><li>action_view_orderpoints(self) <span class="position">@ line 369</span></li></ul><ul id="m-action_view_stock_moves"><li>action_view_stock_moves(self) <span class="position">@ line 350</span></li></ul><ul id="m-action_warning_duplicated_sn"><li>action_warning_duplicated_sn(self) <span class="position">@ line 551</span></li></ul><details><summary id="m-get_aggregate_barcodes">get_aggregate_barcodes(self) <span class="position">@ line 1337</span></summary><pre>Generates and aggregates quants' barcodes. This method uses the config parameters
`stock.agg_barcode_max_length` to determine the length limit of a single aggregate barcode
(400 by default) and `stock.barcode_separator` to determine which character to use to
separate individual encodings (this method can't work without this parameter and will return
an empty list.) Depending on the number of quants, those parameters and the length of their
barcode encodings, there can be one or more aggregate barcodes.

:return: list</pre></details><details><summary id="m-move_quants">move_quants(self, location_dest_id, package_dest_id, message, unpack) <span class="position">@ line 1473</span></summary><pre>Directly move a stock.quant to another location and/or package by creating a stock.move.

:param location_dest_id: `stock.location` destination location for the quants
:param package_dest_id: `stock.quant.package´ destination package for the quants
:param message: String to fill the reference field on the generated stock.move
:param unpack: set to True when needing to unpack the quant</pre></details><details><summary id="m-write">write(self, vals) <span class="position">@ line 330</span></summary><pre>Override to handle the "inventory mode" and create the inventory move.</pre></details><h2>Inherited: odoo/addons/stock_account/models/stock_quant.py</h2><h3>Fields</h3><details><summary id="f-accounting_date">accounting_date <span class="position">@ line 15</span></summary><pre>accounting_date = fields.Date(
        'Accounting Date',
        help="Date at which the accounting entries will be created"
             " in case of automated inventory valuation."
             " If empty, the inventory date will be used.")</pre></details><details><summary id="f-cost_method">cost_method <span class="position">@ line 20</span></summary><pre>cost_method = fields.Selection(related="product_categ_id.property_cost_method")</pre></details><details><summary id="f-currency_id">currency_id <span class="position">@ line 14</span></summary><pre>currency_id = fields.Many2one('res.currency', compute='_compute_value', groups='stock.group_stock_manager')</pre></details><details><summary id="f-value">value <span class="position">@ line 13</span></summary><pre>value = fields.Monetary('Value', compute='_compute_value', groups='stock.group_stock_manager')</pre></details><h3>Methods</h3><ul id="m-_apply_inventory"><li>_apply_inventory(self) <span class="position">@ line 63</span></li></ul><ul id="m-_get_inventory_move_values"><li>_get_inventory_move_values(self, qty, location_id, location_dest_id, package_id, package_dest_id) <span class="position">@ line 72</span></li></ul><ul id="m-_read_group_postprocess_aggregate"><li>_read_group_postprocess_aggregate(self, aggregate_spec, raw_values) <span class="position">@ line 57</span></li></ul><ul id="m-_read_group_select"><li>_read_group_select(self, aggregate_spec, query) <span class="position">@ line 50</span></li></ul><h2>Inherited: odoo/addons/product_expiry/models/stock_quant.py</h2><h3>Fields</h3><details><summary id="f-expiration_date">expiration_date <span class="position">@ line 10</span></summary><pre>expiration_date = fields.Datetime(related='lot_id.expiration_date', store=True)</pre></details><details><summary id="f-removal_date">removal_date <span class="position">@ line 11</span></summary><pre>removal_date = fields.Datetime(related='lot_id.removal_date', store=True)</pre></details><details><summary id="f-use_expiration_date">use_expiration_date <span class="position">@ line 12</span></summary><pre>use_expiration_date = fields.Boolean(related='product_id.use_expiration_date')</pre></details><h3>Methods</h3><ul id="m-_get_gs1_barcode"><li>_get_gs1_barcode(self, gs1_quantity_rules_ai_by_uom) <span class="position">@ line 14</span></li></ul><ul id="m-_get_removal_strategy_sort_key"><li>_get_removal_strategy_sort_key(self, removal_strategy) <span class="position">@ line 29</span></li></ul><h2>Inherited: odoo/addons/mrp_subcontracting/models/stock_quant.py</h2><h3>Fields</h3><details><summary id="f-is_subcontract">is_subcontract <span class="position">@ line 11</span></summary><pre>is_subcontract = fields.Boolean(store=False, search='_search_is_subcontract')</pre></details><h3>Methods</h3><ul id="m-_search_is_subcontract"><li>_search_is_subcontract(self, operator, value) <span class="position">@ line 13</span></li></ul><script src="class.js"></script></body></html>
