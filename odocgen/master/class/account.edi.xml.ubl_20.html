<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>account.edi.xml.ubl_20 - odocgen</title><link rel="stylesheet" href="class.css" /></head><body><h1>account.edi.xml.ubl_20</h1><p>Inherited in: odoo/addons/l10n_dk_oioubl/models/account_edi_xml_oioubl_201.py<br/>Inherited in: odoo/addons/account_edi_ubl_cii/models/account_edi_xml_ubl_efff.py<br/>Inherited in: odoo/addons/account_edi_ubl_cii/models/account_edi_xml_ubl_21.py<br/>Inherited in: odoo/addons/account_edi_ubl_cii/models/account_edi_xml_ubl_20.py<br/></p><hr/><h2>Inherited: odoo/addons/l10n_dk_oioubl/models/account_edi_xml_oioubl_201.py</h2><h3>Methods</h3><ul id="m-_export_invoice_constraints"><li>_export_invoice_constraints(self, invoice, vals) <span class="position">@ line 265</span></li></ul><ul id="m-_export_invoice_ecosio_schematrons"><li>_export_invoice_ecosio_schematrons(self) <span class="position">@ line 56</span></li></ul><ul id="m-_export_invoice_filename"><li>_export_invoice_filename(self, invoice) <span class="position">@ line 53</span></li></ul><ul id="m-_export_invoice_vals"><li>_export_invoice_vals(self, invoice) <span class="position">@ line 62</span></li></ul><ul id="m-_get_currency_decimal_places"><li>_get_currency_decimal_places(self, currency_id) <span class="position">@ line 282</span></li></ul><ul id="m-_get_document_type_code_vals"><li>_get_document_type_code_vals(self, invoice, invoice_data) <span class="position">@ line 256</span></li></ul><ul id="m-_get_invoice_monetary_total_vals"><li>_get_invoice_monetary_total_vals(self, invoice, taxes_vals, line_extension_amount, allowance_total_amount, charge_total_amount) <span class="position">@ line 205</span></li></ul><ul id="m-_get_invoice_payment_means_vals_list"><li>_get_invoice_payment_means_vals_list(self, invoice) <span class="position">@ line 164</span></li></ul><ul id="m-_get_invoice_payment_terms_vals_list"><li>_get_invoice_payment_terms_vals_list(self, invoice) <span class="position">@ line 214</span></li></ul><ul id="m-_get_invoice_tax_totals_vals_list"><li>_get_invoice_tax_totals_vals_list(self, invoice, taxes_vals) <span class="position">@ line 174</span></li></ul><ul id="m-_get_partner_address_vals"><li>_get_partner_address_vals(self, partner) <span class="position">@ line 115</span></li></ul><ul id="m-_get_partner_party_legal_entity_vals_list"><li>_get_partner_party_legal_entity_vals_list(self, partner) <span class="position">@ line 152</span></li></ul><ul id="m-_get_partner_party_tax_scheme_vals_list"><li>_get_partner_party_tax_scheme_vals_list(self, partner, role) <span class="position">@ line 135</span></li></ul><ul id="m-_get_partner_party_vals"><li>_get_partner_party_vals(self, partner, role) <span class="position">@ line 84</span></li></ul><ul id="m-_get_tax_category_list"><li>_get_tax_category_list(self, invoice, taxes) <span class="position">@ line 235</span></li></ul><h2>Inherited: odoo/addons/account_edi_ubl_cii/models/account_edi_xml_ubl_efff.py</h2><h3>Methods</h3><ul id="m-_export_invoice_ecosio_schematrons"><li>_export_invoice_ecosio_schematrons(self) <span class="position">@ line 22</span></li></ul><ul id="m-_export_invoice_filename"><li>_export_invoice_filename(self, invoice) <span class="position">@ line 17</span></li></ul><h2>Inherited: odoo/addons/account_edi_ubl_cii/models/account_edi_xml_ubl_21.py</h2><h3>Methods</h3><ul id="m-_export_invoice_ecosio_schematrons"><li>_export_invoice_ecosio_schematrons(self) <span class="position">@ line 17</span></li></ul><ul id="m-_export_invoice_filename"><li>_export_invoice_filename(self, invoice) <span class="position">@ line 14</span></li></ul><ul id="m-_export_invoice_vals"><li>_export_invoice_vals(self, invoice) <span class="position">@ line 23</span></li></ul><h2>Inherited: odoo/addons/account_edi_ubl_cii/models/account_edi_xml_ubl_20.py</h2><h3>Methods</h3><details><summary id="m-_apply_invoice_line_filter">_apply_invoice_line_filter(self, invoice_line) <span class="position">@ line 409</span></summary><pre>To be overridden to apply a specific invoice line filter</pre></details><details><summary id="m-_apply_invoice_tax_filter">_apply_invoice_tax_filter(self, base_line, tax_values) <span class="position">@ line 403</span></summary><pre>To be overridden to apply a specific tax filter</pre></details><details><summary id="m-_correct_invoice_tax_amount">_correct_invoice_tax_amount(self, tree, invoice) <span class="position">@ line 764</span></summary><pre>The tax total may have been modified for rounding purpose, if so we should use the imported tax and not
the computed one</pre></details><ul id="m-_export_invoice"><li>_export_invoice(self, invoice) <span class="position">@ line 587</span></li></ul><ul id="m-_export_invoice_constraints"><li>_export_invoice_constraints(self, invoice, vals) <span class="position">@ line 577</span></li></ul><ul id="m-_export_invoice_ecosio_schematrons"><li>_export_invoice_ecosio_schematrons(self) <span class="position">@ line 30</span></li></ul><ul id="m-_export_invoice_filename"><li>_export_invoice_filename(self, invoice) <span class="position">@ line 27</span></li></ul><ul id="m-_export_invoice_vals"><li>_export_invoice_vals(self, invoice) <span class="position">@ line 428</span></li></ul><ul id="m-_find_value"><li>_find_value(self, xpath, tree, nsmap) <span class="position">@ line 19</span></li></ul><ul id="m-_get_bank_address_vals"><li>_get_bank_address_vals(self, bank) <span class="position">@ line 114</span></li></ul><ul id="m-_get_country_vals"><li>_get_country_vals(self, country) <span class="position">@ line 36</span></li></ul><ul id="m-_get_delivery_vals_list"><li>_get_delivery_vals_list(self, invoice) <span class="position">@ line 105</span></li></ul><details><summary id="m-_get_document_allowance_charge_vals_list">_get_document_allowance_charge_vals_list(self, invoice) <span class="position">@ line 227</span></summary><pre>https://docs.peppol.eu/poacc/billing/3.0/bis/#_document_level_allowance_or_charge
Usage for early payment discounts:
* Add one document level Allowance per tax rate (VAT included)
* Add one document level Charge (VAT excluded) with amount = the total sum of the early payment discount
The difference between these is the cash discount in case of early payment.</pre></details><details><summary id="m-_get_document_type_code_vals">_get_document_type_code_vals(self, invoice, invoice_data) <span class="position">@ line 593</span></summary><pre>Returns the values used for the `DocumentTypeCode` node</pre></details><details><summary id="m-_get_early_payment_discount_grouped_by_tax_rate">_get_early_payment_discount_grouped_by_tax_rate(self, invoice) <span class="position">@ line 415</span></summary><pre>Get the early payment discounts grouped by the tax rate of the product it is linked to
:returns {float: float}: mapping tax amounts to early payment discount amounts</pre></details><ul id="m-_get_financial_account_vals"><li>_get_financial_account_vals(self, partner_bank) <span class="position">@ line 142</span></li></ul><ul id="m-_get_financial_institution_branch_vals"><li>_get_financial_institution_branch_vals(self, bank) <span class="position">@ line 134</span></li></ul><ul id="m-_get_financial_institution_vals"><li>_get_financial_institution_vals(self, bank) <span class="position">@ line 125</span></li></ul><details><summary id="m-_get_import_document_amount_sign">_get_import_document_amount_sign(self, tree) <span class="position">@ line 790</span></summary><pre>In UBL, an invoice has tag 'Invoice' and a credit note has tag 'CreditNote'. However, a credit note can be
expressed as an invoice with negative amounts. For this case, we need a factor to take the opposite
of each quantity in the invoice.</pre></details><details><summary id="m-_get_invoice_line_allowance_vals_list">_get_invoice_line_allowance_vals_list(self, line, tax_values_list) <span class="position">@ line 270</span></summary><pre>Method used to fill the cac:{Invoice,CreditNote,DebitNote}Line>cac:AllowanceCharge node.

Allowances are distinguished from charges using the ChargeIndicator node with 'false' as value.

Note that allowance charges do not exist for credit notes in UBL 2.0, so if we apply discount in Odoo
the net price will not be consistent with the unit price, but we cannot do anything about it

:param line:    An invoice line.
:return:        A list of python dictionaries.</pre></details><details><summary id="m-_get_invoice_line_item_vals">_get_invoice_line_item_vals(self, line, taxes_vals) <span class="position">@ line 208</span></summary><pre>Method used to fill the cac:InvoiceLine/cac:Item node.
It provides information about what the product you are selling.

:param line:        An invoice line.
:param taxes_vals:  The tax details for the current invoice line.
:return:            A python dictionary.</pre></details><details><summary id="m-_get_invoice_line_price_vals">_get_invoice_line_price_vals(self, line) <span class="position">@ line 322</span></summary><pre>Method used to fill the cac:InvoiceLine/cac:Price node.
It provides information about the price applied for the goods and services invoiced.

:param line:    An invoice line.
:return:        A python dictionary.</pre></details><details><summary id="m-_get_invoice_line_tax_totals_vals_list">_get_invoice_line_tax_totals_vals_list(self, line, taxes_vals) <span class="position">@ line 355</span></summary><pre>Method used to fill the cac:TaxTotal node on a line level.
Uses the same method as the invoice TaxTotal, but can be overridden in other formats.</pre></details><details><summary id="m-_get_invoice_line_vals">_get_invoice_line_vals(self, line, line_id, taxes_vals) <span class="position">@ line 361</span></summary><pre>Method used to fill the cac:{Invoice,CreditNote,DebitNote}Line node.
It provides information about the document line.

:param line:    A document line.
:return:        A python dictionary.</pre></details><details><summary id="m-_get_invoice_monetary_total_vals">_get_invoice_monetary_total_vals(self, invoice, taxes_vals, line_extension_amount, allowance_total_amount, charge_total_amount) <span class="position">@ line 389</span></summary><pre>Method used to fill the cac:{Legal,Requested}MonetaryTotal node</pre></details><ul id="m-_get_invoice_payment_means_vals_list"><li>_get_invoice_payment_means_vals_list(self, invoice) <span class="position">@ line 153</span></li></ul><ul id="m-_get_invoice_payment_terms_vals_list"><li>_get_invoice_payment_terms_vals_list(self, invoice) <span class="position">@ line 167</span></li></ul><details><summary id="m-_get_invoice_period_vals_list">_get_invoice_period_vals_list(self, invoice) <span class="position">@ line 93</span></summary><pre>For now, we cannot fill this data from an invoice
This corresponds to the 'delivery or invoice period'. For UBL Bis 3, in the case of intra-community supply,
the Actual delivery date (BT-72) or the Invoicing period (BG-14) should be present under the form:
{
'start_date': str,
'end_date': str,
}.</pre></details><ul id="m-_get_invoice_tax_totals_vals_list"><li>_get_invoice_tax_totals_vals_list(self, invoice, taxes_vals) <span class="position">@ line 175</span></li></ul><ul id="m-_get_note_vals_list"><li>_get_note_vals_list(self, invoice) <span class="position">@ line 574</span></li></ul><ul id="m-_get_partner_address_vals"><li>_get_partner_address_vals(self, partner) <span class="position">@ line 47</span></li></ul><ul id="m-_get_partner_contact_vals"><li>_get_partner_contact_vals(self, partner) <span class="position">@ line 74</span></li></ul><ul id="m-_get_partner_party_identification_vals_list"><li>_get_partner_party_identification_vals_list(self, partner) <span class="position">@ line 44</span></li></ul><ul id="m-_get_partner_party_legal_entity_vals_list"><li>_get_partner_party_legal_entity_vals_list(self, partner) <span class="position">@ line 66</span></li></ul><ul id="m-_get_partner_party_tax_scheme_vals_list"><li>_get_partner_party_tax_scheme_vals_list(self, partner, role) <span class="position">@ line 58</span></li></ul><ul id="m-_get_partner_party_vals"><li>_get_partner_party_vals(self, partner, role) <span class="position">@ line 82</span></li></ul><ul id="m-_import_fill_invoice_form"><li>_import_fill_invoice_form(self, invoice, tree, qty_factor) <span class="position">@ line 612</span></li></ul><ul id="m-_import_fill_invoice_line_form"><li>_import_fill_invoice_line_form(self, tree, invoice_line, qty_factor) <span class="position">@ line 722</span></li></ul><details><summary id="m-_import_retrieve_partner_vals">_import_retrieve_partner_vals(self, tree, role) <span class="position">@ line 602</span></summary><pre>Returns a dict of values that will be used to retrieve the partner</pre></details><script src="class.js"></script></body></html>
